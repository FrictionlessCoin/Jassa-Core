(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var shared=require("./util/shared");module.exports=function(e,r){return shared.Promise=e,shared.ajax=r,{jassa:{util:require("./util"),rdf:require("./rdf"),vocab:require("./vocab"),sparql:require("./sparql"),service:require("./service"),sponate:require("./sponate"),facete:require("./facete")}}};
},{"./facete":27,"./rdf":42,"./service":70,"./sparql":179,"./sponate":218,"./util":241,"./util/shared":242,"./vocab":243}],2:[function(require,module,exports){
var Class=function(){function t(t,r){for(var n,e=1,o=arguments.length;o>e;e++){r=arguments[e];for(n in r)hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}function r(t){if(!t)return[];if("toArray"in Object(t))return t.toArray();for(var r=t.length||0,n=new Array(r);r--;)n[r]=t[r];return n}function n(t){return p.call(t)===l}function e(t){var r=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!==r.length||r[0]?r:[]}function o(t,r){for(var n=t.length,e=r.length;e--;)t[n+e]=r[e];return t}function u(t,r){return function(){var n=o([t.bind(this)],arguments);return r.apply(this,n)}}function i(){}function s(){function e(){this.initialize.apply(this,arguments)}var o=null,u=r(arguments);n(u[0])&&(o=u.shift()),t(e,Class.Methods),e.superclass=o,e.subclasses=[],o&&(i.prototype=o.prototype,e.prototype=new i,o.subclasses.push(e));for(var s=0,a=u.length;a>s;s++)e.addMethods(u[s]);return e.prototype.initialize||(e.prototype.initialize=c),e.prototype.constructor=e,e}function a(t){var r=this.superclass&&this.superclass.prototype,o=Object.keys(t);f&&(t.toString!==Object.prototype.toString&&o.push("toString"),t.valueOf!==Object.prototype.valueOf&&o.push("valueOf"));for(var i=0,s=o.length;s>i;i++){var a=o[i],c=t[a];if(r&&n(c)&&"$super"===e(c)[0]){var l=c;c=u(function(t){return function(){return r[t].apply(this,arguments)}}(a),l),c.valueOf=function(t){return function(){return t.valueOf.call(t)}}(l),c.toString=function(t){return function(){return t.toString.call(t)}}(l)}this.prototype[a]=c}return this}var c=function(){},l="[object Function]",p=Object.prototype.toString,f=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();return{create:s,Methods:{addMethods:a}}}();module.exports=Class;
},{}],3:[function(require,module,exports){
function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,a,f,p=gap,i=t[e];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(e)),"function"==typeof rep&&(i=rep.call(t,e,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,f=[],"[object Array]"===Object.prototype.toString.apply(i)){for(a=i.length,n=0;a>n;n+=1)f[n]=str(n,i)||"null";return o=0===f.length?"[]":gap?"[\n"+gap+f.join(",\n"+gap)+"\n"+p+"]":"["+f.join(",")+"]",gap=p,o}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,i),o&&f.push(quote(r)+(gap?": ":":")+o));else{var u=Object.keys(i).sort();for(n in u)r=u[n],Object.prototype.hasOwnProperty.call(i,r)&&(o=str(r,i),o&&f.push(quote(r)+(gap?": ":":")+o))}return o=0===f.length?"{}":gap?"{\n"+gap+f.join(",\n"+gap)+"\n"+p+"}":"{"+f.join(",")+"}",gap=p,o}}var JSONCanonical,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep,stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})};JSONCanonical={stringify:stringify},module.exports=JSONCanonical;
},{}],4:[function(require,module,exports){
var forEach=require("lodash.foreach"),uniq=require("lodash.uniq"),Class=require("../ext/Class"),ExprUtils=require("../sparql/ExprUtils"),ElementsAndExprs=require("./ElementsAndExprs"),ConstraintManager=Class.create({classLabel:"jassa.facete.ConstraintManager",initialize:function(t){this.constraints=t||[]},shallowClone:function(){var t=new ConstraintManager(this.constraints.slice(0));return t},getConstraintsByPath:function(t){var n=[],r=this.constraints;return r.forEach(function(r){var s=r.getDeclaredPaths(),e=s.some(function(n){var r=n.equals(t);return r});e&&n.push(r)}),n},getConstrainedSteps:function(t){for(var n=[],r=t.getSteps(),s=this.constraints,e=0;e<s.length;++e)for(var a=s[e],i=a.getDeclaredPaths(),o=0;o<i.length;++o){var u=i[o],h=u.getSteps(),l=h.length-r.length,c=u.startsWith(t);if(1==l&&c){var f=h[h.length-1];n.push(f)}}var p=uniq(n,function(t){return""+t});return p},getConstraints:function(){return this.constraints},addConstraint:function(t){this.constraints.push(t)},removeConstraint:function(t){for(var n=!1,r=this.constraints,s=[],e=0;e<r.length;++e){var a=r[e];a.equals(t)?n=!0:s.push(a)}return this.constraints=s,n},toggleConstraint:function(t){var n=this.removeConstraint(t);n||this.addConstraint(t)},createElementsAndExprs:function(t,n){var r=[],s=[],e={};this.constraints.forEach(function(s){var a=s.getDeclaredPaths(),i=a.join(" ");if(n){var o=a.some(function(t){var r=n.equals(t);return r});if(o)return}a.forEach(function(n){var s=t.forPath(n),e=s.getElements();r.push.apply(r,e)});var u=s.createElementsAndExprs(t),h=u.getElements(),l=u.getExprs();if(h&&r.push.apply(r,h),l&&l.length>0){var c=e[i];c||(c=[],e[i]=c);var f=ExprUtils.andify(l);c.push(f)}}),forEach(e,function(t){var n=ExprUtils.orify(t);s.push(n)});var a=new ElementsAndExprs(r,s);return a}});module.exports=ConstraintManager;
},{"../ext/Class":2,"../sparql/ExprUtils":124,"./ElementsAndExprs":6,"lodash.foreach":324,"lodash.uniq":410}],5:[function(require,module,exports){
var ElementUtils=require("../sparql/ElementUtils"),ExprVar=require("../sparql/expr/ExprVar"),E_Lang=require("../sparql/expr/E_Lang"),E_LangMatches=require("../sparql/expr/E_LangMatches"),E_Regex=require("../sparql/expr/E_Regex"),E_Equals=require("../sparql/expr/E_Equals"),NodeValueUtils=require("../sparql/NodeValueUtils"),ElementTriplesBlock=require("../sparql/element/ElementTriplesBlock"),ElementsAndExprs=require("./ElementsAndExprs"),ConstraintUtils={createConstraintExists:function(e,r){var t=e.forPath(r),n=ElementUtils.createElementsTriplesBlock(t.getTriples()),l=new ElementsAndExprs(n,[]);return l},createConstraintLang:function(e,r,t){var n=e.forPath(r),l=n.getVar(),s=new ExprVar(l),a=ElementUtils.createElementsTriplesBlock(n.getTriples()),E=t,i=[new E_LangMatches(new E_Lang(s),E)],p=new ElementsAndExprs(a,i);return p},createConstraintRegex:function(e,r,t){var n=e.forPath(r),l=n.getVar(),s=new ExprVar(l),a=ElementUtils.createElementsTriplesBlock(n.getTriples()),E=t,i=[new E_Regex(s,E,"i")],p=new ElementsAndExprs(a,i);return p},createConstraintEquals:function(e,r,t){var n=e.forPath(r),l=n.getVar(),s=new ExprVar(l),a=ElementUtils.createElementsTriplesBlock(n.getTriples()),E=NodeValueUtils.makeNode(t),i=[new E_Equals(s,E)],p=new ElementsAndExprs(a,i);return p}};module.exports=ConstraintUtils;
},{"../sparql/ElementUtils":120,"../sparql/NodeValueUtils":129,"../sparql/element/ElementTriplesBlock":145,"../sparql/expr/E_Equals":154,"../sparql/expr/E_Lang":157,"../sparql/expr/E_LangMatches":158,"../sparql/expr/E_Regex":166,"../sparql/expr/ExprVar":176,"./ElementsAndExprs":6}],6:[function(require,module,exports){
var Class=require("../ext/Class"),ElementUtils=require("../sparql/ElementUtils"),ElementsAndExprs=Class.create({initialize:function(e,t){this.elements=e,this.exprs=t},getElements:function(){return this.elements},getExprs:function(){return this.exprs},toElements:function(){var e=[],t=ElementUtils.createFilterElements(this.exprs);return e.push.apply(e,this.elements),e.push.apply(e,t),e}});module.exports=ElementsAndExprs;
},{"../ext/Class":2,"../sparql/ElementUtils":120}],7:[function(require,module,exports){
var Class=require("../ext/Class"),ConceptUtils=require("../sparql/ConceptUtils"),FacetNode=require("./FacetNode"),ConstraintManager=require("./ConstraintManager"),FacetConfig=Class.create({classLabel:"jassa.facete.FacetConfig",initialize:function(t,e,a){this.baseConcept=t||ConceptUtils.createSubjectConcept(),this.rootFacetNode=e||FacetNode.createRoot(this.baseConcept.getVar()),this.constraintManager=a||new ConstraintManager},getBaseConcept:function(){return this.baseConcept},setBaseConcept:function(t){this.baseConcept=t},getRootFacetNode:function(){return this.rootFacetNode},setRootFacetNode:function(t){this.rootFacetNode=t},getConstraintManager:function(){return this.constraintManager},setConstraintManager:function(t){this.constraintManager=t}});module.exports=FacetConfig;
},{"../ext/Class":2,"../sparql/ConceptUtils":118,"./ConstraintManager":4,"./FacetNode":8}],8:[function(require,module,exports){
var Class=require("../ext/Class"),NodeFactory=require("../rdf/NodeFactory"),ElementTriplesBlock=require("../sparql/element/ElementTriplesBlock"),GenSym=require("../sparql/GenSym"),VarUtils=require("../sparql/VarUtils"),Path=require("./Path"),Step=require("./Step"),VarNode=require("./VarNode"),FacetNode=Class.create({initialize:function(t,e,r,i){this.parent=r,this.root=i,this.root||(this.root=this.parent?r.root:this),this.varNode=t,this.step=e,this._isActive=!0,this.idToChild={}},getRootNode:function(){return this.root},isRoot:function(){var t=this.parent?!1:!0;return t},getVar:function(){var t=this.varNode.getVariableName(),e=NodeFactory.createVar(t);return e},getVariable:function(){return this.warningShown||(this.warningShown=!0),this.getVar()},getStep:function(){return this.step},getParent:function(){return this.parent},getPath:function(){for(var t=[],e=this;e!=this.root;)t.push(e.getStep()),e=e.getParent();t.reverse();var r=new Path(t);return r},forPath:function(t){var e=t.getSteps(),r=this;return e.forEach(function(t){r=r.forStep(t)}),r},getIdStr:function(){},getSteps:function(){return this.steps},isActiveDirect:function(){return this._isActive},getElements:function(){var t=[],e=this.getTriples();if(e.length>0){var r=new ElementTriplesBlock(e);t.push(r)}return t},getTriples:function(){var t=[];return this.getTriples2(t),t},getTriples2:function(t){return this.createDirectTriples2(t),this.parent&&this.parent.getTriples2(t),t},createDirectTriples:function(){var t=[];return this.createDirectTriples2(t),t},createDirectTriples2:function(t){if(this.step){var e=this.parent.getVariable(),r=this.getVariable(),i=this.step.createElement(e,r,this.generator),n=i.getTriples();t.push.apply(t,n)}return t},isActive:function(){return this._isActive?this.parent?this.parent.isActive():!0:!1},attachToParent:function(){this.parent&&(this.parent[this.id]=this,this.parent.attachToParent())},forProperty:function(t,e){var r=new Step(t,e),i=this.forStep(r);return i},forStep:function(t){var e=""+JSON.stringify(t),r=this.idToChild[e];if(!r){var i=this.varNode.forStepId(e);r=new FacetNode(i,t,this,this.root),this.idToChild[e]=r}return r},copyExclude:function(){var t=new FacetNode;return console.log("Now root:",t),this.root.copyExcludeRec(t,this),t},copyExcludeRec:function(t,e){console.log("Copy:",this,t),this!==e&&(this.copyTo(t),this.steps.forEach(function(r){var i=r.step,n=r.child;if(console.log("child:",i,n),n!==e){var o=t.forStep(i);console.log("New child:",o),n.copyExcludeRec(o,e)}}))}});FacetNode.createRoot=function(t,e){var r=t?t.getName():VarUtils.s.getName();e=e?e:new GenSym("fv");var i=new VarNode(r,e),n=new FacetNode(i);return n},module.exports=FacetNode;
},{"../ext/Class":2,"../rdf/NodeFactory":31,"../sparql/GenSym":125,"../sparql/VarUtils":138,"../sparql/element/ElementTriplesBlock":145,"./Path":10,"./Step":11,"./VarNode":14}],9:[function(require,module,exports){
var Concept=require("../sparql/Concept"),Relation=require("../sparql/Relation"),NodeFactory=require("../rdf/NodeFactory"),Triple=require("../rdf/Triple"),NodeUtils=require("../rdf/NodeUtils"),ExprVar=require("../sparql/expr/ExprVar"),E_Equals=require("../sparql/expr/E_Equals"),NodeValue=require("../sparql/expr/NodeValue"),E_LogicalNot=require("../sparql/expr/E_LogicalNot"),E_OneOf=require("../sparql/expr/E_OneOf"),ElementGroup=require("../sparql/element/ElementGroup"),ElementFilter=require("../sparql/element/ElementFilter"),ElementTriplesBlock=require("../sparql/element/ElementTriplesBlock"),PatternUtils=require("../sparql/PatternUtils"),ElementUtils=require("../sparql/ElementUtils"),VarUtils=require("../sparql/VarUtils"),Step=require("./Step"),StepUtils=require("./StepUtils"),StepRelation=require("./StepRelation"),FacetConceptUtils={createConceptResources:function(e,t,r){var n=e.getBaseConcept(),a=e.getRootFacetNode(),l=e.getConstraintManager(),i=r?t:null,o=l.createElementsAndExprs(a,i),p=o.getElements(),s=o.getExprs(),u=a.forPath(t),c=u.getVar(),E=n.getElements(),g=u.getElements(),m=[];m.push.apply(m,g),m.push.apply(m,p),n.isSubjectConcept()?0===m.length&&(m=E):m.push.apply(m,E);var q=s.map(function(e){var t=new ElementFilter(e);return t});m.push.apply(m,q);var f=new ElementGroup(m).flatten(),v=new Concept(f,c);return v},createConceptFacets:function(e,t,r){var n=this.createRelationFacets(e,t,r),a=new Concept(n.getElement(),n.getSourceVar());return a},createRelationFacets:function(e,t,r,n){var a=e.getBaseConcept(),l=e.getRootFacetNode(),i=e.getConstraintManager(),o=null;n&&(o=new Step(n.getUri(),r));var p=null;o&&(p=t.copyAppendStep(o));var s,u=i.createElementsAndExprs(l,p),c=u.toElements(),E=l.forPath(t),g=E.getVar(),m=a.getElements();s=a.isSubjectConcept()?c:m.concat(c);var q=PatternUtils.getVarsMentioned(s),f=VarUtils.freshVar("p",q),v=VarUtils.freshVar("o",q);console.log("propertyVar: "+f);var d=r?new Triple(g,f,v):d=new Triple(v,f,g);if(s.push(new ElementTriplesBlock([d])),o){var h=new ExprVar(f),V=new E_Equals(h,NodeValue.makeNode(n));s.push(new ElementFilter(V))}var w=E.getElements();s.push.apply(s,w);var F=new ElementGroup(s).flatten(),R=new Relation(F,f,v);return R},createRelationsFacetValues:function(e,t,r,n,a){var l=[];r=!!r;var i=(e.getBaseConcept(),e.getRootFacetNode()),o=e.getConstraintManager(),p=n.map(NodeUtils.getUri),s=(i.forPath(t),o.getConstrainedSteps(t)),u=s.filter(function(e){var t=e.isInverse()===r;if(!t)return!1;var n=p.indexOf(e.getPropertyName())>=0,l=a?!n:n;return l}),c=u.map(StepUtils.getPropertyName),E=[],g=[];n.forEach(function(e){c.indexOf(e.getUri())>=0?g.push(e):E.push(e)});var m=this.createStepRelations(e,t,u);l.push.apply(l,m);var q=this.createRelationFacets(e,t,r,!1),f=this.createElementFilterBindVar(q.getSourceVar(),E,!1);if(null!=f&&(q=new Relation(new ElementGroup([q.getElement(),f]),q.getSourcVar(),q.getTargetVar())),E.length>0||a){var v=new StepRelation(null,q);l.push(v)}return l},createElementFilterBindVar:function(e,t,r){var n=null;if(t.length>0){var a=new E_OneOf(new ExprVar(e),t);r&&(a=new E_LogicalNot(a)),n=new ElementFilter(a)}return n},createStepRelations:function(e,t,r){var n=this,a=r.map(function(r){var a=n.createStepRelation(e,t,r);return a});return a},createStepRelation:function(e,t,r){var n=r.getPropertyName(),a=NodeFactory.createUri(n),l=this.createRelationFacets(t,r.isInverse(),!1,a),i=new StepRelation(r,l);return i}};module.exports=FacetConceptUtils;
},{"../rdf/NodeFactory":31,"../rdf/NodeUtils":32,"../rdf/Triple":34,"../sparql/Concept":117,"../sparql/ElementUtils":120,"../sparql/PatternUtils":130,"../sparql/Relation":134,"../sparql/VarUtils":138,"../sparql/element/ElementFilter":141,"../sparql/element/ElementGroup":142,"../sparql/element/ElementTriplesBlock":145,"../sparql/expr/E_Equals":154,"../sparql/expr/E_LogicalNot":162,"../sparql/expr/E_OneOf":165,"../sparql/expr/ExprVar":176,"../sparql/expr/NodeValue":177,"./Step":11,"./StepRelation":12,"./StepUtils":13}],10:[function(require,module,exports){
var Class=require("../ext/Class"),Step=require("./Step"),Path=Class.create({classLabel:"jassa.facete.Path",initialize:function(t){this.steps=t?t:[]},getLength:function(){return this.steps.length},isEmpty:function(){var t=0===this.steps.length;return t},toString:function(){var t=this.steps.join(" ");return t},concat:function(t){var e=new Path(this.steps.concat(t.steps));return e},getLastStep:function(){var t,e=this.steps,s=e.length;return t=0===s?null:e[s-1]},getSteps:function(){return this.steps},startsWith:function(t){var e=t.steps.length;if(e>this.steps.length)return!1;for(var s=0;e>s;++s){var r=this.steps[s],n=t.steps[s];if(!r.equals(n))return!1}return!0},hashCode:function(){return this.toString()},equals:function(t){var e=this.steps.length;if(e!=t.steps.length)return!1;var s=this.startsWith(t);return s},copyAppendStep:function(t){var e=this.steps.slice(0);e.push(t);var s=new Path(e);return s},toJson:function(){for(var t=[],e=this.steps,s=0;s<e.length;++s){var r=e[s],n=r.toJson();t.push(n)}return t},getPropertyNames:function(){for(var t=[],e=this.steps,s=0;s<e.length;++s){var r=e[s],n=r.getPropertyName();t.push(n)}return t}});Path.fromJson=function(t){for(var e=[],s=0;s<t.length;++s){var r=t[s],n=Step.fromJson(r);e.push(n)}var a=new Path(e);return a},Path.parse=function(t){t=t.trim();var e=0!==t.length?t.split(" "):[],s=e.map(function(t){return Step.parse(t)}),r=new Path(s);return r},module.exports=Path;
},{"../ext/Class":2,"./Step":11}],11:[function(require,module,exports){
var Class=require("../ext/Class"),NodeFactory=require("../rdf/NodeFactory"),Triple=require("../rdf/Triple"),ElementTriplesBlock=require("../sparql/element/ElementTriplesBlock"),ObjectUtils=require("../util/ObjectUtils"),Step=Class.create({classLabel:"jassa.facete.Step",initialize:function(e,r){this.type="property",this.propertyName=e,this._isInverse=r},toJson:function(){var e={isInverse:this.isInverse,propertyName:this.propertyName};return e},getPropertyName:function(){return this.propertyName},isInverse:function(){return this._isInverse},equals:function(e){return ObjectUtils.equals(this,e)},toString:function(){return this._isInverse?"<"+this.propertyName:this.propertyName},createElement:function(e,r){var t,s=NodeFactory.createUri(this.propertyName);t=this._isInverse?new Triple(r,s,e):new Triple(e,s,r);var i=new ElementTriplesBlock([t]);return i}});Step.fromJson=function(e){var r=e.propertyName,t=e.IsInverse(),s=new Step(r,t);return s},Step.parse=function(e){var r;return r=e.charAt("<")>=0?new Step(e.substring(1),!0):new Step(e,!1)},module.exports=Step;
},{"../ext/Class":2,"../rdf/NodeFactory":31,"../rdf/Triple":34,"../sparql/element/ElementTriplesBlock":145,"../util/ObjectUtils":225}],12:[function(require,module,exports){
var Class=require("../ext/Class"),StepRelation=Class.create({initialize:function(t,e){this.step=t,this.relation=e},getStep:function(){return this.step},getRelation:function(){return this.relation},toString:function(){return this.step+": "+this.relation}});module.exports=StepRelation;
},{"../ext/Class":2}],13:[function(require,module,exports){
var StepUtils={getPropertyName:function(e){var t=e.getPropertyName();return t}};module.exports=StepUtils;
},{}],14:[function(require,module,exports){
var forEach=require("lodash.foreach"),Class=require("../ext/Class"),VarNode=require("./VarNode"),Step=require("./Step"),VarNode=Class.create({initialize:function(t,r,e,i,a){this.variableName=t,this.generator=r,this.stepId=e,this.parent=i,this.root=a,this.root||(this.root=this.parent?i.root:this),this.idToChild={}},isRoot:function(){var t=this.parent?!1:!0;return t},getVariableName:function(){return this.variableName},getIdStr:function(){var t=this.parent?this.parent.getIdStr():"",r=t+this.variableName;return r},getStepId:function(t){return""+JSON.stringify(t)},getSteps:function(){return this.steps},forProperty:function(t,r){var e=new Step(t,r),i=this.forStep(e);return i},forStepId:function(t){var r=this.idToChild[t];if(!r){var e=this.generator.next();r=new VarNode(e,this.generator,t,this),this.idToChild[t]=r}return r},findNodeByVarName:function(t){if(this.variableName===t)return this;var r=[];forEach(this.idToChild,function(t){r.push(t)});for(var e=0;e<r.length;++e){var i=r[e],a=i.findNodeByVarName(t);if(a)return a}return null}});module.exports=VarNode;
},{"../ext/Class":2,"./Step":11,"./VarNode":14,"lodash.foreach":324}],15:[function(require,module,exports){
var Class=require("../../ext/Class"),Constraint=Class.create({getName:function(){throw new Error("Override me")},getDeclaredPaths:function(){throw console.log("[ERROR] Override me"),new Error("Override me")},createElementsAndExprs:function(){throw new Error("Override me")},equals:function(){throw new Error("Override me")},hashCode:function(){throw new Error("Override me")}});module.exports=Constraint;
},{"../../ext/Class":2}],16:[function(require,module,exports){
var Class=require("../../ext/Class"),Constraint=require("./Constraint"),ConstraintBasePath=Class.create(Constraint,{initialize:function(t,a){this.name=t,this.path=a},getName:function(){return this.name},getDeclaredPaths:function(){return[this.path]},getDeclaredPath:function(){return this.path}});module.exports=ConstraintBasePath;
},{"../../ext/Class":2,"./Constraint":15}],17:[function(require,module,exports){
var Class=require("../../ext/Class"),ObjectUtils=require("../../util/ObjectUtils"),ConstraintBasePath=require("./ConstraintBasePath"),ConstraintBasePathValue=Class.create(ConstraintBasePath,{initialize:function(t,a,e,s){t(a,e),this.value=s},getValue:function(){return this.value},equals:function(t){if(!t instanceof ConstraintBasePath)return!1;var a=this.name==t.name,e=this.path.equals(t.path),s=this.value.equals(t.value),i=a&&e&&s;return i},hashCode:function(){var t=ObjectUtils.hashCode(this,!0);return t}});module.exports=ConstraintBasePathValue;
},{"../../ext/Class":2,"../../util/ObjectUtils":225,"./ConstraintBasePath":16}],18:[function(require,module,exports){

},{}],19:[function(require,module,exports){
var Class=require("../../ext/Class"),ConstraintUtils=require("../ConstraintUtils"),ConstraintBasePathValue=require("./ConstraintBasePathValue"),ConstraintEquals=Class.create(ConstraintBasePathValue,{classLabel:"jassa.facete.ConstraintEquals",initialize:function(a,t,s){a("equals",t,s)},createElementsAndExprs:function(a){var t=ConstraintUtils.createConstraintEquals(a,this.path,this.value);return t}});module.exports=ConstraintEquals;
},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePathValue":17}],20:[function(require,module,exports){
var Class=require("../../ext/Class"),ConstraintUtils=require("../ConstraintUtils"),ConstraintBasePath=require("./ConstraintBasePath"),ConstraintExists=Class.create(ConstraintBasePath,{classLabel:"jassa.facete.ConstraintExists",initialize:function(t,s){t("exists",s)},createElementsAndExprs:function(t){var s=ConstraintUtils.createConstraintExists(t,this.path);return s}});module.exports=ConstraintExists;
},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePath":16}],21:[function(require,module,exports){
var Class=require("../../ext/Class"),ConstraintUtils=require("../ConstraintUtils"),ConstraintBasePathValue=require("./ConstraintBasePathValue"),ConstraintLang=Class.create(ConstraintBasePathValue,{classLabel:"jassa.facete.ConstraintLang",initialize:function(a,t,n){a("lang",t,n)},createElementsAndExprs:function(a){var t=ConstraintUtils.createConstraintLang(a,this.path,this.value);return t}});module.exports=ConstraintLang;
},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePathValue":17}],22:[function(require,module,exports){
var Class=require("../../ext/Class"),ConstraintUtils=require("../ConstraintUtils"),ConstraintBasePathValue=require("./ConstraintBasePathValue"),ConstraintRegex=Class.create(ConstraintBasePathValue,{classLabel:"jassa.facete.ConstraintRegex",initialize:function(e,t,a){e("regex",t,a)},createElementsAndExprs:function(e){var t=ConstraintUtils.createConstraintRegex(e,this.path,this.value.getLiteralLexicalForm());return t}});module.exports=ConstraintRegex;
},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePathValue":17}],23:[function(require,module,exports){
var Class=require("../../ext/Class"),FacetService=Class.create({createListService:function(){throw new Error("Not overridden")}});module.exports=FacetService;
},{"../../ext/Class":2}],24:[function(require,module,exports){
var Class=require("../../ext/Class"),Concept=require("../../sparql/Concept"),ConceptUtils=require("../../sparql/ConceptUtils"),ListServiceSparqlQuery=require("../../service/list_service/ListServiceSparqlQuery"),FacetService=require("./FacetService"),FacetUtils=require("./../FacetUtils"),FacetServiceSparql=Class.create(FacetService,{initialize:function(e,t){this.sparqlService=e,this.facetConfig=t},createListService:function(e,t){var r=FacetUtils.createRelationFacets(this.facetConfig,e,t);console.log("CREATED RELATION: "+r);var i=new Concept(r.getElement(),r.getSourceVar()),c=FacetUtils.createRelationsFacetValues(this.facetConfig,e,t,[],!0);c.forEach(function(e){console.log("STEP RELATION: "+e)});var a=ConceptUtils.createQueryList(i),s=new ListServiceSparqlQuery(this.sparqlService,a,i.getVar(),!1);return s}});module.exports=FacetServiceSparql;
},{"../../ext/Class":2,"../../service/list_service/ListServiceSparqlQuery":75,"../../sparql/Concept":117,"../../sparql/ConceptUtils":118,"./../FacetUtils":9,"./FacetService":23}],25:[function(require,module,exports){
module.exports=require(18)
},{}],26:[function(require,module,exports){
var Class=require("../../ext/Class"),ListServiceTransformConcept=require("../../service/list_service/ListServiceTransformConcept"),FacetService=require("./FacetService"),FacetService=Class.create({initialize:function(e,r){this.facetService=e,this.fnTransform=r},createListService:function(e,r){var i=this.facetService.createListService(e,r),t=new ListServiceTransformConcept(i,this.fnTransform);return t}});module.exports=FacetService;
},{"../../ext/Class":2,"../../service/list_service/ListServiceTransformConcept":76,"./FacetService":23}],27:[function(require,module,exports){
"use strict";var ns={ConstraintManager:require("./ConstraintManager"),ConstraintUtils:require("./ConstraintUtils"),ElementsAndExprs:require("./ElementsAndExprs"),FacetConfig:require("./FacetConfig"),FacetNode:require("./FacetNode"),FacetUtils:require("./FacetUtils"),Path:require("./Path"),Step:require("./Step"),StepRelation:require("./StepRelation"),StepUtils:require("./StepUtils"),VarNode:require("./VarNode"),Constraint:require("./constraint/Constraint"),ConstraintBasePath:require("./constraint/ConstraintBasePath"),ConstraintBasePathValue:require("./constraint/ConstraintBasePathValue"),ConstraintElementFactoryBBoxRange:require("./constraint/ConstraintElementFactoryBBoxRange"),ConstraintEquals:require("./constraint/ConstraintEquals"),ConstraintExists:require("./constraint/ConstraintExists"),ConstraintLang:require("./constraint/ConstraintLang"),ConstraintRegex:require("./constraint/ConstraintRegex"),FacetService:require("./facet_service/FacetService"),FacetServiceSparql:require("./facet_service/FacetServiceSparql"),FacetServiceTagger:require("./facet_service/FacetServiceTagger"),FacetServiceTransformConcept:require("./facet_service/FacetServiceTransformConcept")};Object.freeze(ns),module.exports=ns;
},{"./ConstraintManager":4,"./ConstraintUtils":5,"./ElementsAndExprs":6,"./FacetConfig":7,"./FacetNode":8,"./FacetUtils":9,"./Path":10,"./Step":11,"./StepRelation":12,"./StepUtils":13,"./VarNode":14,"./constraint/Constraint":15,"./constraint/ConstraintBasePath":16,"./constraint/ConstraintBasePathValue":17,"./constraint/ConstraintElementFactoryBBoxRange":18,"./constraint/ConstraintEquals":19,"./constraint/ConstraintExists":20,"./constraint/ConstraintLang":21,"./constraint/ConstraintRegex":22,"./facet_service/FacetService":23,"./facet_service/FacetServiceSparql":24,"./facet_service/FacetServiceTagger":25,"./facet_service/FacetServiceTransformConcept":26}],28:[function(require,module,exports){
var Class=require("../ext/Class"),AnonId=Class.create({classLabel:"AnonId",getLabelString:function(){throw new Error("not implemented")}});module.exports=AnonId;
},{"../ext/Class":2}],29:[function(require,module,exports){
var Class=require("../ext/Class"),AnonId=require("./AnonId"),AnonIdStr=Class.create(AnonId,{classLabel:"AnonIdStr",initialize:function(n){this.label=n},getLabelString:function(){return this.label},toString:function(){return this.label}});module.exports=AnonIdStr;
},{"../ext/Class":2,"./AnonId":28}],30:[function(require,module,exports){
var Class=require("../ext/Class"),Node_Concrete=require("./node/Node_Concrete"),escapeLiteralString=function(e){return e},LiteralLabel=Class.create(Node_Concrete,{classLabel:"jassa.rdf.LiteralLabel",initialize:function(e,t,i,n){this.val=e,this.lex=t,this.lang=i,this.dtype=n},getValue:function(){return this.val},getLexicalForm:function(){return this.lex},getLanguage:function(){return this.lang},getDatatype:function(){return this.dtype},toString:function(){var e,t=this.dtype?this.dtype.getUri():null,i=escapeLiteralString(this.lex);return e=t?'"'+i+'"^^<'+t+">":'"'+i+'"'+(this.lang?"@"+this.lang:"")}});module.exports=LiteralLabel;
},{"../ext/Class":2,"./node/Node_Concrete":45}],31:[function(require,module,exports){
var AnonIdStr=require("./AnonIdStr"),Var=require("./node/Var"),Node=require("./node/Node"),Node_Uri=require("./node/Node_Uri"),Node_Blank=require("./node/Node_Blank"),Node_Literal=require("./node/Node_Literal"),LiteralLabel=require("./LiteralLabel"),TypeMapper=require("./TypeMapper"),DefaultRdfDatatypes=require("./rdf_datatype/DefaultRdfDatatypes"),strRegex=/"([^"\\]*(\\.[^"\\]*)*)"/,parseUri=function(e){var r;if("<"!==e.charAt(0))throw console.log("[ERROR] Cannot deal with "+e),"Not implemented";return r=e.slice(1,-1)},NodeFactory={createAnon:function(e){return new Node_Blank(e)},createUri:function(e){return new Node_Uri(e)},createVar:function(e){return new Var(e)},createPlainLiteral:function(e,r){null==r&&(r="");var a=new LiteralLabel(e,e,r);return new Node_Literal(a)},createTypedLiteralFromValue:function(e,r){var a=DefaultRdfDatatypes[r];if(!a){var t=TypeMapper.getInstance();a=t.getSafeTypeByName(r)}var n=a.unparse(e),o=null,i=new LiteralLabel(e,n,o,a);return new Node_Literal(i)},createTypedLiteralFromString:function(e,r){var a=DefaultRdfDatatypes[r];if(!a){var t=TypeMapper.getInstance();a=t.getSafeTypeByName(r)}var n=a.parse(e),o=e,i="",l=new LiteralLabel(n,o,i,a);return new Node_Literal(l)},createFromTalisRdfJson:function(e){if(!e||"undefined"==typeof e.type)throw"Invalid node: "+JSON.stringify(e);var r;switch(e.type){case"bnode":var a=new AnonIdStr(e.value);r=new NodeFactory.createAnon(a);break;case"uri":r=NodeFactory.createUri(e.value);break;case"literal":var t=e.lang||e["xml:lang"];r=NodeFactory.createPlainLiteral(e.value,t);break;case"typed-literal":r=NodeFactory.createTypedLiteralFromString(e.value,e.datatype);break;default:throw console.log("Unknown type: '"+e.type+"'"),"Bailing out"}return r},parseRdfTerm:function(e){if(!e)throw console.log("[ERROR] Null Pointer Exception"),"Bailing out";if(e=e.trim(),0===e.length)throw console.log("[ERROR] Empty string"),"Bailing out";var r,a=e.charAt(0);switch(a){case"<":var t=e.slice(1,-1);r=NodeFactory.createUri(t);break;case"_":var n=new AnonIdStr(a);r=NodeFactory.createAnon(n);break;case'"':var o=strRegex.exec(e),i=o[0],l=i.slice(1,-1),c=i.length,d=e.charAt(c);switch(d||(r=NodeFactory.createTypedLiteralFromString(l,"http://www.w3.org/2001/XMLSchema#string")),d){case"":case"@":var u=e.substr(c+1);r=NodeFactory.createPlainLiteral(l,u);break;case"^":var s=e.substr(c+2),p=parseUri(s);r=NodeFactory.createTypedLiteralFromString(l,p);break;default:throw console.log("[ERROR] Excepted @ or ^^"),"Bailing out"}break;default:throw console.log("Could not parse "+e),"Not implemented"}return r}};module.exports=NodeFactory;
},{"./AnonIdStr":29,"./LiteralLabel":30,"./TypeMapper":36,"./node/Node":43,"./node/Node_Blank":44,"./node/Node_Literal":47,"./node/Node_Uri":48,"./node/Var":50,"./rdf_datatype/DefaultRdfDatatypes":52}],32:[function(require,module,exports){
var NodeUtils={getSubstitute:function(e,r){var t=r(e);return t||(t=e),t},pushVar:function(e,r){if(r.isVariable()){var t=!1;e.forEach(function(e){t=t||r.equals(e)}),t||e.push(r)}return e},getLang:function(e){var r=e&&e.isLiteral()?e.getLiteralLanguage():null;return r},getUri:function(e){var r=e&&e.isUri()?e.getUri():null;return r},getValue:function(e){var r;if(null==e)r=null;else if(e.isUri())r=e.getUri();else if(e.isBlank())r=e.toString();else{if(!e.isLiteral())throw new Error("Unknow node type: ",e);r=e.getLiteralValue()}return r}};module.exports=NodeUtils;
},{}],33:[function(require,module,exports){
var Class=require("../ext/Class"),startsWith=function(e,t){return""===t?!0:null==e||null==t?!1:(e=String(e),t=String(t),e.length>=t.length&&e.slice(0,t.length)===t)},isFunction=function(e){return"function"==typeof e},extend=function(e,t){var i;for(i in t)hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},PrefixMappingImpl=Class.create({initialize:function(e){this.prefixes=e?e:{}},expandPrefix:function(){throw"Not implemented yet - sorry"},getNsPrefixMap:function(){return this.prefixes},getNsPrefixURI:function(e){return this.prefixes[e]},getNsURIPrefix:function(e){var t=null,i=null;return this.prefixes.forEach(function(n,r){startsWith(e,n)&&(!i||n.length>i.length)&&(t=r,i=n)}),t},qnameFor:function(){},removeNsPrefix:function(e){delete this.prefixes[e]},samePrefixMappingAs:function(){throw"Not implemented yet - Sorry"},setNsPrefix:function(e,t){return this.prefixes[e]=t,this},setNsPrefixes:function(e){var t=isFunction(e.getNsPrefixMap)?e.getNsPrefixMap():e,i=this;return t.forEach(function(e,t){i.setNsPrefix(t,e)}),this},shortForm:function(e){var t,i=this.getNsPrefixURI(e);if(i){var n=this.prefixes[e],r=e.substring(n.length);t=i+":"+r}else t=e;return t},addPrefix:function(e,t){this.prefixes[e]=t},getPrefix:function(e){var t=this.prefixes[e];return t},addJson:function(e){extend(this.prefixes,e)},getJson:function(){return this.prefixes}});module.exports=PrefixMappingImpl;
},{"../ext/Class":2}],34:[function(require,module,exports){
var Class=require("../ext/Class"),NodeUtils=require("./NodeUtils"),Triple=Class.create({classLabel:"jassa.rdf.Triple",initialize:function(t,e,i){this.subject=t,this.predicate=e,this.object=i},toString:function(){return this.subject+" "+this.predicate+" "+this.object},copySubstitute:function(t){var e=new Triple(NodeUtils.getSubstitute(this.subject,t),NodeUtils.getSubstitute(this.predicate,t),NodeUtils.getSubstitute(this.object,t));return e},getSubject:function(){return this.subject},getPredicate:function(){return this.predicate},getObject:function(){return this.object},getVarsMentioned:function(){var t=[];return NodeUtils.pushVar(t,this.subject),NodeUtils.pushVar(t,this.predicate),NodeUtils.pushVar(t,this.object),t}});module.exports=Triple;
},{"../ext/Class":2,"./NodeUtils":32}],35:[function(require,module,exports){
var uniq=require("lodash.uniq"),TripleUtils={uniqTriples:function(i){var r=uniq(i,!1,function(i){return i.toString()});return r}};module.exports=TripleUtils;
},{"lodash.uniq":410}],36:[function(require,module,exports){
var Class=require("../ext/Class"),DefaultRdfDatatypes=require("./rdf_datatype/DefaultRdfDatatypes"),BaseDatatype=require("./rdf_datatype/BaseDatatype"),JenaParameters={enableSilentAcceptanceOfUnknownDatatypes:!0},staticInstance=null,TypeMapper=Class.create({classLabel:"jassa.rdf.TypeMapper",initialize:function(e){this.uriToDt=e},getSafeTypeByName:function(e){var t=this.uriToDt,a=t[e];if(null==a){if(null==e)return null;if(!JenaParameters.enableSilentAcceptanceOfUnknownDatatypes)throw console.log("Attempted to created typed literal using an unknown datatype - "+e),"Bailing out";a=new BaseDatatype(e),this.registerDatatype(a)}return a},registerDatatype:function(e){var t=e.getUri();this.uriToDt[t]=e}});TypeMapper.staticInstance=null,TypeMapper.getInstance=function(){return null==TypeMapper.staticInstance&&(TypeMapper.staticInstance=new TypeMapper(DefaultRdfDatatypes)),TypeMapper.staticInstance},module.exports=TypeMapper;
},{"../ext/Class":2,"./rdf_datatype/BaseDatatype":51,"./rdf_datatype/DefaultRdfDatatypes":52}],37:[function(require,module,exports){
var Class=require("../../ext/Class"),DatatypeLabel=Class.create({classLabel:"DatatypeLabel",parse:function(){throw"Not implemented"},unparse:function(){throw"Not implemented"}});module.exports=DatatypeLabel;
},{"../../ext/Class":2}],38:[function(require,module,exports){
var Class=require("../../ext/Class"),DatatypeLabel=require("./DatatypeLabel"),DatatypeLabelFloat=Class.create(DatatypeLabel,{classLabel:"jassa.rdf.DatatypeLabelFloat",parse:function(a){return parseFloat(a)},unparse:function(a){return a.toString()}});module.exports=DatatypeLabelFloat;
},{"../../ext/Class":2,"./DatatypeLabel":37}],39:[function(require,module,exports){
var Class=require("../../ext/Class"),DatatypeLabel=require("./DatatypeLabel"),DatatypeLabelInteger=Class.create(DatatypeLabel,{classLabel:"jassa.rdf.DatatypeLabelInteger",parse:function(e){return parseInt(e,10)},unparse:function(e){return e.toString()}});module.exports=DatatypeLabelInteger;
},{"../../ext/Class":2,"./DatatypeLabel":37}],40:[function(require,module,exports){
var Class=require("../../ext/Class"),DatatypeLabel=require("./DatatypeLabel"),DatatypeLabelString=Class.create(DatatypeLabel,{classLabel:"jassa.rdf.DatatypeLabelString",parse:function(a){return a},unparse:function(a){return a.toString()}});module.exports=DatatypeLabelString;
},{"../../ext/Class":2,"./DatatypeLabel":37}],41:[function(require,module,exports){
var DatatypeLabelInteger=require("./DatatypeLabelInteger"),DatatypeLabelFloat=require("./DatatypeLabelFloat"),DatatypeLabelString=require("./DatatypeLabelString"),DefaultDatatypeLabels={xinteger:new DatatypeLabelInteger,xfloat:new DatatypeLabelFloat,xdouble:new DatatypeLabelFloat,xstring:new DatatypeLabelString,decimal:new DatatypeLabelFloat};module.exports=DefaultDatatypeLabels;
},{"./DatatypeLabelFloat":38,"./DatatypeLabelInteger":39,"./DatatypeLabelString":40}],42:[function(require,module,exports){
"use strict";var ns={AnonId:require("./AnonId"),AnonIdStr:require("./AnonIdStr"),LiteralLabel:require("./LiteralLabel"),NodeFactory:require("./NodeFactory"),NodeUtils:require("./NodeUtils"),PrefixMappingImpl:require("./PrefixMappingImpl"),Triple:require("./Triple"),TripleUtils:require("./TripleUtils"),TypeMapper:require("./TypeMapper"),DatatypeLabel:require("./datatype/DatatypeLabel"),DatatypeLabelFloat:require("./datatype/DatatypeLabelFloat"),DatatypeLabelInteger:require("./datatype/DatatypeLabelInteger"),DatatypeLabelString:require("./datatype/DatatypeLabelString"),DefaultDatatypeLabels:require("./datatype/DefaultDatatypeLabels"),Node:require("./node/Node"),Node_Blank:require("./node/Node_Blank"),Node_Concrete:require("./node/Node_Concrete"),Node_Fluid:require("./node/Node_Fluid"),Node_Literal:require("./node/Node_Literal"),Node_Uri:require("./node/Node_Uri"),Node_Variable:require("./node/Node_Variable"),Var:require("./node/Var"),BaseDatatype:require("./rdf_datatype/BaseDatatype"),DefaultRdfDatatypes:require("./rdf_datatype/DefaultRdfDatatypes"),RdfDatatype:require("./rdf_datatype/RdfDatatype"),RdfDatatypeBase:require("./rdf_datatype/RdfDatatypeBase"),RdfDatatypeLabel:require("./rdf_datatype/RdfDatatypeLabel"),TypedValue:require("./rdf_datatype/TypedValue")};Object.freeze(ns),module.exports=ns;
},{"./AnonId":28,"./AnonIdStr":29,"./LiteralLabel":30,"./NodeFactory":31,"./NodeUtils":32,"./PrefixMappingImpl":33,"./Triple":34,"./TripleUtils":35,"./TypeMapper":36,"./datatype/DatatypeLabel":37,"./datatype/DatatypeLabelFloat":38,"./datatype/DatatypeLabelInteger":39,"./datatype/DatatypeLabelString":40,"./datatype/DefaultDatatypeLabels":41,"./node/Node":43,"./node/Node_Blank":44,"./node/Node_Concrete":45,"./node/Node_Fluid":46,"./node/Node_Literal":47,"./node/Node_Uri":48,"./node/Node_Variable":49,"./node/Var":50,"./rdf_datatype/BaseDatatype":51,"./rdf_datatype/DefaultRdfDatatypes":52,"./rdf_datatype/RdfDatatype":53,"./rdf_datatype/RdfDatatypeBase":54,"./rdf_datatype/RdfDatatypeLabel":55,"./rdf_datatype/TypedValue":56}],43:[function(require,module,exports){
var Class=require("../../ext/Class"),Node=Class.create({classLabel:"Node",getUri:function(){throw"not a URI node"},getName:function(){throw" is not a variable node"},getBlankNodeId:function(){throw" is not a blank node"},getBlankNodeLabel:function(){return this.getBlankNodeId().getLabelString()},getLiteral:function(){throw" is not a literal node"},getLiteralValue:function(){throw" is not a literal node"},getLiteralLexicalForm:function(){throw" is not a literal node"},getLiteralDatatype:function(){throw" is not a literal node"},getLiteralDatatypeUri:function(){throw" is not a literal node"},isBlank:function(){return!1},isUri:function(){return!1},isLiteral:function(){return!1},isVariable:function(){return!1},equals:function(e){var t=!1;if(null==e)t=!1;else if(this.isLiteral()){if(e.isLiteral()){var i=this.getLiteralLexicalForm()===e.getLiteralLexicalForm(),a=this.getLiteralDatatypeUri()===e.getLiteralDatatypeUri(),n=this.getLiteralLanguage()===e.getLiteralLanguage();t=i&&a&&n}}else if(this.isUri())e.isUri()&&(t=this.getUri()===e.getUri());else if(this.isVariable())e.isVariable()&&(t=this.getName()===e.getName());else{if(!this.isBlank())throw"not implemented yet";e.isBlank()&&(t=this.getBlankNodeLabel()===e.getBlankNodeLabel())}return t}});module.exports=Node;
},{"../../ext/Class":2}],44:[function(require,module,exports){
var Class=require("../../ext/Class"),Node_Concrete=require("./Node_Concrete"),Node_Blank=Class.create(Node_Concrete,{classLabel:"jassa.rdf.Node_Blank",initialize:function(e){this.anonId=e},isBlank:function(){return!0},getBlankNodeId:function(){return this.anonId},toString:function(){return"_:"+this.anonId}});module.exports=Node_Blank;
},{"../../ext/Class":2,"./Node_Concrete":45}],45:[function(require,module,exports){
var Class=require("../../ext/Class"),Node=require("./Node"),Node_Concrete=Class.create(Node,{classLabel:"jassa.rdf.Node_Concrete",isConcrete:function(){return!0}});module.exports=Node_Concrete;
},{"../../ext/Class":2,"./Node":43}],46:[function(require,module,exports){
var Class=require("../../ext/Class"),Node=require("./Node"),Node_Fluid=Class.create(Node,{classLabel:"jassa.rdf.Node_Fluid",isConcrete:function(){return!1}});module.exports=Node_Fluid;
},{"../../ext/Class":2,"./Node":43}],47:[function(require,module,exports){
var Class=require("../../ext/Class"),Node_Concrete=require("./Node_Concrete"),Node_Literal=Class.create(Node_Concrete,{classLabel:"Node_Literal",initialize:function(e){this.literalLabel=e},isLiteral:function(){return!0},getLiteral:function(){return this.literalLabel},getLiteralValue:function(){return this.literalLabel.getValue()},getLiteralLexicalForm:function(){return this.literalLabel.getLexicalForm()},getLiteralDatatype:function(){return this.literalLabel.getDatatype()},getLiteralDatatypeUri:function(){var e=this.getLiteralDatatype(),t=e?e.getUri():null;return t},getLiteralLanguage:function(){return this.literalLabel.getLanguage()},toString:function(){return this.literalLabel.toString()}});module.exports=Node_Literal;
},{"../../ext/Class":2,"./Node_Concrete":45}],48:[function(require,module,exports){
var Class=require("../../ext/Class"),Node_Concrete=require("./Node_Concrete"),Node_Uri=Class.create(Node_Concrete,{classLabel:"jassa.rdf.Node_Uri",initialize:function(e){this.uri=e},isUri:function(){return!0},getUri:function(){return this.uri},toString:function(){return"<"+this.uri+">"}});module.exports=Node_Uri;
},{"../../ext/Class":2,"./Node_Concrete":45}],49:[function(require,module,exports){
var Class=require("../../ext/Class"),Node_Fluid=require("./Node_Fluid"),Node_Variable=Class.create(Node_Fluid,{classLabel:"jassa.rdf.Node_Variable",isVariable:function(){return!0}});module.exports=Node_Variable;
},{"../../ext/Class":2,"./Node_Fluid":46}],50:[function(require,module,exports){
var Class=require("../../ext/Class"),Node_Variable=require("./Node_Variable"),Var=Class.create(Node_Variable,{classLabel:"Var",initialize:function(e){this.name=e},getName:function(){return this.name},toString:function(){return"?"+this.name}});module.exports=Var;
},{"../../ext/Class":2,"./Node_Variable":49}],51:[function(require,module,exports){
var Class=require("../../ext/Class"),RdfDatatype=require("./RdfDatatype"),TypedValue=require("./TypedValue"),BaseDatatype=Class.create(RdfDatatype,{classLabel:"jassa.rdf.BaseDatatype",initialize:function(e){this.datatypeUri=e},getUri:function(){return this.datatypeUri},unparse:function(e){var t;return t=e instanceof TypedValue?e.getLexicalValue():e.toString()},parse:function(e){return new TypedValue(e,this.datatypeUri)},toString:function(){return"Datatype ["+this.datatypeUri+"]"}});module.exports=BaseDatatype;
},{"../../ext/Class":2,"./RdfDatatype":53,"./TypedValue":56}],52:[function(require,module,exports){
var xsd=require("../../vocab/xsd"),DatatypeLabels=require("../datatype/DefaultDatatypeLabels"),RdfDatatypeLabel=require("./RdfDatatypeLabel"),DefaultRdfDatatypes={},registerRdfDatype=function(e,t){DefaultRdfDatatypes[e]=new RdfDatatypeLabel(e,t)};registerRdfDatype(xsd.xint,DatatypeLabels.xinteger),registerRdfDatype(xsd.xlong,DatatypeLabels.xinteger),registerRdfDatype(xsd.xinteger,DatatypeLabels.xinteger),registerRdfDatype(xsd.xstring,DatatypeLabels.xstring),registerRdfDatype(xsd.xfloat,DatatypeLabels.xfloat),registerRdfDatype(xsd.xdouble,DatatypeLabels.xdouble),registerRdfDatype(xsd.decimal,DatatypeLabels.xfloat),module.exports=DefaultRdfDatatypes;
},{"../../vocab/xsd":248,"../datatype/DefaultDatatypeLabels":41,"./RdfDatatypeLabel":55}],53:[function(require,module,exports){
var Class=require("../../ext/Class"),RdfDatatype=Class.create({classLabel:"RdfDatatype",getUri:function(){throw"Not implemented"},unparse:function(){throw"Not implemented"},parse:function(){throw"Not implemented"}});module.exports=RdfDatatype;
},{"../../ext/Class":2}],54:[function(require,module,exports){
var Class=require("../../ext/Class"),RdfDatatype=require("./RdfDatatype"),RdfDatatypeBase=Class.create(RdfDatatype,{classLabel:"jassa.rdf.RdfDatatypeBase",initialize:function(a){this.uri=a},getUri:function(){return this.uri}});module.exports=RdfDatatypeBase;
},{"../../ext/Class":2,"./RdfDatatype":53}],55:[function(require,module,exports){
var Class=require("../../ext/Class"),RdfDatatypeBase=require("./RdfDatatypeBase"),RdfDatatypeLabel=Class.create(RdfDatatypeBase,{classLabel:"jassa.rdf.RdfDatatype_Label",initialize:function(a,e,t){a(e),this.datatypeLabel=t},parse:function(a){return this.datatypeLabel.parse(a)},unparse:function(a){return this.datatypeLabel.unparse(a)}});module.exports=RdfDatatypeLabel;
},{"../../ext/Class":2,"./RdfDatatypeBase":54}],56:[function(require,module,exports){
var Class=require("../../ext/Class"),TypedValue=Class.create({classLabel:"jassa.rdf.TypedValue",initialize:function(e,a){this.lexicalValue=e,this.datatypeUri=a},getLexicalValue:function(){return this.lexicalValue},getDatatypeUri:function(){return this.datatypeUri}});module.exports=TypedValue;
},{"../../ext/Class":2}],57:[function(require,module,exports){
var defaults=require("lodash.defaults"),AjaxUtils={createSparqlRequestAjaxSpec:function(a,e,t,r,l){var u=e;u&&1===u.length&&(u=u[0]);var s={query:t,"default-graph-uri":u},d={url:a,dataType:"json",crossDomain:!0,traditional:!0,data:s};return defaults(s,r),defaults(d,l),d}};module.exports=AjaxUtils;
},{"lodash.defaults":249}],58:[function(require,module,exports){
var Class=require("../ext/Class"),ExprUtils=require("../sparql/ExprUtils"),BindingLookup=Class.create({initialize:function(i,e){this.sparqlService=i,this.element=e},lookupByIterator:function(i){for(var e=[];i.hasNext();){var r=i.nextBinding(),s=ExprUtils.bindingToExprs(r),n=s.join(", ");e.push({binding:r,exprs:s,exprsKey:n})}}});module.exports=BindingLookup;
},{"../ext/Class":2,"../sparql/ExprUtils":124}],59:[function(require,module,exports){
var HashMap=require("../util/collection/HashMap"),shared=require("../util/shared"),Promise=shared.Promise,LookupServiceUtils={lookup:function(e,r){var t;return t=e&&r?e.lookup(r):Promise.resolve([])},zip:function(e,r){var t=Promise.all(r).then(function(){for(var r=new HashMap,t=0;t<e.length;++t){var n=e[t],u=arguments[t];r.put(n,u)}return r});return t},unmapKeys:function(e,r,t){var n=new HashMap;return e.forEach(function(e){var u=r(e),o=t.get(u);n.put(e,o)}),n},fetchItemsMapped:function(e,r,t){var n=r.map(t),u=e.fetchItems(n).then(function(e){var n=LookupServiceUtils.unmapKeys(r,t,e);return n});return u},fetchCountsMapped:function(e,r,t){var n=r.map(t),u=e.fetchCounts(n).then(function(e){var n=LookupServiceUtils.unmapKeys(r,t,e);return n});return u}};module.exports=LookupServiceUtils;
},{"../util/collection/HashMap":233,"../util/shared":242}],60:[function(require,module,exports){
var PageExpandUtils={computeRange:function(a,t,e){var i=t||0,r=i%e;i-=r;var s,f=a;if(f){s=f;var n=f%e;f+=e-n}var u={limit:f,offset:i,subLimit:s,subOffset:r};return u}};module.exports=PageExpandUtils;
},{}],61:[function(require,module,exports){
var Class=require("../ext/Class"),QueryPaginator=Class.create({initialize:function(e,t){this.query=e;var i=e.getOffset(),s=e.getLimit();this.nextOffset=i||0,this.nextRemaining=null==s?null:s,this.pageSize=t},getPageSize:function(){return this.pageSize},next:function(){var e=0===this.nextOffset?null:this.nextOffset;if(this.query.setOffset(e),null==this.nextRemaining)this.query.setLimit(this.pageSize),this.nextOffset+=this.pageSize;else{var t=Math.min(this.pageSize,this.nextRemaining);if(this.nextOffset+=t,this.nextRemaining-=t,0===t)return null;this.query.setLimit(t)}return this.query}});module.exports=QueryPaginator;
},{"../ext/Class":2}],62:[function(require,module,exports){
var Class=require("../ext/Class"),CacheSimple=require("./cache/CacheSimple"),RequestCache=Class.create({initialize:function(e,t){this.executionCache=e?e:{},this.resultCache=t?t:new CacheSimple},getExecutionCache:function(){return this.executionCache},getResultCache:function(){return this.resultCache}});module.exports=RequestCache;
},{"../ext/Class":2,"./cache/CacheSimple":68}],63:[function(require,module,exports){
var Class=require("../ext/Class"),ResultSetPart=Class.create({initialize:function(t,i){this.varNames=t||[],this.bindings=i||[]},getVarNames:function(){return this.varNames},getBindings:function(){return this.bindings},toString:function(){return"ResultSetPart: vars="+this.varNames+", bindings="+this.bindings}});module.exports=ResultSetPart;
},{"../ext/Class":2}],64:[function(require,module,exports){
var HashMap=require("../util/collection/HashMap"),IteratorArray=require("../util/collection/IteratorArray"),VarUtils=require("../sparql/VarUtils"),ResultSetArrayIteratorBinding=require("./result_set/ResultSetArrayIteratorBinding"),ResultSetPart=require("./ResultSetPart"),Binding=require("../sparql/Binding"),ResultSetUtils={jsonToResultSet:function(r){var t=r.head.vars,e=r.results.bindings,a=e.map(function(r){var t=Binding.fromTalisJson(r);return t}),n=new IteratorArray(a),i=new ResultSetArrayIteratorBinding(n,t);return i},partition:function(r,t){for(var e=r.getVarNames(),a=new HashMap;r.hasNext();){var n=r.next(),i=n.get(t),s=a.get(i);null==s&&(s=new ResultSetPart(e),a.put(i,s)),s.getBindings().push(n)}return a},createResultSetFromBindings:function(r,t){var e=new IteratorArray(r),a=new ResultSetArrayIteratorBinding(e,t);return a},createEmptyResultSet:function(r){var t=r.getProjectVars(),e=VarUtils.getVarNames(t),a=this.createResultSetFromBindings([],e);return a}};module.exports=ResultSetUtils;
},{"../sparql/Binding":116,"../sparql/VarUtils":138,"../util/collection/HashMap":233,"../util/collection/IteratorArray":237,"./ResultSetPart":63,"./result_set/ResultSetArrayIteratorBinding":97}],65:[function(require,module,exports){
var union=require("lodash.union"),shared=require("../util/shared"),Promise=shared.Promise,ResultSetArrayIteratorBinding=require("./result_set/ResultSetArrayIteratorBinding"),ArrayUtils=require("../util/ArrayUtils"),IteratorArray=require("../util/collection/IteratorArray"),ExprVar=require("../sparql/expr/ExprVar"),ElementFilter=require("../sparql/element/ElementFilter"),E_OneOf=require("../sparql/expr/E_OneOf"),ElementSubQuery=require("../sparql/element/ElementSubQuery"),VarUtils=require("../sparql/VarUtils"),Binding=require("../sparql/Binding"),ConceptUtils=require("../sparql/ConceptUtils"),QueryUtils=require("../sparql/QueryUtils"),ServiceUtils={constrainQueryVar:function(e,r,t){var n=new ExprVar(r),u=this.constrainQueryExprVar(e,n,t);return u},constrainQueryExprVar:function(e,r,t){var n=e.clone(),u=new ElementFilter(new E_OneOf(r,t));return n.getElements().push(u),n},chunkQuery:function(e,r,t,n){var u=ArrayUtils.chunk(t,n),i=new ExprVar(r),a=this,l=u.map(function(){var r=a.constrainQueryExprVar(e,i,t);return r});return l},mergeResultSets:function(e){var r=[],t=[];e.forEach(function(e){var n=e.getVarNames();t=union(t,n);var u=e.getIterator().getArray();r.push.apply(r,u)});var n=new IteratorArray(r),u=new ResultSetArrayIteratorBinding(n,t);return u},execSelectForNodes:function(e,r,t,n,u){var i=this.chunkQuery(r,t,n,u),a=i.map(function(r){var t=e.createQueryExecution(r),n=t.execSelect();return n}),l=Promise.all(a),s=this,c=l.then(function(){var e=s.mergeResultSets(arguments);return e});return c},consumeResultSet:function(e){for(;e.hasNext();)e.nextBinding()},resultSetToList:function(e,r){for(var t=[];e.hasNext();){var n=e.nextBinding(),u=n.get(r);t.push(u)}return t},resultSetToInt:function(e,r){var t=null;if(e.hasNext()){var n=e.nextBinding(),u=n.get(r);t=u.getLiteralValue()}return t},fetchList:function(e,r){var t=this,n=e.execSelect().then(function(e){var n=t.resultSetToList(e,r);return n});return n},fetchInt:function(e,r){var t=this,n=e.execSelect().then(function(e){var n=t.resultSetToInt(e,r);return n});return n},fetchCountConcept:Promise.method(function(e,r,t){var n=ConceptUtils.freshVar(r),u=null==t?null:t+1,i=ConceptUtils.createQueryCount(r,n,u),a=e.createQueryExecution(i);return ServiceUtils.fetchInt(a,n).then(function(e){var r=e>t,n={count:r?t:e,limit:t,hasMoreItems:r};return n})}),fetchCountQuery:Promise.method(function(e,r,t,n){var u=[new ElementSubQuery(r)],i=r.getVarsMentioned(),a=VarUtils.createVarGen("c",i),l=a.next(),s=QueryUtils.createQueryCount(u,null,null,l,null,null,null),c=e.createQueryExecution(s);return c.setTimeout(t),ServiceUtils.fetchInt(c,l).then(function(e){return{count:e,limit:null,hasMoreItems:!1}}).catch(function(){var r=QueryUtils.createQueryCount(u,n+1,null,l,null,null,null),t=e.createQueryExecution(r);return ServiceUtils.fetchInt(t,l).then(function(e){return{count:e,limit:n,hasMoreItems:e>n}})})}),fetchItemsConcept:function(e,r,t,n){var u=ConceptUtils.createQueryList(r,t,n),i=e.createQueryExecution(u),a=i.execSelect().then(function(e){var t=ServiceUtils.resultSetToList(e,r.getVar());return t});return a}};module.exports=ServiceUtils;
},{"../sparql/Binding":116,"../sparql/ConceptUtils":118,"../sparql/QueryUtils":133,"../sparql/VarUtils":138,"../sparql/element/ElementFilter":141,"../sparql/element/ElementSubQuery":144,"../sparql/expr/E_OneOf":165,"../sparql/expr/ExprVar":176,"../util/ArrayUtils":219,"../util/collection/IteratorArray":237,"../util/shared":242,"./result_set/ResultSetArrayIteratorBinding":97,"lodash.union":387}],66:[function(require,module,exports){
var uniq=require("lodash.uniq"),VarUtils=require("../sparql/VarUtils"),ServiceUtils=require("./ServiceUtils"),IteratorArray=require("../util/collection/IteratorArray"),ResultSetArrayIteratorBinding=require("./result_set/ResultSetArrayIteratorBinding"),shared=require("../util/shared"),Promise=shared.Promise,TableServiceUtils={bindingToJsMap:function(e,r){var t={};return e.forEach(function(e){var n=e.getName();t[n]=r.get(e)}),t},createNgGridOptionsFromQuery:function(e){if(!e)return[];var r=e.getProjectVars(),t=VarUtils.getVarNames(r),n=t.map(function(e){var r={field:e,displayName:e};return r});return n},fetchCount:function(e,r,t,n){var i;return e&&r?(r=r.clone(),r.setLimit(null),r.setOffset(null),i=ServiceUtils.fetchCountQuery(e,r,t,n)):i=new Promise(function(e){e(0)}),i},fetchData:function(e,r,t,n){if(!e||!r){var i=new IteratorArray([]),a=[],o=new ResultSetArrayIteratorBinding(i,a);return new Promise(function(e){e(o)})}r=r.clone(),r.setLimit(t),r.setOffset(n);var u=e.createQueryExecution(r),c=u.execSelect().then(function(e){for(var t=[],n=r.getProjectVars();e.hasNext();){var i=e.next(),a=TableServiceUtils.bindingToJsMap(n,i);t.push(a)}return t});return c},collectNodes:function(e){var r=[];return e.forEach(function(e){e.forEach(function(e){r.push(e)})}),r=uniq(r,!1,function(e){return e.toString()})},fetchSchemaTableConfigFacet:function(e,r){var t=e.getPaths().getArray(),n=r.lookup(t),i=n.then(function(r){var n=t.map(function(t){var n={field:e.getColumnId(t),displayName:r.get(t),path:t};return n}),i={colDefs:n};return i});return i},transformToNodeLabels:function(e,r){var t=this.collectNodes(r),n=e.lookup(t),i=n.then(function(e){var t=r.map(function(r){var t={};return r.forEach(function(r,n){var i=e.get(r);t[n]={node:r,displayLabel:i}}),t});return t});return i}};module.exports=TableServiceUtils;
},{"../sparql/VarUtils":138,"../util/collection/IteratorArray":237,"../util/shared":242,"./ServiceUtils":65,"./result_set/ResultSetArrayIteratorBinding":97,"lodash.uniq":410}],67:[function(require,module,exports){
var Class=require("../../ext/Class"),Cache=Class.create({getItem:function(){throw console.log("not implemented"),"not implemented"},setItem:function(){throw console.log("not implemented"),"not implemented"}});module.exports=Cache;
},{"../../ext/Class":2}],68:[function(require,module,exports){
var Class=require("../../ext/Class"),Cache=require("./Cache"),CacheSimple=Class.create(Cache,{initialize:function(e){this.data=e||{}},getItem:function(e){var a=this.data[e];return a},setItem:function(e,a){this.data[e]=a}});module.exports=CacheSimple;
},{"../../ext/Class":2,"./Cache":67}],69:[function(require,module,exports){
var Class=require("../../ext/Class"),DataService=Class.create({fetchData:function(){throw console.log("Not implemented"),"Not implemented"}});module.exports=DataService;
},{"../../ext/Class":2}],70:[function(require,module,exports){
"use strict";var ns={AjaxUtils:require("./AjaxUtils"),BindingLookup:require("./BindingLookup"),LookupServiceUtils:require("./LookupServiceUtils"),PageExpandUtils:require("./PageExpandUtils"),QueryPaginator:require("./QueryPaginator"),RequestCache:require("./RequestCache"),ResultSetPart:require("./ResultSetPart"),ResultSetUtils:require("./ResultSetUtils"),ServiceUtils:require("./ServiceUtils"),TableServiceUtils:require("./TableServiceUtils"),Cache:require("./cache/Cache"),CacheSimple:require("./cache/CacheSimple"),DataService:require("./data_service/DataService"),ListService:require("./list_service/ListService"),ListServiceConcept:require("./list_service/ListServiceConcept"),ListServiceConceptKeyLookup:require("./list_service/ListServiceConceptKeyLookup"),ListServicePageExpand:require("./list_service/ListServicePageExpand"),ListServiceSparqlQuery:require("./list_service/ListServiceSparqlQuery"),ListServiceTransformConcept:require("./list_service/ListServiceTransformConcept"),LookupService:require("./lookup_service/LookupService"),LookupServiceBase:require("./lookup_service/LookupServiceBase"),LookupServiceCache:require("./lookup_service/LookupServiceCache"),LookupServiceChunker:require("./lookup_service/LookupServiceChunker"),LookupServiceConst:require("./lookup_service/LookupServiceConst"),LookupServiceDelegateBase:require("./lookup_service/LookupServiceDelegateBase"),LookupServiceIdFilter:require("./lookup_service/LookupServiceIdFilter"),LookupServiceSparqlQuery:require("./lookup_service/LookupServiceSparqlQuery"),LookupServiceTimeout:require("./lookup_service/LookupServiceTimeout"),LookupServiceTransform:require("./lookup_service/LookupServiceTransform"),QueryCacheBindingHashSingle:require("./query_cache/QueryCacheBindingHashSingle"),QueryCacheNodeFactory:require("./query_cache/QueryCacheNodeFactory"),QueryCacheNodeFactoryImpl:require("./query_cache/QueryCacheNodeFactoryImpl"),QueryExecution:require("./query_execution/QueryExecution"),QueryExecutionCache:require("./query_execution/QueryExecutionCache"),QueryExecutionDelegate:require("./query_execution/QueryExecutionDelegate"),QueryExecutionHttp:require("./query_execution/QueryExecutionHttp"),QueryExecutionPageExpand:require("./query_execution/QueryExecutionPageExpand"),QueryExecutionPaginate:require("./query_execution/QueryExecutionPaginate"),ResultSet:require("./result_set/ResultSet"),ResultSetArrayIteratorBinding:require("./result_set/ResultSetArrayIteratorBinding"),ResultSetHashJoin:require("./result_set/ResultSetHashJoin"),SparqlService:require("./sparql_service/SparqlService"),SparqlServiceBaseString:require("./sparql_service/SparqlServiceBaseString"),SparqlServiceCache:require("./sparql_service/SparqlServiceCache"),SparqlServiceConsoleLog:require("./sparql_service/SparqlServiceConsoleLog"),SparqlServiceFactory:require("./sparql_service/SparqlServiceFactory"),SparqlServiceFactoryConst:require("./sparql_service/SparqlServiceFactoryConst"),SparqlServiceFactoryDefault:require("./sparql_service/SparqlServiceFactoryDefault"),SparqlServiceHttp:require("./sparql_service/SparqlServiceHttp"),SparqlServicePageExpand:require("./sparql_service/SparqlServicePageExpand"),SparqlServicePaginate:require("./sparql_service/SparqlServicePaginate"),SparqlServiceVirtFix:require("./sparql_service/SparqlServiceVirtFix"),TableService:require("./table_service/TableService"),TableServiceDelegateBase:require("./table_service/TableServiceDelegateBase"),TableServiceFacet:require("./table_service/TableServiceFacet"),TableServiceNodeLabels:require("./table_service/TableServiceNodeLabels"),TableServiceQuery:require("./table_service/TableServiceQuery")};Object.freeze(ns),module.exports=ns;
},{"./AjaxUtils":57,"./BindingLookup":58,"./LookupServiceUtils":59,"./PageExpandUtils":60,"./QueryPaginator":61,"./RequestCache":62,"./ResultSetPart":63,"./ResultSetUtils":64,"./ServiceUtils":65,"./TableServiceUtils":66,"./cache/Cache":67,"./cache/CacheSimple":68,"./data_service/DataService":69,"./list_service/ListService":71,"./list_service/ListServiceConcept":72,"./list_service/ListServiceConceptKeyLookup":73,"./list_service/ListServicePageExpand":74,"./list_service/ListServiceSparqlQuery":75,"./list_service/ListServiceTransformConcept":76,"./lookup_service/LookupService":77,"./lookup_service/LookupServiceBase":78,"./lookup_service/LookupServiceCache":79,"./lookup_service/LookupServiceChunker":80,"./lookup_service/LookupServiceConst":81,"./lookup_service/LookupServiceDelegateBase":82,"./lookup_service/LookupServiceIdFilter":83,"./lookup_service/LookupServiceSparqlQuery":84,"./lookup_service/LookupServiceTimeout":85,"./lookup_service/LookupServiceTransform":86,"./query_cache/QueryCacheBindingHashSingle":87,"./query_cache/QueryCacheNodeFactory":88,"./query_cache/QueryCacheNodeFactoryImpl":89,"./query_execution/QueryExecution":90,"./query_execution/QueryExecutionCache":91,"./query_execution/QueryExecutionDelegate":92,"./query_execution/QueryExecutionHttp":93,"./query_execution/QueryExecutionPageExpand":94,"./query_execution/QueryExecutionPaginate":95,"./result_set/ResultSet":96,"./result_set/ResultSetArrayIteratorBinding":97,"./result_set/ResultSetHashJoin":98,"./sparql_service/SparqlService":99,"./sparql_service/SparqlServiceBaseString":100,"./sparql_service/SparqlServiceCache":101,"./sparql_service/SparqlServiceConsoleLog":102,"./sparql_service/SparqlServiceFactory":103,"./sparql_service/SparqlServiceFactoryConst":104,"./sparql_service/SparqlServiceFactoryDefault":105,"./sparql_service/SparqlServiceHttp":106,"./sparql_service/SparqlServicePageExpand":107,"./sparql_service/SparqlServicePaginate":108,"./sparql_service/SparqlServiceVirtFix":109,"./table_service/TableService":110,"./table_service/TableServiceDelegateBase":111,"./table_service/TableServiceFacet":112,"./table_service/TableServiceNodeLabels":113,"./table_service/TableServiceQuery":114}],71:[function(require,module,exports){
var Class=require("../../ext/Class"),ListService=Class.create({fetchItems:function(){throw console.log("Not implemented"),"Not implemented"},fetchCount:function(){throw console.log("Not implemented"),"Not implemented"}});module.exports=ListService;
},{"../../ext/Class":2}],72:[function(require,module,exports){
var Class=require("../../ext/Class"),ServiceUtils=require("../ServiceUtils"),ListService=require("./ListService"),ListServiceConcept=Class.create(ListService,{initialize:function(e){this.sparqlService=e},fetchItems:function(e,i,t){var r=ServiceUtils.fetchItemsConcept(this.sparqlService,e,i,t);return r},fetchCount:function(e,i,t){var r=ServiceUtils.fetchCountConcept(this.sparqlService,e,i,t);return r}});module.exports=ListServiceConcept;
},{"../../ext/Class":2,"../ServiceUtils":65,"./ListService":71}],73:[function(require,module,exports){
var values=require("lodash.values"),Class=require("../../ext/Class"),ListService=require("./ListService"),ServiceUtils=require("../ServiceUtils"),shared=require("../../util/shared"),Promise=shared.Promise,ConceptUtils=require("../../sparql/ConceptUtils"),ListServiceConceptKeyLookup=Class.create(ListService,{initialize:function(e,t,i){this.keyListService=e,this.keyLookupService=t,this.isLeftJoin=null==i?!0:i},fetchItems:Promise.method(function(e,t,i){var r=this,s=this.keyListService.fetchItems(e,t,i).then(function(e){return r.keyLookupService.lookup(e)}).then(function(e){var t=e.entries(),i=values(t);return i});return s}),fetchCount:Promise.method(function(e,t,i){var r;if(this.isLeftJoin)r=this.keyListService.fetchCount(e,t,i);else{var s=this;r=this.keyListService.fetchItems(e,t).then(function(e){return s.keyLookupService.lookup(e)}).then(function(e){var i=e.keyList(),r=i.length,s={count:r,hasMoreItems:null==t?!1:null};return s})}return r})});module.exports=ListServiceConceptKeyLookup;
},{"../../ext/Class":2,"../../sparql/ConceptUtils":118,"../../util/shared":242,"../ServiceUtils":65,"./ListService":71,"lodash.values":465}],74:[function(require,module,exports){
var Class=require("../../ext/Class"),PageExpandUtils=require("../PageExpandUtils"),ListService=require("./ListService"),ListServicePageExpand=Class.create(ListService,{initialize:function(e,i){this.listService=e,this.pageSize=i},fetchItems:function(e,i,t){var s=PageExpandUtils.computeRange(i,t,this.pageSize),r=this.listService.fetchItems(e,s.limit,s.offset),a=r.then(function(e){var i=s.subLimit?s.subOffset+s.subLimit:e.length,t=e.slice(s.subOffset,i);return t});return a},fetchCount:function(e,i,t){var s=this.listService.fetchCount(e,i,t);return s}});module.exports=ListServicePageExpand;
},{"../../ext/Class":2,"../PageExpandUtils":60,"./ListService":71}],75:[function(require,module,exports){
var Class=require("../../ext/Class"),values=require("lodash.values"),shared=require("../../util/shared"),Promise=shared.Promise,Concept=require("../../sparql/Concept"),ConceptUtils=require("../../sparql/ConceptUtils"),ServiceUtils=require("../ServiceUtils"),ResultSetUtils=require("../ResultSetUtils"),ListService=require("./ListService"),ListServiceSparqlQuery=Class.create(ListService,{initialize:function(e,t,r,i){if(t.getLimit()||t.getOffset())throw console.log("Limit and offset in attribute queries not yet supported"),"Limit and offset in attribute queries not yet supported";this.sparqlService=e,this.attrQuery=t,this.attrVar=r,this.isLeftJoin=null==i?!0:i},fetchItems:function(e,t,r){var i=this.attrVar,s=ConceptUtils.createAttrQuery(this.attrQuery,i,this.isLeftJoin,e,t,r),a=this.sparqlService.createQueryExecution(s),u=a.execSelect().then(function(e){var t=ResultSetUtils.partition(e,i),r=t.entries(),s=values(r);return s});return u},fetchCount:function(e,t,r){var i;if(this.isLeftJoin){var s=ConceptUtils.createAttrQuery(this.attrQuery,this.attrVar,this.isLeftJoin,e,t,null);i=new Concept(s.getQueryPattern(),this.attrVar)}else i=e;var a=ServiceUtils.fetchCountConcept(this.sparqlService,i,t,r);return a}});module.exports=ListServiceSparqlQuery;
},{"../../ext/Class":2,"../../sparql/Concept":117,"../../sparql/ConceptUtils":118,"../../util/shared":242,"../ResultSetUtils":64,"../ServiceUtils":65,"./ListService":71,"lodash.values":465}],76:[function(require,module,exports){
var Class=require("../../ext/Class"),ListService=require("./ListService"),ListServiceTransformConcept=Class.create(ListService,{initialize:function(e,t){this.listService=e,this.fnTransformConcept=t},fetchItems:function(e,t,i){var r=this.fnTransformConcept(e),s=this.listService.fetchItems(r,t,i);return s},fetchCount:function(e,t,i){var r=this.fnTransformConcept(e),s=this.listService.fetchCount(r,t,i);return s}});module.exports=ListServiceTransformConcept;
},{"../../ext/Class":2,"./ListService":71}],77:[function(require,module,exports){
var Class=require("../../ext/Class"),LookupService=Class.create({getIdStr:function(){throw console.log("Not overridden"),"Not overridden"},lookup:function(){throw console.log("Not overridden"),"Not overridden"}});module.exports=LookupService;
},{"../../ext/Class":2}],78:[function(require,module,exports){
var Class=require("../../ext/Class"),LookupService=require("./LookupService"),LookupServiceBase=Class.create(LookupService,{getIdStr:function(e){var r=e.toString();return r}});module.exports=LookupServiceBase;
},{"../../ext/Class":2,"./LookupService":77}],79:[function(require,module,exports){
var Class=require("../../ext/Class"),_uniq=require("lodash.uniq"),LookupServiceDelegateBase=require("./LookupServiceDelegateBase"),RequestCache=require("../RequestCache"),HashMap=require("../../util/collection/HashMap"),shared=require("../../util/shared"),Promise=shared.Promise,LookupServiceCache=Class.create(LookupServiceDelegateBase,{initialize:function(e,t,r){e(t),this.requestCache=r||new RequestCache},lookup:function(e){var t=this,r=_uniq(e,!1,function(e){var r=t.getIdStr(e);return r}),a=new HashMap,u=this.requestCache.getResultCache(),i=this.requestCache.getExecutionCache(),n=[],s=[],h=[];if(r.forEach(function(e){var r=t.getIdStr(e),c=u.getItem(r);if(c)a.put(e,c);else{var o=i[r];if(o){s.push(e);var l=h.find(function(e){var t=e===o;return t});l||h.push(o)}else n.push(e),s.push(e)}}),n.length>0){var c=this.fetchAndCache(n);h.push(c)}var o=Promise.all(h).then(function(){var e=arguments;return s.forEach(function(t){var r=null;e.find(function(e){return r=e.get(t),Boolean(r)}),r&&a.put(t,r)}),a});return o},fetchAndCache:function(e){var t=this.requestCache.getResultCache(),r=this.requestCache.getExecutionCache(),a=this,u=this.delegate.lookup(e),i=u.then(function(u){var i=new HashMap;return e.forEach(function(e){var r=a.getIdStr(e),n=u.get(e);t.setItem(r,n),i.put(e,n)}),e.forEach(function(e){var t=a.getIdStr(e);delete r[t]}),i});return e.forEach(function(e){var t=a.getIdStr(e);r[t]=i}),i}});module.exports=LookupServiceCache;
},{"../../ext/Class":2,"../../util/collection/HashMap":233,"../../util/shared":242,"../RequestCache":62,"./LookupServiceDelegateBase":82,"lodash.uniq":410}],80:[function(require,module,exports){
var Class=require("../../ext/Class"),uniq=require("lodash.uniq"),ArrayUtils=require("../../util/ArrayUtils"),HashMap=require("../../util/collection/HashMap"),LookupServiceDelegateBase=require("./LookupServiceDelegateBase"),shared=require("../../util/shared"),Promise=shared.Promise,LookupServiceChunker=Class.create(LookupServiceDelegateBase,{initialize:function(e,r,i){e(r),this.maxChunkSize=i},lookup:function(e){var r=this,i=uniq(e,!1,function(e){var i=r.getIdStr(e);return i}),u=ArrayUtils.chunk(i,this.maxChunkSize),a=u.map(function(e){var i=r.delegate.lookup(e);return i}),t=Promise.app(a).then(function(){var e=new HashMap;return arguments.forEach(function(r){e.putAll(r)}),e});return t}});module.exports=LookupServiceChunker;
},{"../../ext/Class":2,"../../util/ArrayUtils":219,"../../util/collection/HashMap":233,"../../util/shared":242,"./LookupServiceDelegateBase":82,"lodash.uniq":410}],81:[function(require,module,exports){
var Class=require("../../ext/Class"),LookupServiceBase=require("./LookupServiceBase"),HashMap=require("../../util/collection/HashMap"),shared=require("../../util/shared"),Promise=shared.Promise,LookupServiceConst=Class.create(LookupServiceBase,{initialize:function(e){this.data=e},lookup:function(e){var r=new HashMap,o=this;e.forEach(function(e){r.put(e,o.data)});var a=Promise.resolve(r);return a}});module.exports=LookupServiceConst;
},{"../../ext/Class":2,"../../util/collection/HashMap":233,"../../util/shared":242,"./LookupServiceBase":78}],82:[function(require,module,exports){
var Class=require("../../ext/Class"),LookupService=require("./LookupService"),LookupServiceDelegateBase=Class.create(LookupService,{initialize:function(e){this.delegate=e},getIdStr:function(e){var r=this.delegate.getIdStr(e);return r}});module.exports=LookupServiceDelegateBase;
},{"../../ext/Class":2,"./LookupService":77}],83:[function(require,module,exports){
var Class=require("../../ext/Class"),LookupServiceDelegateBase=require("./LookupServiceDelegateBase"),LookupServiceIdFilter=Class.create(LookupServiceDelegateBase,{initialize:function(e,i,r){e(i),this.predicateFn=r},lookup:function(e){var i=e.filter(this.predicateFn),r=this.delegate.lookup(i);return r}});module.exports=LookupServiceIdFilter;
},{"../../ext/Class":2,"./LookupServiceDelegateBase":82}],84:[function(require,module,exports){
var Class=require("../../ext/Class"),shared=require("../../util/shared"),Promise=shared.Promise,HashMap=require("../../util/collection/HashMap"),ExprVar=require("../../sparql/expr/ExprVar"),E_OneOf=require("../../sparql/expr/E_OneOf"),ElementFilter=require("../../sparql/element/ElementFilter"),ElementGroup=require("../../sparql/element/ElementGroup"),ResultSetUtils=require("../ResultSetUtils"),LookupServiceBase=require("./LookupServiceBase"),LookupServiceSparqlQuery=Class.create(LookupServiceBase,{initialize:function(e,r,t){this.sparqlService=e,this.query=r,this.v=t},lookup:Promise.method(function(e){var r,t=this.v;if(0===e.length)r=Promise.resolve(new HashMap);else{var i=this.query.clone(),s=new ElementFilter(new E_OneOf(new ExprVar(t),e)),l=new ElementGroup([i.getQueryPattern(),s]);i.setQueryPattern(l);var a=this.sparqlService.createQueryExecution(i);r=a.execSelect().then(function(e){var r=ResultSetUtils.partition(e,t);return r})}return r})});module.exports=LookupServiceSparqlQuery;
},{"../../ext/Class":2,"../../sparql/element/ElementFilter":141,"../../sparql/element/ElementGroup":142,"../../sparql/expr/E_OneOf":165,"../../sparql/expr/ExprVar":176,"../../util/collection/HashMap":233,"../../util/shared":242,"../ResultSetUtils":64,"./LookupServiceBase":78}],85:[function(require,module,exports){
var Class=require("../../ext/Class"),LookupServiceDelegateBase=require("./LookupServiceDelegateBase"),HashMap=require("../../util/collection/HashMap"),shared=require("../../util/shared"),Promise=shared.Promise,defer=function(){var e,r,t=new Promise(function(){e=arguments[0],r=arguments[1]});return{resolve:e,reject:r,promise:t}},LookupServiceTimeout=Class.create(LookupServiceDelegateBase,{initialize:function(e,r,t,i){e(r),this.delayInMs=t,this.maxRefreshCount=i||0,this.idStrToId={},this.currentDeferred=null,this.currentPromise=null,this.currentTimer=null,this.currentRefreshCount=0},getIdStr:function(e){var r=this.delegate.getIdStr(e);return r},lookup:function(e){this.currentDeferred||(this.currentDeferred=defer(),this.currentPromise=this.currentDeferred.promise());var r=this;e.forEach(function(e){var t=r.getIdStr(e),i=r.idStrToId[t];i||(r.idStrToId[t]=e)}),this.currentTimer||this.startTimer();var t=this.currentPromise.then(function(r){var t=new HashMap;return e.forEach(function(e){var i=r.get(e);t.put(e,i)}),t});return t},startTimer:function(){var e=this,r=this.currentRefreshCount,t=e.currentDeferred;this.currentTimer=setTimeout(function(){if(e.maxRefreshCount<0||r<e.maxRefreshCount)return++e.currentRefreshCount,void e.startTimer();var i=[];for(var n in e.idStrToId)i.push(e.idStrToId[n]);e.idStrToId={},e.currentRefreshCount=0,e.currentDeferred=null,e.currentTimer=null,e.delegate.lookup(i).then(function(e){t.resolve(e)})},this.delayInMs)}});module.exports=LookupServiceTimeout;
},{"../../ext/Class":2,"../../util/collection/HashMap":233,"../../util/shared":242,"./LookupServiceDelegateBase":82}],86:[function(require,module,exports){
var Class=require("../../ext/Class"),LookupServiceDelegateBase=require("./LookupServiceDelegateBase"),LookupServiceTransform=Class.create(LookupServiceDelegateBase,{initialize:function(e,r,o){e(r),this.fnTransform=o},lookup:function(e){var r=this.fnTransform,o=this.delegate.lookup(e).then(function(o){return e.forEach(function(e){var a=o.get(e),t=r(a,e);o.put(e,t)}),o});return o}});module.exports=LookupServiceTransform;
},{"../../ext/Class":2,"./LookupServiceDelegateBase":82}],87:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprEvaluatorImpl=require("../../sparql/ExprEvaluatorImpl"),IteratorArray=require("../../util/collection/IteratorArray"),ResultSetArrayIteratorBinding=require("../result_set/ResultSetArrayIteratorBinding"),E_OneOf=require("../../sparql/expr/E_OneOf"),ElementFilter=require("../../sparql/element/ElementFilter"),shared=require("../../util/shared"),Promise=shared.Promise,QueryCacheBindingHashSingle=Class.create({initialize:function(e,r,t){this.sparqlService=e,this.query=r,this.indexExpr=t,this.maxChunkSize=50,this.exprEvaluator=new ExprEvaluatorImpl,this.nodeToBindings={},this.nodeMisses={}},fetchResultSet:function(e){var r=this,t=this.nodeToBindings,n=this.analyze(e),a=[];n.cachedNodes.forEach(function(e){var r=t.getItem(e.toString());a.push.apply(a,r)});var i=n.nonCachedChunks.map(function(e){var t=r.fetchChunk(e);return t}),s=Promise.all(i),u=this.exprEvaluator,h=this.indexExpr;return s.then(function(){for(var e={},r=0;r<arguments.length;++r)for(var n=arguments[r];n.hasNext();){var i=n.nextBinding();a.push(i);var s=u.eval(h,i),l=s.toString();e[l]=s;var o=t.getItem(l);null==o&&(o=[],t.setItem(l,o)),o.push(i)}var c=new IteratorArray(a),d=new ResultSetArrayIteratorBinding(c);return d})},fetchChunk:function(e){var r=this.query.clone(),t=new E_OneOf(this.indexExpr,e),n=new ElementFilter([t]);r.getElements().push(n);var a=this.sparqlService.createQueryExecution(r),i=a.execSelect();return i},analyze:function(e){var r=this.nodeToBindings,t=[],n=[];e.forEach(function(e){var a=r.getItem(e.toString());null==a?n.push(e):t.push(e)});for(var a=this.maxChunkSize,i=[],s=0;s<n.length;s+=a){var u=e.slice(s,s+a);i.push(u)}var h={cachedNodes:t,nonCachedNodes:n,nonCachedChunks:i,maxChunkSize:a};return h}});module.exports=QueryCacheBindingHashSingle;
},{"../../ext/Class":2,"../../sparql/ExprEvaluatorImpl":122,"../../sparql/element/ElementFilter":141,"../../sparql/expr/E_OneOf":165,"../../util/collection/IteratorArray":237,"../../util/shared":242,"../result_set/ResultSetArrayIteratorBinding":97}],88:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryCacheNodeFactory=Class.create({createQueryCache:function(){throw"Not overridden"}});module.exports=QueryCacheNodeFactory;
},{"../../ext/Class":2}],89:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryCacheNodeFactory=require("./QueryCacheNodeFactory"),QueryCacheBindingHashSingle=require("./QueryCacheBindingHashSingle"),QueryCacheNodeFactoryImpl=Class.create(QueryCacheNodeFactory,{initialize:function(){this.keyToCache={}},createQueryCache:function(e,a,r){var c="cache:/"+e.getServiceId()+"/"+e.getServiceState()+"/"+a+"/"+r;console.log("cache requested with id: "+c);var i=this.keyToCache.getItem(c);return null==i&&(i=new QueryCacheBindingHashSingle(e,a,r),this.keyToCache.addItem(c,i)),i}});module.exports=QueryCacheNodeFactoryImpl;
},{"../../ext/Class":2,"./QueryCacheBindingHashSingle":87,"./QueryCacheNodeFactory":88}],90:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryExecution=Class.create({execSelect:function(){throw"Not overridden"},execAsk:function(){throw"Not overridden"},execDescribeTriples:function(){throw"Not overridden"},execConstructTriples:function(){throw"Not overridden"},setTimeout:function(){throw"Not overridden"}});module.exports=QueryExecution;
},{"../../ext/Class":2}],91:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryExecution=require("./QueryExecution"),IteratorArray=require("../../util/collection/IteratorArray"),ResultSetArrayIteratorBinding=require("../result_set/ResultSetArrayIteratorBinding"),shared=require("../../util/shared"),Promise=shared.Promise,QueryExecutionCache=Class.create(QueryExecution,{initialize:function(e,t,r){this.queryExecution=e,this.cacheKey=t,this.requestCache=r},createResultSetFromCacheData:function(e){var t=new IteratorArray(e.bindings),r=e.varNames,i=new ResultSetArrayIteratorBinding(t,r);return i},setTimeout:function(e){this.queryExecution.setTimeout(e)},execSelect:function(){var e=this.cacheKey,t=this.requestCache,r=t.getResultCache(),i=t.getExecutionCache(),a=i[e];if(a)console.log("[INFO] Joined query execution for: "+e);else{var n=r.getItem(e);if(n)a=Promise.resolve(n);else{var u=this.queryExecution.execSelect(),s=u.then(function(e){var t={bindings:e.getBindings(),varNames:e.getVarNames()};return t}),o=!1;a=s.then(function(t){return o=!0,delete i[e],r.setItem(e,t),t}),o||(i[e]=a)}}var c=this,l=a.then(function(e){var t=c.createResultSetFromCacheData(e);return Promise.resolve(t)});return l}});module.exports=QueryExecutionCache;
},{"../../ext/Class":2,"../../util/collection/IteratorArray":237,"../../util/shared":242,"../result_set/ResultSetArrayIteratorBinding":97,"./QueryExecution":90}],92:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryExecution=require("./QueryExecution"),QueryExecutionDelegate=Class.create(QueryExecution,{initialize:function(e,t){this.sparqlService=e,this.query=t,this.timeout=null},setTimeout:function(e){this.timeout=e},createQueryExecution:function(){var e=this.sparqlService.createQueryExecution(this.query);return e.setTimeout(this.timeout),e},execSelect:function(){var e=this.createQueryExecution().execSelect(this.query);return e},execAsk:function(){var e=this.createQueryExecution().execAsk(this.query);return e}});module.exports=QueryExecutionDelegate;
},{"../../ext/Class":2,"./QueryExecution":90}],93:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryExecution=require("./QueryExecution"),ResultSetUtils=require("../ResultSetUtils"),AjaxUtils=require("../AjaxUtils"),shared=require("../../util/shared"),ajax=shared.ajax,Promise=shared.Promise,QueryExecutionHttp=Class.create(QueryExecution,{initialize:function(e,t,i,r,s){this.queryString=e,this.serviceUri=t,this.defaultGraphUris=i,this.ajaxOptions=r||{},this.httpArgs=s},execSelect:function(){var e=this.execAny().then(function(e){var t=ResultSetUtils.jsonToResultSet(e);return Promise.resolve(t)});return e},execAsk:function(){var e=this.execAny().then(function(e){return e.boolean});return e},execConstructTriples:function(){throw"Not implemented yet"},execDescribeTriples:function(){throw"Not implemented yet"},setTimeout:function(e){this.ajaxOptions.timeout=e},getTimeout:function(){return this.ajaxOptions.timeout},execAny:function(){var e=AjaxUtils.createSparqlRequestAjaxSpec(this.serviceUri,this.defaultGraphUris,this.queryString,this.httpArgs,this.ajaxOptions),t=ajax(e);return t}});module.exports=QueryExecutionHttp;
},{"../../ext/Class":2,"../../util/shared":242,"../AjaxUtils":57,"../ResultSetUtils":64,"./QueryExecution":90}],94:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryExecutionDelegate=require("./QueryExecutionDelegate"),PageExpandUtils=require("../PageExpandUtils"),IteratorArray=require("../../util/collection/IteratorArray"),ResultSetArrayIteratorBinding=require("../result_set/ResultSetArrayIteratorBinding"),QueryExecutionPageExpand=Class.create(QueryExecutionDelegate,{initialize:function(e,t,r,i){e(t,r),this.pageSize=i},execSelect:function(){var e=this.query.clone(),t=PageExpandUtils.computeRange(e.getLimit(),e.getOffset(),this.pageSize);e.setLimit(t.limit),e.setOffset(t.offset);var r=this.createQueryExecution(e),i=r.execSelect(),a=i.then(function(e){var r=e.getIterator().getArray(),i=t.subLimit?t.subOffset+t.subLimit:r.length,a=r.slice(t.subOffset,i),u=e.getVarNames(),n=new IteratorArray(a),s=new ResultSetArrayIteratorBinding(n,u);return s});return a}});module.exports=QueryExecutionPageExpand;
},{"../../ext/Class":2,"../../util/collection/IteratorArray":237,"../PageExpandUtils":60,"../result_set/ResultSetArrayIteratorBinding":97,"./QueryExecutionDelegate":92}],95:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryExecution=require("./QueryExecution"),QueryPaginator=require("../QueryPaginator"),IteratorArray=require("../../util/collection/IteratorArray"),ResultSetArrayIteratorBinding=require("../result_set/ResultSetArrayIteratorBinding"),shared=require("../../util/shared"),Promise=shared.Promise,QueryExecutionPaginate=Class.create(QueryExecution,{initialize:function(e,t,r){this.defaultPageSize=1e3,this.sparqlService=e,this.query=t,this.pageSize=r,this.timeoutInMillis=null},executeSelectRec:function(e,t){var r=e.next();if(!r)return t;var i=this,a=this.sparqlService.createQueryExecution(r);a.setTimeout(this.timeoutInMillis);var u=a.execSelect().then(function(a){if(!a)throw"Null result set for query: "+r;var n;if(t){var o=t.getIterator().getArray(),s=a.getIterator().getArray(),l=o.concat(s),c=new IteratorArray(l);n=Promise.resolve(new ResultSetArrayIteratorBinding(c))}else n=Promise.resolve(a);var g=a.getIterator().getArray().length,y=e.getPageSize(),h=0===g||y>g;return h||(n=i.executeSelectRec(e,u)),n});return u},execSelect:function(){var e=this.query.clone(),t=this.pageSize||QueryExecutionPaginate.defaultPageSize,r=new QueryPaginator(e,t);return this.executeSelectRec(r,null)},setTimeout:function(e){this.timeoutInMillis=e,this.timeoutMsgShown||(console.log("[WARN] Only preliminary timeout implementation for paginated query execution."),this.timeoutMsgShown=!0)}});module.exports=QueryExecutionPaginate;
},{"../../ext/Class":2,"../../util/collection/IteratorArray":237,"../../util/shared":242,"../QueryPaginator":61,"../result_set/ResultSetArrayIteratorBinding":97,"./QueryExecution":90}],96:[function(require,module,exports){
var Class=require("../../ext/Class"),Iterator=require("../../util/collection/Iterator"),ResultSet=Class.create(Iterator,{getVarNames:function(){throw"Override me"}});module.exports=ResultSet;
},{"../../ext/Class":2,"../../util/collection/Iterator":235}],97:[function(require,module,exports){
var Class=require("../../ext/Class"),ResultSet=require("./ResultSet"),ResultSetArrayIteratorBinding=Class.create(ResultSet,{initialize:function(t,i){this.itBinding=t,this.varNames=i},hasNext:function(){return this.itBinding.hasNext()},next:function(){return this.nextBinding()},nextBinding:function(){return this.itBinding.next()},getVarNames:function(){return this.varNames},getBindings:function(){return this.itBinding.getArray()},getIterator:function(){return this.itBinding}});module.exports=ResultSetArrayIteratorBinding;
},{"../../ext/Class":2,"./ResultSet":96}],98:[function(require,module,exports){
var Class=require("../../ext/Class"),IteratorAbstract=require("../../util/collection/IteratorAbstract"),ResultSetHashJoin=Class.create(IteratorAbstract,{initialize:function(t,e,r,s){this.rsA=t,this.serviceB=e,this.elementB=r,this.expr=s,t.getVarsMentioned(),s.getVarsMentioned()},$prefetch:function(){}});module.exports=ResultSetHashJoin;
},{"../../ext/Class":2,"../../util/collection/IteratorAbstract":236}],99:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlService=Class.create({getServiceId:function(){throw console.log("[ERROR] Method not overridden"),"[ERROR] Method not overridden"},getStateHash:function(){throw console.log("[ERROR] Method not overridden"),"[ERROR] Method not overridden"},createQueryExecution:function(){throw console.log("[ERROR] Method not overridden"),"[ERROR] Method not overridden"}});module.exports=SparqlService;
},{"../../ext/Class":2}],100:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlService=require("./SparqlService"),SparqlServiceBaseString=Class.create(SparqlService,{createQueryExecution:function(e){var r;return r="[object String]"===Object.toString(e)?this.createQueryExecutionStr(e):this.createQueryExecutionObj(e)},createQueryExecutionObj:function(e){var r=e.toString(),t=this.createQueryExecutionStr(r);return t},createQueryExecutionStr:function(){throw"Not implemented"}});module.exports=SparqlServiceBaseString;
},{"../../ext/Class":2,"./SparqlService":99}],101:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlServiceBaseString=require("./SparqlServiceBaseString"),RequestCache=require("../RequestCache"),QueryExecutionCache=require("../query_execution/QueryExecutionCache"),SparqlServiceCache=Class.create(SparqlServiceBaseString,{initialize:function(e){this.qef=e,this.requestCache=new RequestCache},getServiceId:function(){return this.qef.getServiceId()},getStateHash:function(){return this.qef.getStateHash()},hashCode:function(){return"cached:"+this.qef.hashCode()},createQueryExecutionStr:function(e){var t=this.qef.getServiceId(),r=this.qef.getStateHash(),i=t+"-"+r+e,a=this.qef.createQueryExecution(e),c=new QueryExecutionCache(a,i,this.requestCache);return c}});module.exports=SparqlServiceCache;
},{"../../ext/Class":2,"../RequestCache":62,"../query_execution/QueryExecutionCache":91,"./SparqlServiceBaseString":100}],102:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlService=require("./SparqlService"),SparqlServiceConsoleLog=Class.create(SparqlService,{initialize:function(e){this.sparqlService=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"console-log:"+this.sparqlService.hashCode()},createQueryExecution:function(e){console.log("SparqlServiceConsoleLog saw query: "+e);var r=this.sparqlService.createQueryExecution(e);return r}});module.exports=SparqlServiceConsoleLog;
},{"../../ext/Class":2,"./SparqlService":99}],103:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlServiceFactory=Class.create({createSparqlService:function(){throw"Not overridden"}});module.exports=SparqlServiceFactory;
},{"../../ext/Class":2}],104:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlServiceFactoryConst=Class.create({initialize:function(e){this.sparqlService=e},createSparqlService:function(){var e=this.sparqlService;if(null==e)throw console.log("[ERROR] Creation of a SPARQL service requested, but none was provided"),"Bailing out";return e},setSparqlService:function(e){this.sparqlService=e}});module.exports=SparqlServiceFactoryConst;
},{"../../ext/Class":2}],105:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlServiceHttp=require("./SparqlServiceHttp"),SparqlServiceCache=require("./SparqlServiceCache"),SparqlServiceFactoryDefault=Class.create({initialize:function(){this.hashToCache={}},createSparqlService:function(e,r){var a=new SparqlServiceHttp(e,r);a=new SparqlServiceCache(a);var t,c=a.getStateHash(),i=this.hashToCache[c];return i?t=i:(this.hashToCache[c]=a,t=a),t}});module.exports=SparqlServiceFactoryDefault;
},{"../../ext/Class":2,"./SparqlServiceCache":101,"./SparqlServiceHttp":106}],106:[function(require,module,exports){
var Class=require("../../ext/Class"),defaults=require("lodash.defaults"),SparqlServiceBaseString=require("./SparqlServiceBaseString"),QueryExecutionHttp=require("../query_execution/QueryExecutionHttp"),JSONCanonical=require("../../ext/JSONCanonical"),SparqlServiceHttp=Class.create(SparqlServiceBaseString,{initialize:function(t,e,r,i){this.serviceUri=t,this.defaultGraphUris=e,this.ajaxOptions=r,this.httpArgs=i},getServiceId:function(){return this.serviceUri},getStateHash:function(){var t=JSONCanonical.stringify(this.defaultGraphUris);return t+=JSONCanonical.stringify(this.httpArgs)},hashCode:function(){return this.getServiceId()+"/"+this.getStateHash()},setDefaultGraphs:function(t){this.defaultGraphUris=t},getDefaultGraphs:function(){return this.defaultGraphUris},createQueryExecutionStr:function(t){var e=defaults({},this.ajaxOptions),r=new QueryExecutionHttp(t,this.serviceUri,this.defaultGraphUris,e,this.httpArgs);return r},createQueryExecutionObj:function(t,e){if(e.flatten){var r=e;e=r.flatten()}var i=t(e);return i}});module.exports=SparqlServiceHttp;
},{"../../ext/Class":2,"../../ext/JSONCanonical":3,"../query_execution/QueryExecutionHttp":93,"./SparqlServiceBaseString":100,"lodash.defaults":249}],107:[function(require,module,exports){
var Class=require("../../ext/Class"),QueryExecutionPageExpand=require("../query_execution/QueryExecutionPageExpand"),SparqlService=require("./SparqlService"),SparqlServicePageExpand=Class.create(SparqlService,{initialize:function(e,r){this.sparqlService=e,this.pageSize=r},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"page-expand:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var r=new QueryExecutionPageExpand(this.sparqlService,e,this.pageSize);return r}});module.exports=SparqlServicePageExpand;
},{"../../ext/Class":2,"../query_execution/QueryExecutionPageExpand":94,"./SparqlService":99}],108:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlService=require("./SparqlService"),QueryExecutionPaginate=require("../query_execution/QueryExecutionPaginate"),SparqlServicePaginate=Class.create(SparqlService,{initialize:function(e,i){this.defaultPageSize=1e3,this.sparqlService=e,this.pageSize=i},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"paginate:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var i=new QueryExecutionPaginate(this.sparqlService,e,this.pageSize);return i}});module.exports=SparqlServicePaginate;
},{"../../ext/Class":2,"../query_execution/QueryExecutionPaginate":95,"./SparqlService":99}],109:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlService=require("./SparqlService"),E_Count=require("../../sparql/expr/E_Count"),Query=require("../../sparql/Query"),ElementSubQuery=require("../../sparql/element/ElementSubQuery"),SparqlServiceVirtFix=Class.create(SparqlService,{initialize:function(e){this.sparqlService=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"virtfix:"+this.sparqlService.hashCode()},hasAggregate:function(e){var r=e.getProject().entries(),t=r.some(function(e){var r=e.expr;return r instanceof E_Count?!0:void 0});return t},createQueryExecution:function(e){var r=e.getOrderBy(),t=e.getLimit(),i=e.getOffset(),n=null!=i&&null==t,u=this.hasAggregate(e),s=r.length>0&&(t||i)||u,a=n||s,l=a?e.clone():e;if(n&&(t=2e9,l.setLimit(t)),s){var c=l;c.setLimit(null),c.setOffset(null);var S=new ElementSubQuery(c);l=new Query,l.setQueryPattern(S),l.setLimit(t),l.setOffset(i),l.setQueryResultStar(!0)}var o=this.sparqlService.createQueryExecution(l);return o}});module.exports=SparqlServiceVirtFix;
},{"../../ext/Class":2,"../../sparql/Query":131,"../../sparql/element/ElementSubQuery":144,"../../sparql/expr/E_Count":153,"./SparqlService":99}],110:[function(require,module,exports){
var Class=require("../../ext/Class"),TableService=Class.create({fetchSchema:function(){throw console.log("Implement me"),"Implement me"},fetchCount:function(){throw console.log("Implement me"),"Implement me"},fetchData:function(){throw console.log("Implement me"),"Implement me"}});module.exports=TableService;
},{"../../ext/Class":2}],111:[function(require,module,exports){
var Class=require("../../ext/Class"),TableService=require("./TableService"),TableServiceDelegateBase=Class.create(TableService,{initialize:function(e){this.delegate=e},fetchSchema:function(){var e=this.delegate.fetchSchema();return e},fetchCount:function(){var e=this.delegate.fetchCount();return e},fetchData:function(){var e=this.delegate.fetchData();return e}});module.exports=TableServiceDelegateBase;
},{"../../ext/Class":2,"./TableService":110}],112:[function(require,module,exports){
var Class=require("../../ext/Class"),TableServiceNodeLabels=require("./TableServiceNodeLabels"),TableServiceUtils=require("../TableServiceUtils"),TableServiceFacet=Class.create(TableServiceNodeLabels,{initialize:function(e,a,i,l,t){e(a,l),this.tableConfigFacet=i,this.lookupServicePathLabels=t},fetchSchema:function(){var e=TableServiceUtils.fetchSchemaTableConfigFacet(this.tableConfigFacet,this.lookupServicePathLabels);return e}});module.exports=TableServiceFacet;
},{"../../ext/Class":2,"../TableServiceUtils":66,"./TableServiceNodeLabels":113}],113:[function(require,module,exports){
var Class=require("../../ext/Class"),TableServiceDelegateBase=require("./TableServiceDelegateBase"),TableServiceUtils=require("../TableServiceUtils"),TableServiceNodeLabels=Class.create(TableServiceDelegateBase,{initialize:function(e,a,l){e(a),this.lookupServiceNodeLabels=l},fetchData:function(e,a){var l=this.delegate.fetchData(e,a),r=this,i=l.then(function(e){var a=TableServiceUtils.transformToNodeLabels(r.lookupServiceNodeLabels,e);return a});return i}});module.exports=TableServiceNodeLabels;
},{"../../ext/Class":2,"../TableServiceUtils":66,"./TableServiceDelegateBase":111}],114:[function(require,module,exports){
var Class=require("../../ext/Class"),TableService=require("./TableService"),TableServiceUtils=require("../TableServiceUtils"),shared=require("../../util/shared"),Promise=shared.Promise,TableServiceQuery=Class.create(TableService,{initialize:function(e,i,r,t){this.sparqlService=e,this.query=i,this.timeoutInMillis=r||3e3,this.secondaryCountLimit=t||1e3},fetchSchema:function(){var e={colDefs:TableServiceUtils.createNgGridOptionsFromQuery(this.query)};return new Promise(function(i){i(e)})},fetchCount:function(){var e=TableServiceUtils.fetchCount(this.sparqlService,this.query,this.timeoutInMillis,this.secondaryCountLimit);return e},fetchData:function(e,i){var r=TableServiceUtils.fetchData(this.sparqlService,this.query,e,i);return r}});module.exports=TableServiceQuery;
},{"../../ext/Class":2,"../../util/shared":242,"../TableServiceUtils":66,"./TableService":110}],115:[function(require,module,exports){
var Class=require("../ext/Class"),rdfs=require("../vocab/rdfs"),VarUtils=require("./VarUtils"),BestLabelConfig=Class.create({initialize:function(t,e,r,i,s){this.langs=t||["en",""],this.predicates=e||[rdfs.label],this.subjectVar=i||VarUtils.x,this.predicateVar=s||VarUtils.y,this.objectVar=r||VarUtils.z},getLangs:function(){return this.langs},getPredicates:function(){return this.predicates},getSubjectVar:function(){return this.subjectVar},getPredicateVar:function(){return this.predicateVar},getObjectVar:function(){return this.objectVar},toString:function(){var t=["BestLabelConfig",this.langs,this.predicates,this.subjectVar,this.predicateVar,this.objectVar].join(", ");return t}});module.exports=BestLabelConfig;
},{"../ext/Class":2,"../vocab/rdfs":246,"./VarUtils":138}],116:[function(require,module,exports){
var NodeFactory=require("../rdf/NodeFactory"),Var=require("../rdf/node/Var"),Binding=function(r){this.varNameToEntry=r?r:{}};Binding.create=function(r){var n={};for(var t in r){var a=r[t];n[t]={v:NodeFactory.createVar(t),node:a}}var e=new Binding(n);return e},Binding.fromTalisJson=function(r){var n={};for(var t in r){var a=r[t],e=NodeFactory.createFromTalisRdfJson(a);n[t]=e}var o=Binding.create(n);return o},Binding.prototype={put:function(r,n){this.varNameToEntry[r.getName()]={v:r,node:n}},get:function(r){if(!(r instanceof Var))throw"var not an instance of Var";var n=r.getName(),t=this.varNameToEntry[n],a=t?t.node:null;return a},entries:function(){var r=[];for(var n in this.varNameToEntry){var t=this.varNameToEntry[n];r.push(t)}var a=r.sort(function(r,n){return r.v.getName()>n.v.getName()?1:-1});return a},toString:function(){var r=this.entries(),n=r.map(function(r){return'"'+r.v.getName()+'": "'+r.node+'"'}),t="{"+n.join(", ")+"}";return t},getVars:function(){var r=[];for(var n in this.varNameToEntry){var t=this.varNameToEntry[n];r.push(t.v)}return r}},module.exports=Binding;
},{"../rdf/NodeFactory":31,"../rdf/node/Var":50}],117:[function(require,module,exports){
var Class=require("../ext/Class"),ElementUtils=require("./ElementUtils"),ElementGroup=require("./element/ElementGroup"),ElementTriplesBlock=require("./element/ElementTriplesBlock"),Concept=Class.create({classLabel:"jassa.sparql.Concept",initialize:function(e,t){this.element=e,this.variable=t},toJson:function(){var e={element:JSON.parse(JSON.stringify(this.element)),variable:this.variable};return e},getElement:function(){return this.element},getVarsMentioned:function(){var e=this.getElement().getVarsMentioned();return e},hasTriples:function(){var e=this.getElements(),t=ElementUtils.getElementsDirectTriples(e),n=t.length>0;return n},getElements:function(){var e;return e=this.element instanceof ElementGroup?this.element.elements:[this.element]},getVar:function(){return this.variable},getVariable:function(){return this.warningShown||(this.warningShown=!0),this.getVar()},toString:function(){return""+this.element+"; "+this.variable},isSubjectConcept:function(){var e=!1,t=this.variable,n=this.element;if(n instanceof ElementTriplesBlock){var i=n.triples;if(1===i.length){var r=i[0],l=r.getSubject(),s=r.getPredicate(),a=r.getObject();e=t.equals(l)&&s.isVariable()&&a.isVariable()}}return e},createOptimizedConcept:function(){var e=this.getElement(),t=e.flatten(),n=new Concept(t,this.variable);return n},getOptimizedElement:function(){return null}});Concept.createFromElements=function(e,t){var n;n=1==e.length?e[0]:new ElementGroup(e);var i=new Concept(n,t);return i},module.exports=Concept;
},{"../ext/Class":2,"./ElementUtils":120,"./element/ElementGroup":142,"./element/ElementTriplesBlock":145}],118:[function(require,module,exports){
var Node=require("../rdf/node/Node"),NodeFactory=require("../rdf/NodeFactory"),Triple=require("../rdf/Triple"),HashMap=require("../util/collection/HashMap"),rdf=require("./../vocab/rdf"),VarUtils=require("./VarUtils"),ElementUtils=require("./ElementUtils"),E_Count=require("./expr/E_Count"),ElementTriplesBlock=require("./element/ElementTriplesBlock"),ElementOptional=require("./element/ElementOptional"),ElementSubQuery=require("./element/ElementSubQuery"),ElementGroup=require("./element/ElementGroup"),QueryUtils=require("./QueryUtils"),Query=require("./Query"),Concept=require("./Concept"),ConceptUtils={createVarMap:function(e,t){var r=e.getElement(),n=t.getElement(),a=(e.getVar(),r.getVarsMentioned()),u=n.getVarsMentioned(),i=[e.getVar()],l=[t.getVar()],o=ElementUtils.createJoinVarMap(a,u,i,l);return o},createRenamedConcept:function(e,t){var r=this.createVarMap(e,t),n=e.getVar(),a=t.getElement(),u=ElementUtils.createRenamedElement(a,r),i=new Concept(u,n);return i},renameVars:function(e,t){var r=VarUtils.fnSubst(t),n=r(e.getVar()),a=e.getElement().copySubstitute(r),u=new Concept(a,n);return u},createCombinedConcept:function(e,t,r,n,a){var u=e.getVar(),i=t.getVar();if(!i.equals(u)){var l=new HashMap;l.put(i,u),t=this.renameVars(t,l)}var o;o=r?this.createRenamedConcept(e,t):t;var c,s=o.getElements(),p=e.getElement();if(s.length>0)if(o.isSubjectConcept())c=e.getElement();else{var m=[];n&&(p=new ElementOptional(e.getElement())),m.push(p),a&&(s=[new ElementSubQuery(o.asQuery())]),m.push.apply(m,s),c=new ElementGroup(m),c=c.flatten()}else c=p;var y=new Concept(c,u);return y},createSubjectConcept:function(e,t,r){e=e||VarUtils.s,t=t||VarUtils._p_,r=r||VarUtils._o_;var n=new ElementTriplesBlock([new Triple(e,t,r)]),a=new Concept(n,e);return a},createTypeConcept:function(e,t){var r=e instanceof Node?e:NodeFactory.createUri(e),n=t?t instanceof Node?t:NodeFactory.createVar(t):NodeFactory.createVar("s"),a=new Concept(new ElementTriplesBlock([new Triple(n,rdf.type,r)]),n);return a},createQueryList:function(e,t,r){var n=new Query;return n.setDistinct(!0),n.setLimit(t),n.setOffset(r),n.getProject().add(e.getVar()),n.setQueryPattern(e.getElement()),n},freshVar:function(e,t){t=t||"c";var r=e.getVarsMentioned(),n=VarUtils.createVarGen(t,r),a=n.next();return a},wrapAsSubQuery:function(e,t){var r=new ElementSubQuery(e),n=new Query;return n.setQuerySelectType(),n.getProject().add(t),n.setQueryPattern(r),n},createQueryCount:function(e,t,r,n){var a=this.createQueryList(e);null!=n&&(a.setDistinct(!1),a.setLimit(n),a=this.wrapAsSubQuery(a,e.getVar()),a.setDistinct(!0)),null!=r&&a.setLimit(r);var u=new ElementSubQuery(a),i=new Query;return i.setQuerySelectType(),i.getProject().add(t,new E_Count),i.setQueryPattern(u),i},isConceptQuery:function(e,t){var r=(e.isDistinct(),e.getProjectVars()),n=r&&1===r.length,a=n&&r[0].equals(t);return a},createAttrQuery:function(e,t,r,n,a,u){var i,l=new Concept(new ElementSubQuery(e),t),o=ConceptUtils.createRenamedConcept(l,n),c=null!=a||null!=u;if(c){var s;if(r)s=o;else{var p=new ElementGroup([e.getQueryPattern(),o.getElement()]);s=new Concept(p,t)}var m=ConceptUtils.createQueryList(s,a,u);i=new ElementSubQuery(m)}else i=o.getElement();var y,E=this.isConceptQuery(e,t),Q=E&&c&&!r;if(Q)y=i.getQuery();else{var g,d=e.clone(),f=d.getQueryPattern();g=!n||n.isSubjectConcept()?f:new ElementGroup(r?[i,new ElementOptional(f)]:[f,i]),d.setQueryPattern(g),y=d}return y}};module.exports=ConceptUtils;
},{"../rdf/NodeFactory":31,"../rdf/Triple":34,"../rdf/node/Node":43,"../util/collection/HashMap":233,"./../vocab/rdf":245,"./Concept":117,"./ElementUtils":120,"./Query":131,"./QueryUtils":133,"./VarUtils":138,"./element/ElementGroup":142,"./element/ElementOptional":143,"./element/ElementSubQuery":144,"./element/ElementTriplesBlock":145,"./expr/E_Count":153}],119:[function(require,module,exports){
var ElementHelpers={joinElements:function(e,n){var t=n.map(function(e){return e.toString()}),r=t.filter(function(e){return 0!==e.length});return r.join(e)}};module.exports=ElementHelpers;
},{}],120:[function(require,module,exports){
var uniq=require("lodash.uniq"),ElementTriplesBlock=require("./element/ElementTriplesBlock"),ElementFilter=require("./element/ElementFilter"),ElementGroup=require("./element/ElementGroup"),TripleUtils=require("./../rdf/TripleUtils"),VarUtils=require("./VarUtils"),GenSym=require("./GenSym"),GeneratorBlacklist=require("./GeneratorBlacklist"),HashBidiMap=require("../util/collection/HashBidiMap"),NodeFactory=require("../rdf/NodeFactory"),ElementUtils={createFilterElements:function(e){var r=e.map(function(e){var r=new ElementFilter(e);return r});return r},createElementsTriplesBlock:function(e){var r=[];if(e.length>0){var t=new ElementTriplesBlock(e);r.push(t)}return r},createDistinctVarMap:function(e,r,t){var n=e.map(VarUtils.getVarName);if(null==t){var i=new GenSym("v");t=new GeneratorBlacklist(i,n)}var l=new HashBidiMap;return r.forEach(function(e){var r,i=e.getName();if(-1!==n.indexOf(i)){var a=t.next();r=NodeFactory.createVar(a)}else r=e;l.put(e,r)}),l},createJoinVarMap:function(e,r,t,n,i){if(t.length!==n.length)throw console.log("[ERROR] Cannot join on different number of columns"),"Bailing out";for(var l=ElementUtils.createDistinctVarMap(e,r,i),a=0;a<t.length;++a){var o=t[a],u=n[a];l.put(u,o)}return l},createRenamedElement:function(e,r){var t=VarUtils.fnSubst(r),n=e.copySubstitute(t);return n},getElementsDirectTriples:function(e){for(var r=[],t=0;t<e.length;++t){var n=e[t];n instanceof ElementTriplesBlock&&r.push.apply(r,n.triples)}return r},freshVarGen:function(e,r){r=r||"v";var t=e.getVarsMentioned(),n=VarUtils.freshVarGen(r,t);return n}};module.exports=ElementUtils;
},{"../rdf/NodeFactory":31,"../util/collection/HashBidiMap":232,"./../rdf/TripleUtils":35,"./GenSym":125,"./GeneratorBlacklist":127,"./VarUtils":138,"./element/ElementFilter":141,"./element/ElementGroup":142,"./element/ElementTriplesBlock":145,"lodash.uniq":410}],121:[function(require,module,exports){
var Class=require("../ext/Class"),ExprEvaluator=Class.create({eval:function(){throw"Not overridden"}});module.exports=ExprEvaluator;
},{"../ext/Class":2}],122:[function(require,module,exports){
var Class=require("../ext/Class"),NodeValue=require("./expr/NodeValue"),ExprEvaluator=require("./ExprEvaluator"),ExprEvaluatorImpl=Class.create(ExprEvaluator,{eval:function(e,a){var r,t;if(e.isVar())t=e.getExprVar(),r=this.evalExprVar(t,a);else if(e.isFunction())t=e.getFunction(),r=this.evalExprFunction(t,a);else{if(!e.isConstant())throw"Unsupported expr type";t=e.getConstant(),r=this.evalConstant(t,a)}return r},evalExprVar:function(e,a){var r,t=e.asVar(),n=a.get(t);return null==n?NodeValue.nvNothing:r=NodeValue.makeNode(n)},evalExprFunction:function(){},evalNodeValue:function(){}});module.exports=ExprEvaluatorImpl;
},{"../ext/Class":2,"./ExprEvaluator":121,"./expr/NodeValue":177}],123:[function(require,module,exports){
var ExprHelpers={newBinaryExpr:function(n,r){if(2!==r.length)throw"Invalid argument";var e=r[0],t=r[1],i=new n(e,t);return i},newUnaryExpr:function(n,r){if(1!==r.length)throw"Invalid argument";var e=r[0],t=new n(e);return t},joinElements:function(n,r){var e=r.map(function(n){return n.toString()}),t=e.filter(function(n){return 0!==n.length});return t.join(n)}};module.exports=ExprHelpers;
},{}],124:[function(require,module,exports){
var ExprVar=require("./expr/ExprVar"),NodeValue=require("./expr/NodeValue"),E_Equals=require("./expr/E_Equals"),E_LogicalAnd=require("./expr/E_LogicalAnd"),E_LogicalOr=require("./expr/E_LogicalOr"),ExprUtils={copySubstitute:function(r,e){var n=function(r){var n=null;if(r.isVar()){var u=e.get(r);null!=u&&(n=u)}return null==n&&(n=r),n},u=r.copySubstitute(n);return u},bindingToExprs:function(r,e){null==e&&(e=r.getVars());var n=[];return e.forEach(function(e){var u=new ExprVar(e),i=r.get(e),t=NodeValue.makeNode(i),a=new E_Equals(u,t);n.push(a)}),n},opify:function(r,e){for(var n=r,u=[];n.length>1;){for(var i=0;i<n.length;i+=2){var t=n[i];if(i+1===n.length){u.push(t);break}var a=n[i+1],o=e(t,a);u.push(o)}n=u,u=[]}return n[0]},andify:function(r){var e=this.opify(r,function(r,e){return new E_LogicalAnd(r,e)});return e},orify:function(r){var e=this.opify(r,function(r,e){return new E_LogicalOr(r,e)});return e}};module.exports=ExprUtils;
},{"./expr/E_Equals":154,"./expr/E_LogicalAnd":161,"./expr/E_LogicalOr":163,"./expr/ExprVar":176,"./expr/NodeValue":177}],125:[function(require,module,exports){
var Class=require("../ext/Class"),Generator=require("./Generator"),GenSym=Class.create(Generator,{initialize:function(e,r){this.prefix=e?e:"v",this.nextValue=r?r:0},next:function(){++this.nextValue;var e=this.prefix+"_"+this.nextValue;return e}});GenSym.create=function(e){var r=new GenSym(e,0);return r},module.exports=GenSym;
},{"../ext/Class":2,"./Generator":126}],126:[function(require,module,exports){
var Class=require("../ext/Class"),Generator=Class.create({next:function(){throw"Override me"}});module.exports=Generator;
},{"../ext/Class":2}],127:[function(require,module,exports){
var Class=require("../ext/Class"),Generator=require("./Generator"),GeneratorBlacklist=Class.create(Generator,{initialize:function(e,r){this.generator=e,this.blacklist=r},next:function(){var e;do e=this.generator.next();while(-1!==this.blacklist.indexOf(e));return e}});module.exports=GeneratorBlacklist;
},{"../ext/Class":2,"./Generator":126}],128:[function(require,module,exports){
var Triple=require("../rdf/Triple"),NodeFactory=require("../rdf/NodeFactory"),NodeValueUtils=require("./NodeValueUtils"),ExprVar=require("./expr/ExprVar"),E_OneOf=require("./expr/E_OneOf"),E_LangMatches=require("./expr/E_LangMatches"),E_LogicalOr=require("./expr/E_LogicalOr"),E_Lang=require("./expr/E_Lang"),E_Bound=require("./expr/E_Bound"),E_Regex=require("./expr/E_Regex"),E_Str=require("./expr/E_Str"),ExprUtils=require("./ExprUtils"),Concept=require("./Concept"),Relation=require("./Relation"),ConceptUtils=require("./ConceptUtils"),ElementTriplesBlock=require("./element/ElementTriplesBlock"),ElementGroup=require("./element/ElementGroup"),ElementOptional=require("./element/ElementOptional"),ElementFilter=require("./element/ElementFilter"),VarUtils=require("./VarUtils"),LabelUtils={createRelationPrefLabels:function(e){var r=e.getLangs(),t=e.getPredicates(),n=e.getSubjectVar(),i=e.getPredicateVar(),l=e.getObjectVar(),a=(new ExprVar(n),new ExprVar(i)),u=new ExprVar(l),E=r.map(function(e){var r=new E_LangMatches(new E_Lang(u),NodeValueUtils.makeString(e));return r}),p=ExprUtils.orify(E),o=new E_OneOf(a,t),s=[];s.push(new ElementTriplesBlock([new Triple(n,i,l)])),s.push(new ElementFilter(o)),s.push(new ElementFilter(p));var c=new ElementGroup(s),q=new Relation(c,n,l);return q}};module.exports=LabelUtils;
},{"../rdf/NodeFactory":31,"../rdf/Triple":34,"./Concept":117,"./ConceptUtils":118,"./ExprUtils":124,"./NodeValueUtils":129,"./Relation":134,"./VarUtils":138,"./element/ElementFilter":141,"./element/ElementGroup":142,"./element/ElementOptional":143,"./element/ElementTriplesBlock":145,"./expr/E_Bound":151,"./expr/E_Lang":157,"./expr/E_LangMatches":158,"./expr/E_LogicalOr":163,"./expr/E_OneOf":165,"./expr/E_Regex":166,"./expr/E_Str":167,"./expr/ExprVar":176}],129:[function(require,module,exports){
var NodeFactory=require("../rdf/NodeFactory"),NodeValue=require("./expr/NodeValue"),NodeValueNode=require("./expr/NodeValueNode"),AnonIdStr=require("../rdf/AnonIdStr"),xsd=require("../vocab/xsd"),NodeValueUtils={nvNothing:new NodeValue(NodeFactory.createAnon(new AnonIdStr("node value nothing"))),createLiteral:function(e,r){var t=NodeFactory.createTypedLiteralFromValue(e,r),a=new NodeValueNode(t);return a},makeString:function(e){return NodeValueUtils.createLiteral(e,xsd.xstring.getUri())},makeInteger:function(e){return NodeValueUtils.createLiteral(e,xsd.xint.getUri())},makeDecimal:function(e){return NodeValueUtils.createLiteral(e,xsd.decimal.getUri())},makeFloat:function(e){return NodeValueUtils.createLiteral(e,xsd.xfloat.getUri())},makeNode:function(e){var r=new NodeValueNode(e);return r}};module.exports=NodeValueUtils;
},{"../rdf/AnonIdStr":29,"../rdf/NodeFactory":31,"../vocab/xsd":248,"./expr/NodeValue":177,"./expr/NodeValueNode":178}],130:[function(require,module,exports){
var union=require("lodash.union"),isFunction=function(n){return"function"==typeof n},PatternUtils={getVarsMentioned:function(n){var t=n.reduce(function(n,t){var e=t.getVarsMentioned;e&&isFunction(e)||console.log("[ERROR] .getVarsMentioned not found on object ",t);var o=t.getVarsMentioned(),r=union(n,o);return r},[]);return t}};module.exports=PatternUtils;
},{"lodash.union":387}],131:[function(require,module,exports){
var Class=require("../ext/Class"),union=require("lodash.union"),ObjectUtils=require("../util/ObjectUtils"),VarExprList=require("./VarExprList"),ArrayUtils=require("../util/ArrayUtils"),ElementHelpers=require("./ElementHelpers"),ElementUtils=require("./ElementUtils"),QueryType=require("./QueryType"),Query=Class.create({classLabel:"jassa.sparql.Query",initialize:function(){this.type=0,this.distinct=!1,this.reduced=!1,this.queryResultStar=!1,this.projectVars=new VarExprList,this.groupBy=[],this.orderBy=[],this.queryPattern=null,this.constructTemplate=null,this.limit=null,this.offset=null},setQuerySelectType:function(){this.type=0},isQueryResultStar:function(){return this.queryResultStar},setQueryResultStar:function(t){this.queryResultStar=t},getQueryPattern:function(){return this.queryPattern},setQueryPattern:function(t){this.queryPattern=t},getProjectVars:function(){var t=this.projectVars?this.projectVars.getVars():null;return t},setProjectVars:function(t){this.projectVars=t},getProject:function(){return this.projectVars},getGroupBy:function(){return this.groupBy},getOrderBy:function(){return this.orderBy},getLimit:function(){return this.limit},getOffset:function(){return this.offset},toStringOrderBy:function(){var t=this.orderBy&&this.orderBy.length>0?"Order By "+this.orderBy.join(" ")+" ":"";return t},toStringGroupBy:function(){var t=this.groupBy&&this.groupBy.length>0?"Group By "+this.groupBy.join(" ")+" ":"";return t},clone:function(){return this.copySubstitute(ObjectUtils.identity)},flatten:function(){var t=this.clone();return t.queryPattern=this.queryPattern?this.queryPattern.flatten():null,t},getVarsMentioned:function(){console.log("sparql.Query.getVarsMentioned(): Not implemented properly yet. Things may break!");var t=this.queryPattern.getVarsMentioned();return t},copySubstitute:function(t){var e=new Query;return e.type=this.type,e.distinct=this.distinct,e.reduced=this.reduced,e.queryResultStar=this.queryResultStar,e.limit=this.limit,e.offset=this.offset,e.projectVars=this.projectVars.copySubstitute(t),this.constructTemplate&&(e.constructTemplate=this.constructTemplate.copySubstitute(t)),e.orderBy=null==this.orderBy?null:this.orderBy.map(function(e){return e.copySubstitute(t)}),e.groupBy=null==this.groupBy?null:this.groupBy.map(function(e){return e.copySubstitute(t)}),e.queryPattern=this.queryPattern.copySubstitute(t),e},setOptions:function(t){"undefined"!=typeof t&&("undefined"!=typeof t.limit&&this.setLimit(t.limit),"undefined"!=typeof t.offset&&this.setOffset(t.offset),"undefined"!=typeof t.distinct&&this.setDistinct(t.distinct))},setOffset:function(t){this.offset=t?t:null},setLimit:function(t){this.limit=0===t?0:t?t:null},isDistinct:function(){return this.distinct},setDistinct:function(t){this.distinct=t===!0},isReduced:function(){return this.reduced},setReduced:function(t){this.reduced=t===!0},toString:function(){switch(this.type){case QueryType.Select:return this.toStringSelect();case QueryType.Construct:return this.toStringConstruct()}},toStringProjection:function(){return this.queryResultStar?"*":this.projectVars.toString()},toStringLimitOffset:function(){var t="";return null!=this.limit&&(t+=" Limit "+this.limit),null!=this.offset&&(t+=" Offset "+this.offset),t},toStringSelect:function(){var t=this.distinct?"Distinct ":"",e="Select "+t+this.toStringProjection()+" {"+this.queryPattern+"} "+this.toStringGroupBy()+this.toStringOrderBy()+this.toStringLimitOffset();return e},toStringConstruct:function(){var t="Construct "+this.constructTemplate+" {"+this.queryPattern+"}"+this.toStringOrderBy()+this.toStringLimitOffset();return t}});module.exports=Query;
},{"../ext/Class":2,"../util/ArrayUtils":219,"../util/ObjectUtils":225,"./ElementHelpers":119,"./ElementUtils":120,"./QueryType":132,"./VarExprList":136,"lodash.union":387}],132:[function(require,module,exports){
var QueryType={};QueryType.Unknown=-1,QueryType.Select=0,QueryType.Construct=1,QueryType.Ask=2,QueryType.Describe=3,module.exports=QueryType;
},{}],133:[function(require,module,exports){
var ExprVar=require("./expr/ExprVar"),E_Count=require("./expr/E_Count"),ElementGroup=require("./element/ElementGroup"),ElementSubQuery=require("./element/ElementSubQuery"),Query=require("./Query"),QueryUtils={createQueryCount:function(e,r,t,u,n,a){var l,o=1===e.length?e[0]:new ElementGroup(e),i=(t?new ExprVar(t):null,r||a||n&&n.length>0);if(i){var E=new Query;if(E.setQueryPattern(o),n)for(var y=0;y<n.length;++y){var p=n[y];E.getProject().add(p)}t&&E.getProject().add(t),0===E.getProjectVars().length&&E.setQueryResultStar(!0),E.setDistinct(a),E.setLimit(r),l=new ElementSubQuery(E)}else l=new ElementGroup(e);var s=new Query;return s.setQueryPattern(l),n&&n.forEach(function(e){s.getProject().add(e),s.getGroupBy().push(new ExprVar(e))}),s.getProject().add(u,new E_Count),s}};module.exports=QueryUtils;
},{"./Query":131,"./element/ElementGroup":142,"./element/ElementSubQuery":144,"./expr/E_Count":153,"./expr/ExprVar":176}],134:[function(require,module,exports){
var Class=require("../ext/Class"),Relation=Class.create({initialize:function(t,e,r){this.element=t,this.sourceVar=e,this.targetVar=r},getElement:function(){return this.element},getSourceVar:function(){return this.sourceVar},getTargetVar:function(){return this.targetVar},toString:function(){var t="("+[this.element,this.sourceVar,this.targetVar].join("; ")+")";return t}});module.exports=Relation;
},{"../ext/Class":2}],135:[function(require,module,exports){
var Class=require("../ext/Class"),NodeFactory=require("../rdf/NodeFactory"),VarUtils=require("./VarUtils"),SparqlString=Class.create({classLabel:"jassa.sparql.SparqlString",initialize:function(r,e){this.value=r,this.varsMentioned=e?e:[]},toString:function(){return this.value},getString:function(){return this.value},copySubstitute:function(r){var e=this.value,t=[],a="@@@@",n=new RegExp(a,"g");return this.varsMentioned.forEach(function(n){var i="\\?"+n.getName()+"([^\\w])?",s=new RegExp(i,"g"),l=r(n);if(l){var u;l.isVariable()?(u=a+l.getName(),t.push(l)):u=l.toString(),e=e.replace(s,u+"$1")}else t.push(n)}),e=e.replace(n,"?"),new SparqlString(e,t)},getVarsMentioned:function(){return this.varsMentioned},create:function(r,e){var t;t=null!=e?e.map(function(r){return NodeFactory.createVar(r)}):VarUtils.extractSparqlVars(r);var a=new SparqlString(r,t);return a}});module.exports=SparqlString;
},{"../ext/Class":2,"../rdf/NodeFactory":31,"./VarUtils":138}],136:[function(require,module,exports){
var Class=require("../ext/Class"),VarExprList=Class.create({initialize:function(){this.vars=[],this.varToExpr={}},getVars:function(){return this.vars},getExprMap:function(){return this.varToExpr},add:function(r,t){this.vars.push(r),t&&(this.varToExpr[r.getName()]=t)},addAll:function(r){this.vars.push.apply(this.vars,r)},entries:function(){var r=this,t=this.vars.map(function(t){var s=r.varToExpr[t.getName()];return{v:t,expr:s}});return t},copySubstitute:function(r){for(var t=new VarExprList,s=this.entries(),i=0;i<s.length;++i){var a=s[i],e=r(a.v),n=a.expr?a.expr.copySubstitute(r):null;t.add(e,n)}return t},toString:function(){for(var r=[],t=this.entries(),s=0;s<t.length;++s){var i=t[s],a=i.v,e=i.expr;r.push(e?"("+e+" As "+a+")":a.toString())}var n=r.join(" ");return n}});module.exports=VarExprList;
},{"../ext/Class":2}],137:[function(require,module,exports){
var Class=require("../ext/Class"),NodeFactory=require("../rdf/NodeFactory"),VarGen=Class.create({initialize:function(e){this.genSym=e},next:function(){var e=this.genSym.next(),r=NodeFactory.createVar(e);return r}});module.exports=VarGen;
},{"../ext/Class":2,"../rdf/NodeFactory":31}],138:[function(require,module,exports){
var GenSym=require("./GenSym"),GeneratorBlacklist=require("./GeneratorBlacklist"),VarGen=require("./VarGen"),NodeFactory=require("../rdf/NodeFactory"),StringUtils=require("../util/StringUtils"),VarUtils={g:NodeFactory.createVar("g"),s:NodeFactory.createVar("s"),p:NodeFactory.createVar("p"),o:NodeFactory.createVar("o"),_s_:NodeFactory.createVar("_s_"),_p_:NodeFactory.createVar("_p_"),_o_:NodeFactory.createVar("_o_"),x:NodeFactory.createVar("x"),y:NodeFactory.createVar("y"),z:NodeFactory.createVar("z"),a:NodeFactory.createVar("a"),b:NodeFactory.createVar("b"),c:NodeFactory.createVar("c"),createVars:function(r){var e=r.map(function(r){return NodeFactory.createVar(r)});return e},getVarName:function(r){return r.getName()},getVarNames:function(r){var e=r.map(function(r){return r.getName()});return e},createVarGen:function(r,e){r||(r="v");var a=this.getVarNames(e),t=GenSym.create(r),n=new GeneratorBlacklist(t,a),c=new VarGen(n);return c},varPattern:/\?(\w+)/g,extractSparqlVars:function(r){for(var e=StringUtils.extractAllRegexMatches(this.varPattern,r,1),a=[],t=0;t<e.length;++t){var n=e[t],c=NodeFactory.createVar(n);a.push(c)}return a},freshVarGen:function(r,e){var a=VarUtils.getVarNames(e),t=GenSym.create(r),n=new GeneratorBlacklist(t,a),c=new VarGen(n);return c},freshVar:function(r,e){var a=this.freshVarGen(r,e),t=a.next();return t},fnSubst:function(r){var e=function(e){var a=r.get(e);return a};return e}};module.exports=VarUtils;
},{"../rdf/NodeFactory":31,"../util/StringUtils":228,"./GenSym":125,"./GeneratorBlacklist":127,"./VarGen":137}],139:[function(require,module,exports){
var Class=require("../../ext/Class"),Element=Class.create({classLabel:"jassa.sparql.Element"});module.exports=Element;
},{"../../ext/Class":2}],140:[function(require,module,exports){
var Class=require("../../ext/Class"),union=require("lodash.union"),NodeUtils=require("../../rdf/NodeUtils"),Element=require("./Element"),ElementBind=Class.create(Element,{classLabel:"jassa.sparql.ElementBind",initialize:function(e,t){this.expr=t,this.variable=e},getArgs:function(){return[]},getExpr:function(){return this.expr},getVar:function(){return this.variable},getVarsMentioned:function(){return union(this.expr.getVarsMentioned(),this.variable)},copy:function(){return new ElementBind(this.variable,this.expr)},copySubstitute:function(e){return new ElementBind(NodeUtils.getSubstitute(this.variable,e),this.expr.copySubstitute(e))},flatten:function(){return this},toString:function(){return"bind("+this.expr+" as "+this.variable+")"}});module.exports=ElementBind;
},{"../../ext/Class":2,"../../rdf/NodeUtils":32,"./Element":139,"lodash.union":387}],141:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprUtils=require("../ExprUtils"),Element=require("./Element"),ElementFilter=Class.create(Element,{classLabel:"jassa.sparql.ElementFilter",initialize:function(e){if(Array.isArray(e))throw new Error("[WARN] Array argument for filter is deprecated");this.expr=e},getArgs:function(){return[]},copy:function(e){if(0!==e.length)throw"Invalid argument";var t=new ElementFilter(this.expr);return t},copySubstitute:function(e){var t=this.expr.copySubstitute(e);return new ElementFilter(t)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},flatten:function(){return this},toString:function(){return"Filter("+this.expr+")"}});module.exports=ElementFilter;
},{"../../ext/Class":2,"../ExprUtils":124,"./Element":139}],142:[function(require,module,exports){
var uniq=require("lodash.uniq"),Class=require("../../ext/Class"),Element=require("./Element"),ElementFilter=require("./ElementFilter"),ElementTriplesBlock=require("./ElementTriplesBlock"),TripleUtils=require("../../rdf/TripleUtils"),ElementHelpers=require("./../ElementHelpers"),PatternUtils=require("../PatternUtils"),ElementGroup=Class.create(Element,{classLabel:"jassa.sparql.ElementGroup",initialize:function(e){if(this.elements=e?e:[],!Array.isArray(this.elements))throw new Error(this.classLabel+" expects a single argument of type array, got ["+arguments.length+"] args; "+typeof e+": "+e)},addElement:function(e){this.elements.push(e)},getArgs:function(){return this.elements},copy:function(e){var t=new ElementTriplesBlock(e);return t},copySubstitute:function(e){var t=this.elements.map(function(t){return t.copySubstitute(e)});return new ElementGroup(t)},getVarsMentioned:function(){var e=PatternUtils.getVarsMentioned(this.elements);return e},toString:function(){return ElementHelpers.joinElements(" . ",this.elements)},flatten:function(){var e=this.elements.map(function(e){var t=e.flatten();return t}),t=[];e.forEach(function(e){e instanceof ElementGroup?t.push.apply(t,e.elements):t.push(e)});var n=[],r=[],l=[];t.forEach(function(e){e instanceof ElementTriplesBlock?n.push.apply(n,e.getTriples()):e instanceof ElementFilter?r.push(e):l.push(e)});var s=[];if(n.length>0){var i=TripleUtils.uniqTriples(n);s.push(new ElementTriplesBlock(i))}s.push.apply(s,l);var u=uniq(r,!1,function(e){return e.toString()});s.push.apply(s,u);var a=1===s.length?s[0]:new ElementGroup(s);return a}});module.exports=ElementGroup;
},{"../../ext/Class":2,"../../rdf/TripleUtils":35,"../PatternUtils":130,"./../ElementHelpers":119,"./Element":139,"./ElementFilter":141,"./ElementTriplesBlock":145,"lodash.uniq":410}],143:[function(require,module,exports){
var Class=require("../../ext/Class"),Element=require("./Element"),ElementOptional=Class.create(Element,{classLabel:"jassa.sparql.ElementOptional",initialize:function(t){if(this.optionalElement=t,!(t instanceof Element))throw new Error(this.classLabel+" only accepts an instance of Element as the argument")},getArgs:function(){return[this.optionalElement]},copy:function(t){if(1!==t.length)throw"Invalid argument";var e=new ElementOptional(t[0]);return e},getVarsMentioned:function(){return this.optionalElement.getVarsMentioned()},copySubstitute:function(t){return new ElementOptional(this.optionalElement.copySubstitute(t))},flatten:function(){var t=new ElementOptional(this.optionalElement.flatten());return t},toString:function(){return"Optional {"+this.optionalElement+"}"}});module.exports=ElementOptional;
},{"../../ext/Class":2,"./Element":139}],144:[function(require,module,exports){
var Class=require("../../ext/Class"),Element=require("./Element"),ElementSubQuery=Class.create(Element,{classLabel:"jassa.sparql.ElementSubQuery",initialize:function(e){this.query=e},getQuery:function(){return this.query},getArgs:function(){return[]},copy:function(e){if(0!==e.length)throw"Invalid argument";var t=new ElementSubQuery(this.query);return t},toString:function(){return"{ "+this.query+" }"},copySubstitute:function(e){return new ElementSubQuery(this.query.copySubstitute(e))},flatten:function(){return new ElementSubQuery(this.query.flatten())},getVarsMentioned:function(){return this.query.getVarsMentioned()}});module.exports=ElementSubQuery;
},{"../../ext/Class":2,"./Element":139}],145:[function(require,module,exports){
var union=require("lodash.union"),Class=require("../../ext/Class"),TripleUtils=require("../../rdf/TripleUtils"),Element=require("./Element"),ElementTriplesBlock=Class.create(Element,{classLabel:"jassa.sparql.ElementTriplesBlock",initialize:function(e){this.triples=e?e:[]},getArgs:function(){return[]},copy:function(e){if(0!==e.length)throw"Invalid argument";var t=new ElementTriplesBlock(this.triples);return t},getTriples:function(){return this.triples},addTriples:function(e){this.triples=this.triples.concat(e)},uniq:function(){this.triples=TripleUtils.uniqTriples(this.triples)},copySubstitute:function(e){var t=this.triples.map(function(t){return t.copySubstitute(e)});return new ElementTriplesBlock(t)},getVarsMentioned:function(){var e=[];return this.triples.forEach(function(t){e=union(e,t.getVarsMentioned())}),e},flatten:function(){var e=TripleUtils.uniqTriples(this.triples),t=new ElementTriplesBlock(e);return t},toString:function(){return this.triples.join(" . ")}});module.exports=ElementTriplesBlock;
},{"../../ext/Class":2,"../../rdf/TripleUtils":35,"./Element":139,"lodash.union":387}],146:[function(require,module,exports){
var Class=require("../../ext/Class"),ElementFactory=Class.create({createElement:function(){throw"Not overridden"}});module.exports=ElementFactory;
},{"../../ext/Class":2}],147:[function(require,module,exports){
var Class=require("../../ext/Class"),ElementGroup=require("../element/ElementGroup"),ElementFactory=require("./ElementFactory"),ElementFactoryCombine=Class.create(ElementFactory,{initialize:function(e,t,r){this.simplify=e,this.elementFactories=t,this.forceGroup=r},isSimplify:function(){return this.simplify},getElementFactories:function(){return this.elementFactories},isForceGroup:function(){return this.forceGroup},createElement:function(){var e=this.elementFactories.map(function(e){var t=e.createElement();return t}),t=e.filter(function(e){return null!=e}),r=new ElementGroup(t);if(this.simplify&&(r=r.flatten()),!this.forceGroup){var n=r.getArgs();1===n.length&&(r=n[0])}return r}});module.exports=ElementFactoryCombine;
},{"../../ext/Class":2,"../element/ElementGroup":142,"./ElementFactory":146}],148:[function(require,module,exports){
var Class=require("../../ext/Class"),ElementFactory=require("./ElementFactory"),ElementFactoryConst=Class.create(ElementFactory,{initialize:function(e){this.element=e},createElement:function(){return this.element}});module.exports=ElementFactoryConst;
},{"../../ext/Class":2,"./ElementFactory":146}],149:[function(require,module,exports){
var Class=require("../../ext/Class"),JoinType=require("../join/JoinType"),ElementUtils=require("../ElementUtils"),ElementOptional=require("../element/ElementOptional"),ElementGroup=require("../element/ElementGroup"),ElementFactory=require("./ElementFactory"),ElementFactoryJoin=Class.create(ElementFactory,{initialize:function(e,t,n,i,r){this.elementFactoryA=e,this.elementFactoryB=t,this.joinVarsA=n,this.joinVarsB=i,this.joinType=r?r:JoinType.INNER_JOIN},createElement:function(){var e=this.elementFactoryA.createElement(),t=this.elementFactoryB.createElement(),n=e.getVarsMentioned(),i=t.getVarsMentioned(),r=ElementUtils.createJoinVarMap(i,n,this.joinVarsB,this.joinVarsA);e=ElementUtils.createRenamedElement(e,r),this.joinType===JoinType.LEFT_JOIN&&(t=new ElementOptional(t));var l=new ElementGroup([e,t]);return l}});module.exports=ElementFactoryJoin;
},{"../../ext/Class":2,"../ElementUtils":120,"../element/ElementGroup":142,"../element/ElementOptional":143,"../join/JoinType":186,"./ElementFactory":146}],150:[function(require,module,exports){
var Class=require("../../ext/Class"),JoinType=require("../join/JoinType"),JoinBuilder=require("../join/JoinBuilder"),ElementGroup=require("../element/ElementGroup"),ElementFactory=require("./ElementFactory"),ElementFactoryJoinConcept=Class.create(ElementFactory,{initialize:function(e,t,n){this.conceptFactoryA=e,this.conceptFactoryB=t,this.joinType=n||JoinType.INNER_JOIN},createElement:function(){var e=this.conceptFactoryA.createConcept(),t=this.conceptFactoryB.createConcept(),n=e.getElement(),r=t.getElement();if(t.isSubjectConcept())return n;var o=[e.getVar()],i=[t.getVar()],c=JoinBuilder.create(n),a=c.joinAny(this.joinType,o,r,i),l=a.getJoinBuilder(),p=l.getElements(),u=new ElementGroup(p);return u}});module.exports=ElementFactoryJoinConcept;
},{"../../ext/Class":2,"../element/ElementGroup":142,"../join/JoinBuilder":180,"../join/JoinType":186,"./ElementFactory":146}],151:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprHelpers=require("../ExprHelpers"),E_Bound=Class.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new E_Bound(this.expr.copySubstitute(e))},getVarsMentioned:function(){var e=this.expr.getVarsMentioned();return e},getArgs:function(){return[this.expr]},copy:function(e){var r=ExprHelpers.newUnaryExpr(E_Bound,e);return r},toString:function(){return"bound("+this.expr+")"}});module.exports=E_Bound;
},{"../../ext/Class":2,"../ExprHelpers":123}],152:[function(require,module,exports){
var Class=require("../../ext/Class"),E_Cast=Class.create({initialize:function(t,e){this.expr=t,this.node=e},copySubstitute:function(t){return new E_Cast(this.expr.copySubstitute(t),this.node.copySubstitute(t))}});module.exports=E_Cast;
},{"../../ext/Class":2}],153:[function(require,module,exports){
var Class=require("../../ext/Class"),E_Count=Class.create({initialize:function(t,i){this.subExpr=t,this.isDistinct=i?i:!1},copySubstitute:function(t){var i=this.subExpr?this.subExpr.copySubstitute(t):null;return new E_Count(i,this.isDistinct)},toString:function(){return"Count("+(this.isDistinct?"Distinct ":"")+(this.subExpr?this.subExpr:"*")+")"}});module.exports=E_Count;
},{"../../ext/Class":2}],154:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunction2=require("./ExprFunction2"),E_Equals=Class.create(ExprFunction2,{initialize:function(t,i,u){t("=",i,u)},copySubstitute:function(t){return new E_Equals(this.left.copySubstitute(t),this.right.copySubstitute(t))},$copy:function(t,i){return new E_Equals(t,i)},toString:function(){return"("+this.left+" = "+this.right+")"},eval:function(){}});module.exports=E_Equals;
},{"../../ext/Class":2,"./ExprFunction2":172}],155:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunctionN=require("./ExprFunctionN"),E_Function=Class.create(ExprFunctionN,{initialize:function(n,i,t){n(i,t)},copy:function(n){var i=new E_Function(this.name,n);return i}});module.exports=E_Function;
},{"../../ext/Class":2,"./ExprFunctionN":174}],156:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunction2=require("./ExprFunction2"),ExprHelpers=require("../ExprHelpers"),E_GreaterThan=Class.create(ExprFunction2,{initialize:function(r,t,e){r(">",t,e)},copySubstitute:function(r){return new E_GreaterThan(this.left.copySubstitute(r),this.right.copySubstitute(r))},copy:function(r){return ExprHelpers.newBinaryExpr(E_GreaterThan,r)},toString:function(){return"("+this.left+" > "+this.right+")"}});module.exports=E_GreaterThan;
},{"../../ext/Class":2,"../ExprHelpers":123,"./ExprFunction2":172}],157:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprHelpers=require("../ExprHelpers"),E_Lang=Class.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new E_Lang(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var r=ExprHelpers.newUnaryExpr(E_Lang,e);return r},toString:function(){return"lang("+this.expr+")"},getVarsMentioned:function(){return this.expr.getVarsMentioned()}});module.exports=E_Lang;
},{"../../ext/Class":2,"../ExprHelpers":123}],158:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprHelpers=require("../ExprHelpers"),PatternUtils=require("../PatternUtils"),E_LangMatches=Class.create({initialize:function(t,e){this.left=t,this.right=e},copySubstitute:function(t){return new E_LangMatches(this.left.copySubstitute(t),this.right.copySubstitute(t))},getArgs:function(){return[this.left,this.right]},copy:function(t){return ExprHelpers.newBinaryExpr(E_LangMatches,t)},toString:function(){return"langMatches("+this.left+", "+this.right+")"},getVarsMentioned:function(){var t=PatternUtils.getVarsMentioned(this.getArgs());return t}});module.exports=E_LangMatches;
},{"../../ext/Class":2,"../ExprHelpers":123,"../PatternUtils":130}],159:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunction2=require("./ExprFunction2"),ExprHelpers=require("../ExprHelpers"),E_LessThan=Class.create(ExprFunction2,{initialize:function(t,e,r){t("<",e,r)},copySubstitute:function(t){return new E_LessThan(this.left.copySubstitute(t),this.right.copySubstitute(t))},copy:function(t){return ExprHelpers.newBinaryExpr(E_LessThan,t)},toString:function(){return"("+this.left+" < "+this.right+")"}});module.exports=E_LessThan;
},{"../../ext/Class":2,"../ExprHelpers":123,"./ExprFunction2":172}],160:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprHelpers=require("../ExprHelpers"),E_Like=Class.create({initialize:function(e,t){this.expr=e,this.pattern=t},copySubstitute:function(e){return new E_Like(this.expr.copySubstitute(e),this.pattern)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},getArgs:function(){return[this.expr]},copy:function(e){var t=ExprHelpers.newUnaryExpr(E_Like,e);return t},toString:function(){var e=this.pattern.replace("'","\\'");return"("+this.expr+" Like '"+e+"')"}});module.exports=E_Like;
},{"../../ext/Class":2,"../ExprHelpers":123}],161:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprHelpers=require("../ExprHelpers"),ExprFunction2=require("./ExprFunction2"),E_LogicalAnd=Class.create(ExprFunction2,{initialize:function(t,i,r){t("&&",i,r)},copySubstitute:function(t){return new E_LogicalAnd(this.left.copySubstitute(t),this.right.copySubstitute(t))},copy:function(t){return ExprHelpers.newBinaryExpr(E_LogicalAnd,t)},toString:function(){return"("+this.left+" && "+this.right+")"}});module.exports=E_LogicalAnd;
},{"../../ext/Class":2,"../ExprHelpers":123,"./ExprFunction2":172}],162:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprHelpers=require("../ExprHelpers"),ExprFunction1=require("./ExprFunction1"),E_LogicalNot=Class.create(ExprFunction1,{initialize:function(r){this.expr=r},copySubstitute:function(r){return new E_LogicalNot(this.expr.copySubstitute(r))},getArgs:function(){return[this.expr]},copy:function(r){var t=ExprHelpers.newUnaryExpr(E_LogicalNot,r);return t},toString:function(){return"(!"+this.expr+")"}});module.exports=E_LogicalNot;
},{"../../ext/Class":2,"../ExprHelpers":123,"./ExprFunction1":171}],163:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunction2=require("./ExprFunction2"),ExprHelpers=require("../ExprHelpers"),E_LogicalOr=Class.create(ExprFunction2,{initialize:function(t,r,i){t("||",r,i)},copySubstitute:function(t){var r=this.left.copySubstitute(t),i=this.right.copySubstitute(t),e=new E_LogicalOr(r,i);return e},getArgs:function(){return[this.left,this.right]},copy:function(t){return ExprHelpers.newBinaryExpr(E_LogicalOr,t)},toString:function(){return"("+this.left+" || "+this.right+")"}});module.exports=E_LogicalOr;
},{"../../ext/Class":2,"../ExprHelpers":123,"./ExprFunction2":172}],164:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunction0=require("./ExprFunction0"),E_NotExists=Class.create(ExprFunction0,{initialize:function(t,e){t("jassa.sparql.E_NotExists"),this.element=e},getVarsMentioned:function(){return this.element.getVarsMentioned()},$copy:function(){return new E_NotExists(this.element)},toString:function(){return"Not Exists ("+this.element+") "}});module.exports=E_NotExists;
},{"../../ext/Class":2,"./ExprFunction0":170}],165:[function(require,module,exports){
var Class=require("../../ext/Class"),Expr=require("./Expr"),getSubstitute=function(t,e){var r=e(t);return r||(r=t),r},E_OneOf=Class.create(Expr,{initialize:function(t,e){if(this.lhsExpr=t,!Array.isArray(e))throw new Error("nodes must be an array");this.nodes=e},getVarsMentioned:function(){var t=this.lhsExpr.getVarsMentioned();return t},copySubstitute:function(t){var e=this.nodes.map(function(e){return getSubstitute(e,t)});return new E_OneOf(this.lhsExpr.copySubstitute(t),e)},toString:function(){return this.nodes&&0!==this.nodes.length?"("+this.lhsExpr+" in ("+this.nodes.join(", ")+"))":"FALSE"}});module.exports=E_OneOf;
},{"../../ext/Class":2,"./Expr":168}],166:[function(require,module,exports){
var Class=require("../../ext/Class"),Expr=require("./Expr"),E_Regex=Class.create(Expr,{initialize:function(t,e,r){this.expr=t,this.pattern=e,this.flags=r},copySubstitute:function(t){return new E_Regex(this.expr.copySubstitute(t),this.pattern,this.flags)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},getArgs:function(){return[this.expr]},copy:function(t){if(1!==t.length)throw"Invalid argument";var e=t[0],r=new E_Regex(e,this.pattern,this.flags);return r},toString:function(){var t=this.pattern.replace('"','\\"'),e=this.flags?', "'+this.flags.replace('"','\\"')+'"':"";return"regex("+this.expr+', "'+t+'"'+e+")"}});module.exports=E_Regex;
},{"../../ext/Class":2,"./Expr":168}],167:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunction1=require("./ExprFunction1"),E_Str=Class.create(ExprFunction1,{initialize:function(t,r){t("str",r)},getVarsMentioned:function(){return this.subExpr.getVarsMentioned()},copy:function(t){return new E_Str(t[0])},toString:function(){return"str("+this.subExpr+")"}});module.exports=E_Str;
},{"../../ext/Class":2,"./ExprFunction1":171}],168:[function(require,module,exports){
var Class=require("../../ext/Class"),Expr=Class.create({isFunction:function(){return!1},isVar:function(){return!1},isConstant:function(){return!1},getFunction:function(){throw console.log("Override me"),"Override me"},getExprVar:function(){throw console.log("Override me"),"Override me"},getConstant:function(){throw console.log("Override me"),"Override me"},copySubstitute:function(){throw console.log("Override me"),"Override me"},copy:function(){throw console.log("Override me"),"Override me"}});module.exports=Expr;
},{"../../ext/Class":2}],169:[function(require,module,exports){
var Class=require("../../ext/Class"),Expr=require("./Expr"),ExprFunction=Class.create(Expr,{getName:function(){throw console.log("Implement me"),"Implement me"},isFunction:function(){return!0},getFunction:function(){return this}});module.exports=ExprFunction;
},{"../../ext/Class":2,"./Expr":168}],170:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunctionBase=require("./ExprFunctionBase"),ExprFunction0=Class.create(ExprFunctionBase,{initialize:function(n,r){n(r)},getArgs:function(){return[]},copy:function(n){if(n&&n.length>0)throw"Invalid argument";var r=this.$copy(n);return r}});module.exports=ExprFunction0;
},{"../../ext/Class":2,"./ExprFunctionBase":173}],171:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunctionBase=require("./ExprFunctionBase"),ExprFunction1=Class.create(ExprFunctionBase,{initialize:function(r,n,t){r(n),this.subExpr=t},getArgs:function(){return[this.subExpr]},copy:function(r){if(1!==r.length)throw"Invalid argument";var n=this.$copy(r);return n},getSubExpr:function(){return this.subExpr}});module.exports=ExprFunction1;
},{"../../ext/Class":2,"./ExprFunctionBase":173}],172:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunctionBase=require("./ExprFunctionBase"),ExprFunction2=Class.create(ExprFunctionBase,{initialize:function(t,i,n,r){t(i),this.left=n,this.right=r},getArgs:function(){return[this.left,this.right]},copy:function(t){if(2!==t.length)throw"Invalid argument";var i=this.$copy(t[0],t[1]);return i},getLeft:function(){return this.left},getRight:function(){return this.right}});module.exports=ExprFunction2;
},{"../../ext/Class":2,"./ExprFunctionBase":173}],173:[function(require,module,exports){
var Class=require("../../ext/Class"),PatternUtils=require("../PatternUtils"),ExprFunction=require("./ExprFunction"),ExprFunctionBase=Class.create(ExprFunction,{initialize:function(t){this.name=t},copySubstitute:function(t){var n=this.getArgs(),r=n.map(function(n){var r=n.copySubstitute(t);return r}),e=this.copy(r);return e},getVarsMentioned:function(){var t=PatternUtils.getVarsMentioned(this.getArgs());return t},toString:function(){var t=this.name+"("+this.getArgs().join(", ")+")";return t}});module.exports=ExprFunctionBase;
},{"../../ext/Class":2,"../PatternUtils":130,"./ExprFunction":169}],174:[function(require,module,exports){
var Class=require("../../ext/Class"),ExprFunctionBase=require("./ExprFunctionBase"),ExprFunctionN=Class.create(ExprFunctionBase,{initialize:function(r,n,e){r(n,e),this.args=e},getArgs:function(){return this.args}});module.exports=ExprFunctionN;
},{"../../ext/Class":2,"./ExprFunctionBase":173}],175:[function(require,module,exports){
var Class=require("../../ext/Class"),SparqlString=require("../SparqlString"),Expr=require("./Expr"),ExprString=Class.create(Expr,{classLabel:"jassa.sparql.ExprString",initialize:function(r){this.sparqlString=r},copySubstitute:function(r){var t=this.sparqlString.copySubstitute(r);return new ExprString(t)},getVarsMentioned:function(){return this.sparqlString.getVarsMentioned()},getArgs:function(){return[]},copy:function(r){if(0!==r.length)throw"Invalid argument";return this},toString:function(){return"(!"+this.expr+")"},create:function(r,t){var n=new ExprString(SparqlString.create(r,t));return n}});module.exports=ExprString;
},{"../../ext/Class":2,"../SparqlString":135,"./Expr":168}],176:[function(require,module,exports){
var Class=require("../../ext/Class"),Expr=require("./Expr"),NodeValueUtils=require("./../NodeValueUtils"),ExprVar=Class.create(Expr,{classLabel:"ExprVar",initialize:function(r){this.v=r},eval:function(r){var t=r.get(this.v),e=NodeValueUtils.makeNode(t);return e},copySubstitute:function(r){var t,e=r(this.v);return t=null==e?this:e.isVariable()?new ExprVar(e):NodeValueUtils.makeNode(e)},getArgs:function(){return[]},copy:function(r){if(r&&r.length>0)throw"Invalid argument";var t=new ExprVar(this.v);return t},isVar:function(){return!0},getExprVar:function(){return this},asVar:function(){return this.v},getVarsMentioned:function(){return[this.v]},toString:function(){return this.v.toString()}});module.exports=ExprVar;
},{"../../ext/Class":2,"./../NodeValueUtils":129,"./Expr":168}],177:[function(require,module,exports){
var Class=require("../../ext/Class"),Expr=require("./Expr"),xsd=require("../../vocab/xsd"),NodeFactory=require("../../rdf/NodeFactory"),NodeValue=Class.create(Expr,{initialize:function(e){this.node=e},isConstant:function(){return!0},getConstant:function(){return this},getArgs:function(){return[]},getVarsMentioned:function(){return[]},asNode:function(){throw"makeNode is not overridden"},copySubstitute:function(){return this},toString:function(){var e,t=this.node;if(t.isLiteral()){if(t.getLiteralDatatypeUri()===xsd.xstring.getUri())e="'"+t.getLiteralLexicalForm()+"'";else if(t.dataType===xsd.xdouble.value)return parseFloat(this.node.value)}else e=t.toString();return e}});module.exports=NodeValue;
},{"../../ext/Class":2,"../../rdf/NodeFactory":31,"../../vocab/xsd":248,"./Expr":168}],178:[function(require,module,exports){
var Class=require("../../ext/Class"),xsd=require("../../vocab/xsd"),NodeValue=require("./NodeValue"),NodeValueNode=Class.create(NodeValue,{initialize:function(e){this.node=e},asNode:function(){return this.node},toString:function(){var e=this.node,t=null;return e.isLiteral()&&e.getLiteralDatatypeUri()===xsd.xstring.getUri()&&(t='"'+e.getLiteralLexicalForm()+'"'),null==t&&(t=e.toString()),t}});module.exports=NodeValueNode;
},{"../../ext/Class":2,"../../vocab/xsd":248,"./NodeValue":177}],179:[function(require,module,exports){
"use strict";var ns={BestLabelConfig:require("./BestLabelConfig"),Binding:require("./Binding"),Concept:require("./Concept"),ConceptUtils:require("./ConceptUtils"),ElementHelpers:require("./ElementHelpers"),ElementUtils:require("./ElementUtils"),ExprEvaluator:require("./ExprEvaluator"),ExprEvaluatorImpl:require("./ExprEvaluatorImpl"),ExprHelpers:require("./ExprHelpers"),ExprUtils:require("./ExprUtils"),GenSym:require("./GenSym"),Generator:require("./Generator"),GeneratorBlacklist:require("./GeneratorBlacklist"),LabelUtils:require("./LabelUtils"),NodeValueUtils:require("./NodeValueUtils"),PatternUtils:require("./PatternUtils"),Query:require("./Query"),QueryType:require("./QueryType"),QueryUtils:require("./QueryUtils"),Relation:require("./Relation"),SparqlString:require("./SparqlString"),VarExprList:require("./VarExprList"),VarGen:require("./VarGen"),VarUtils:require("./VarUtils"),Element:require("./element/Element"),ElementBind:require("./element/ElementBind"),ElementFilter:require("./element/ElementFilter"),ElementGroup:require("./element/ElementGroup"),ElementOptional:require("./element/ElementOptional"),ElementSubQuery:require("./element/ElementSubQuery"),ElementTriplesBlock:require("./element/ElementTriplesBlock"),ElementFactory:require("./element_factory/ElementFactory"),ElementFactoryCombine:require("./element_factory/ElementFactoryCombine"),ElementFactoryConst:require("./element_factory/ElementFactoryConst"),ElementFactoryJoin:require("./element_factory/ElementFactoryJoin"),ElementFactoryJoinConcept:require("./element_factory/ElementFactoryJoinConcept"),E_Bound:require("./expr/E_Bound"),E_Cast:require("./expr/E_Cast"),E_Count:require("./expr/E_Count"),E_Equals:require("./expr/E_Equals"),E_Function:require("./expr/E_Function"),E_GreaterThan:require("./expr/E_GreaterThan"),E_Lang:require("./expr/E_Lang"),E_LangMatches:require("./expr/E_LangMatches"),E_LessThan:require("./expr/E_LessThan"),E_Like:require("./expr/E_Like"),E_LogicalAnd:require("./expr/E_LogicalAnd"),E_LogicalNot:require("./expr/E_LogicalNot"),E_LogicalOr:require("./expr/E_LogicalOr"),E_NotExists:require("./expr/E_NotExists"),E_OneOf:require("./expr/E_OneOf"),E_Regex:require("./expr/E_Regex"),E_Str:require("./expr/E_Str"),Expr:require("./expr/Expr"),ExprFunction:require("./expr/ExprFunction"),ExprFunction0:require("./expr/ExprFunction0"),ExprFunction1:require("./expr/ExprFunction1"),ExprFunction2:require("./expr/ExprFunction2"),ExprFunctionBase:require("./expr/ExprFunctionBase"),ExprFunctionN:require("./expr/ExprFunctionN"),ExprString:require("./expr/ExprString"),ExprVar:require("./expr/ExprVar"),NodeValue:require("./expr/NodeValue"),NodeValueNode:require("./expr/NodeValueNode"),JoinBuilder:require("./join/JoinBuilder"),JoinBuilderUtils:require("./join/JoinBuilderUtils"),JoinInfo:require("./join/JoinInfo"),JoinNode:require("./join/JoinNode"),JoinNodeInfo:require("./join/JoinNodeInfo"),JoinTargetState:require("./join/JoinTargetState"),JoinType:require("./join/JoinType"),KeywordSearchUtils:require("./search/KeywordSearchUtils")};Object.freeze(ns),module.exports=ns;
},{"./BestLabelConfig":115,"./Binding":116,"./Concept":117,"./ConceptUtils":118,"./ElementHelpers":119,"./ElementUtils":120,"./ExprEvaluator":121,"./ExprEvaluatorImpl":122,"./ExprHelpers":123,"./ExprUtils":124,"./GenSym":125,"./Generator":126,"./GeneratorBlacklist":127,"./LabelUtils":128,"./NodeValueUtils":129,"./PatternUtils":130,"./Query":131,"./QueryType":132,"./QueryUtils":133,"./Relation":134,"./SparqlString":135,"./VarExprList":136,"./VarGen":137,"./VarUtils":138,"./element/Element":139,"./element/ElementBind":140,"./element/ElementFilter":141,"./element/ElementGroup":142,"./element/ElementOptional":143,"./element/ElementSubQuery":144,"./element/ElementTriplesBlock":145,"./element_factory/ElementFactory":146,"./element_factory/ElementFactoryCombine":147,"./element_factory/ElementFactoryConst":148,"./element_factory/ElementFactoryJoin":149,"./element_factory/ElementFactoryJoinConcept":150,"./expr/E_Bound":151,"./expr/E_Cast":152,"./expr/E_Count":153,"./expr/E_Equals":154,"./expr/E_Function":155,"./expr/E_GreaterThan":156,"./expr/E_Lang":157,"./expr/E_LangMatches":158,"./expr/E_LessThan":159,"./expr/E_Like":160,"./expr/E_LogicalAnd":161,"./expr/E_LogicalNot":162,"./expr/E_LogicalOr":163,"./expr/E_NotExists":164,"./expr/E_OneOf":165,"./expr/E_Regex":166,"./expr/E_Str":167,"./expr/Expr":168,"./expr/ExprFunction":169,"./expr/ExprFunction0":170,"./expr/ExprFunction1":171,"./expr/ExprFunction2":172,"./expr/ExprFunctionBase":173,"./expr/ExprFunctionN":174,"./expr/ExprString":175,"./expr/ExprVar":176,"./expr/NodeValue":177,"./expr/NodeValueNode":178,"./join/JoinBuilder":180,"./join/JoinBuilderUtils":181,"./join/JoinInfo":182,"./join/JoinNode":183,"./join/JoinNodeInfo":184,"./join/JoinTargetState":185,"./join/JoinType":186,"./search/KeywordSearchUtils":187}],180:[function(require,module,exports){
var Class=require("../../ext/Class"),HashBidiMap=require("../../util/collection/HashBidiMap"),GenSym=require("../GenSym"),GeneratorBlacklist=require("../GeneratorBlacklist"),ElementUtils=require("../ElementUtils"),ElementGroup=require("../element/ElementGroup"),ElementOptional=require("../element/ElementOptional"),VarUtils=require("../VarUtils"),JoinNode=require("./JoinNode"),JoinTargetState=require("./JoinTargetState"),JoinInfo=require("./JoinInfo"),JoinType=require("./JoinType"),JoinBuilder=Class.create({initialize:function(e,t,n,a){if(null==e)throw console.log("[Error] Root element must not be null"),"Bailing out";this.usedVarNames=[],this.usedVars=[],this.aliasGenerator=new GenSym("a"),this.varNameGenerator=new GeneratorBlacklist(new GenSym("v"),this.usedVarNames),this.aliasToState={},this.rootAlias=n?n:this.aliasGenerator.next(),null==a&&(a=[]);var r=this.createTargetState(this.rootAlias,new HashBidiMap,a,e,t,a);this.aliasToState[this.rootAlias]=r,this.rootNode=r.getJoinNode()},getRootNode:function(){return this.rootNode},getJoinNode:function(e){var t=this.aliasToState[e],n=t?t.getJoinNode():null;return n},getState:function(e){return this.aliasToState[e]},getElement:function(e){var t=this.aliasToState[e],n=t?t.getElement():null;return n},addVars:function(e){var t=this;e.forEach(function(e){var n=e.getName(),a=-1!==t.usedVarNames.indexOf(n);a||(t.usedVarNames.push(n),t.usedVars.push(e))})},createTargetState:function(e,t,n,a,r,i){var o=n.map(function(e){var n=t.get(e);return n}),s=ElementUtils.createJoinVarMap(this.usedVars,r,o,i,this.varNameGenerator),l=null;null!=a&&(l=ElementUtils.createRenamedElement(a,s));var u=s.getInverse().keyList();this.addVars(u);var h=new JoinNode(this,e,i),d=new JoinTargetState(s,h,l,u);return d},addJoin:function(e,t,n,a,r,i){var o=this.aliasToState[t],s=o.getVarMap();i||(i=this.aliasGenerator.next());var l=a.getVarsMentioned(),u=this.createTargetState(i,s,n,a,l,r),h=new JoinInfo(i,e);o.getJoinInfos().push(h),this.aliasToState[i]=u;var d=u.getJoinNode();return d},getElementsRec:function(e){var t=[],n=e.getElement();null!=n&&t.push(n);var a=e.getJoinNodeInfos(),r=this;return a.forEach(function(e){var n=e.getJoinNode(),a=r.getElementsRec(n),i=new ElementGroup(a),o=e.getJoinType();switch(o){case JoinType.LEFT_JOIN:i=new ElementOptional(i);break;case JoinType.INNER_JOIN:break;default:throw console.log("[ERROR] Unsupported join type: "+o),"Bailing out"}t.push(i)}),t},getElements:function(){var e=this.getRootNode(),t=this.getElementsRec(e);return t},getAliasToVarMap:function(){var e={};return this.aliasToState.forEach(function(t,n){e[n]=t.varMap}),e},create:function(e,t,n){var a=e.getVarsMentioned(),r=new JoinBuilder(e,a,t,n),i=r.getRootNode();return i},createWithEmptyRoot:function(e,t){var n=VarUtils.varNamesToNodes(e),a=new JoinBuilder(null,n,t),r=a.getRootNode();return r}});module.exports=JoinBuilder;
},{"../../ext/Class":2,"../../util/collection/HashBidiMap":232,"../ElementUtils":120,"../GenSym":125,"../GeneratorBlacklist":127,"../VarUtils":138,"../element/ElementGroup":142,"../element/ElementOptional":143,"./JoinInfo":182,"./JoinNode":183,"./JoinTargetState":185,"./JoinType":186}],181:[function(require,module,exports){
var JoinBuilderUtils={getChildren:function(e){return e.getJoinNodes()}};module.exports=JoinBuilderUtils;
},{}],182:[function(require,module,exports){
var Class=require("../../ext/Class"),JoinInfo=Class.create({initialize:function(i,n){this.alias=i,this.joinType=n},getAlias:function(){return this.alias},getJoinType:function(){return this.joinType},toString:function(){return this.joinType+" "+this.alias}});module.exports=JoinInfo;
},{"../../ext/Class":2}],183:[function(require,module,exports){
var Class=require("../../ext/Class"),JoinNodeInfo=require("./JoinNodeInfo"),JoinType=require("./JoinType"),JoinNode=Class.create({initialize:function(i,n,e){this.joinBuilder=i,this.alias=n,this.targetJoinVars=e},getJoinBuilder:function(){return this.joinBuilder},getJoinVars:function(){return this.targetJoinVars},getElement:function(){return this.joinBuilder.getElement(this.alias)},getVarMap:function(){return this.joinBuilder.getVarMap(this.alias)},getJoinNodeInfos:function(){var i=this.joinBuilder.getState(this.alias),n=this,e=i.getJoinInfos().map(function(i){var e=i.getAlias(),t=n.joinBuilder.getJoinNode(e),o=new JoinNodeInfo(t,i.getJoinType());return o});return e},joinAny:function(i,n,e,t,o){var r=this.joinBuilder.addJoin(i,this.alias,n,e,t,o);return r},join:function(i,n,e,t){var o=this.joinAny(JoinType.INNER_JOIN,i,n,e,t);return o},leftJoin:function(i,n,e,t){var o=this.joinAny(JoinType.LEFT_JOIN,i,n,e,t);return o},joinTree:function(){},leftJoinTree:function(){},joinTreeAny:function(){}});module.exports=JoinNode;
},{"../../ext/Class":2,"./JoinNodeInfo":184,"./JoinType":186}],184:[function(require,module,exports){
var Class=require("../../ext/Class"),JoinNodeInfo=Class.create({initialize:function(i,n){this.joinNode=i,this.joinType=n},getJoinNode:function(){return this.joinNode},getJoinType:function(){return this.joinType},toString:function(){return this.joinType+" "+this.joinNode}});module.exports=JoinNodeInfo;
},{"../../ext/Class":2}],185:[function(require,module,exports){
var Class=require("../../ext/Class"),JoinTargetState=Class.create({initialize:function(t,e,n,i){this.varMap=t,this.joinNode=e,this.element=n,this.elementVars=i,this.joinInfos=[]},getVarMap:function(){return this.varMap},getJoinNode:function(){return this.joinNode},getElement:function(){return this.element},getElementVars:function(){return this.elementVars},getJoinInfos:function(){return this.joinInfos}});module.exports=JoinTargetState;
},{"../../ext/Class":2}],186:[function(require,module,exports){
var JoinType={INNER_JOIN:"inner_join",LEFT_JOIN:"left_join"};module.exports=JoinType;
},{}],187:[function(require,module,exports){
var ExprVar=require("../expr/ExprVar"),E_LangMatches=require("../expr/E_LangMatches"),E_LogicalOr=require("../expr/E_LogicalOr"),E_Lang=require("../expr/E_Lang"),E_Bound=require("../expr/E_Bound"),E_Regex=require("../expr/E_Regex"),E_Str=require("../expr/E_Str"),E_Function=require("../expr/E_Function"),Concept=require("../Concept"),ElementGroup=require("../element/ElementGroup"),ElementOptional=require("../element/ElementOptional"),ElementFilter=require("../element/ElementFilter"),NodeValueUtils=require("../NodeValueUtils"),LabelUtils=require("../LabelUtils"),KeywordSearchUtils={createConceptRegex:function(e,r){var n=e.getElement(),t=e.getSourceVar(),i=e.getTargetVar(),l=new ExprVar(t),E=new ExprVar(i),a=new E_Regex(new E_Str(E),r,"i"),o=new E_LogicalOr(new E_Regex(new E_Str(l),r,"i"),new E_Bound(E)),u=new ElementGroup([new ElementOptional(new ElementGroup([n,new ElementFilter(a)])),new ElementFilter(o)]),p=new Concept(u,t);return p},createConceptBifContains:function(e,r){var n=(e.getElement(),e.getTargetVar()),t=new ExprVar(n),i=NodeValueUtils.makeString(r),l=new ElementGroup([e.getElement(),new ElementFilter(new E_Function("<bif:contains>",[t,i]))]),E=e.getSourceVar(),a=new Concept(l,E);return a}};module.exports=KeywordSearchUtils;
},{"../Concept":117,"../LabelUtils":128,"../NodeValueUtils":129,"../element/ElementFilter":141,"../element/ElementGroup":142,"../element/ElementOptional":143,"../expr/E_Bound":151,"../expr/E_Function":155,"../expr/E_Lang":157,"../expr/E_LangMatches":158,"../expr/E_LogicalOr":163,"../expr/E_Regex":166,"../expr/E_Str":167,"../expr/ExprVar":176}],188:[function(require,module,exports){
var AccRef=require("./acc/AccRef"),AccUtils={getRefs:function(c,e){e=e||[];var f;if(c instanceof AccRef)e.push(c);else{var t=c.getSubAccs();t.forEach(function(c){f.collectRefs(c,e)})}return e}};module.exports=AccUtils;
},{"./acc/AccRef":203}],189:[function(require,module,exports){
var Class=require("../ext/Class"),ObjectUtils=require("../util/ObjectUtils"),AttrPath=Class.create({classLabel:"jassa.sponate.AttrPath",initialize:function(t){this.steps=t?t:[]},getSteps:function(){return this.steps},toString:function(){return this.steps.join(".")},slice:function(t,s){var e=this.steps.slice(t,s);return e},first:function(){return this.steps[0]},at:function(t){return this.steps[t]},isEmpty:function(){return 0===this.steps.length},size:function(){return this.steps.length},concat:function(t){var s=this.steps.concat(t.getSteps()),e=new AttrPath(s);return e},find:function(t){for(var s=t,e=this.steps,n=0;n<e.length;++n){var i=e[n];if(!ObjectUtils.isObject(s))throw console.log("[ERROR] Cannot access attribute of non-object",this.steps,t,s),"Bailing out";s=s[i]}return s}});AttrPath.parse=function(t){var s=t.split(".");return new AttrPath(s)},module.exports=AttrPath;
},{"../ext/Class":2,"../util/ObjectUtils":225}],190:[function(require,module,exports){
var ConceptUtils=require("../sparql/ConceptUtils"),LookupServiceSparqlQuery=require("../service/lookup_service/LookupServiceSparqlQuery"),LookupServiceTransform=require("../service/lookup_service/LookupServiceTransform"),LookupServiceUtils={createTransformAggResultSetPart:function(e){var r=function(r){var t=e.createAcc(),o=r.getBindings();o.forEach(function(e){t.accumulate(e)});var u=t.getValue();return u};return r},createLookupServiceMappedConcept:function(e,r){var t=r.getConcept(),o=ConceptUtils.createQueryList(t);o.setQueryResultStar(!0);var u=new LookupServiceSparqlQuery(e,o,t.getVar()),c=r.getAgg(),a=this.createTransformAggResultSetPart(c),i=new LookupServiceTransform(u,a);return i}};module.exports=LookupServiceUtils;
},{"../service/lookup_service/LookupServiceSparqlQuery":84,"../service/lookup_service/LookupServiceTransform":86,"../sparql/ConceptUtils":118}],191:[function(require,module,exports){
var Class=require("../ext/Class"),MappedConcept=Class.create({initialize:function(t,e){this.concept=t,this.agg=e},getConcept:function(){return this.concept},getAgg:function(){return this.agg}});module.exports=MappedConcept;
},{"../ext/Class":2}],192:[function(require,module,exports){
var NodeUtils=require("../rdf/NodeUtils"),LabelUtils=require("../sparql/LabelUtils"),VarUtils=require("../sparql/VarUtils"),ExprVar=require("../sparql/expr/ExprVar"),AggArray=require("./agg/AggArray"),AggLiteral=require("./agg/AggLiteral"),AggMap=require("./agg/AggMap"),AggObject=require("./agg/AggObject"),AggBestLabel=require("./agg/AggBestLabel"),AggTransform=require("./agg/AggTransform"),BindingMapperExpr=require("./binding_mapper/BindingMapperExpr"),BindingMapperTransform=require("./binding_mapper/BindingMapperTransform"),Concept=require("../sparql/Concept"),MappedConcept=require("./MappedConcept"),MappedConceptUtils={createMappedConceptBestLabel:function(e){var r=LabelUtils.createRelationPrefLabels(e),a=(r.getSourceVar(),r.getTargetVar()),g=new AggObject({displayLabel:new AggTransform(new AggBestLabel(e),NodeUtils.getValue),hiddenLabels:new AggArray(new AggTransform(new AggLiteral(new BindingMapperExpr(new ExprVar(a))),NodeUtils.getValue))}),p=new Concept(r.getElement(),r.getSourceVar()),i=new MappedConcept(p,g);return i}};module.exports=MappedConceptUtils;
},{"../rdf/NodeUtils":32,"../sparql/Concept":117,"../sparql/LabelUtils":128,"../sparql/VarUtils":138,"../sparql/expr/ExprVar":176,"./MappedConcept":191,"./agg/AggArray":206,"./agg/AggBestLabel":207,"./agg/AggLiteral":209,"./agg/AggMap":210,"./agg/AggObject":211,"./agg/AggTransform":213,"./binding_mapper/BindingMapperExpr":215,"./binding_mapper/BindingMapperTransform":217}],193:[function(require,module,exports){
var Class=require("../ext/Class"),MappingRef=Class.create({initialize:function(t,e){this.mapName=t,this.tableRef=e},getMapName:function(){return this.mapName},getTableRef:function(){return this.tableRef},getAttrPath:function(){return this.attrPath},toString:function(){var t=this.patternRef+"/"+this.tableRef+"@"+this.attrPath;return t}});module.exports=MappingRef;
},{"../ext/Class":2}],194:[function(require,module,exports){
var Class=require("../ext/Class"),Query=Class.create({initialize:function(t,i,e,n,s,o,r){this.mappingName=t,this.criteria=i,this.limit=e,this.offset=n,this.concept=s,this._isLeftJoin=o,this.nodes=r},shallowClone:function(){var t=new Query(this.mappingName,this.criteria,this.limit,this.offset,this.concept,this._isLeftJoin,this.nodes);return t},getMappingName:function(){return this.mappingName},setMappingName:function(){this.mappingName=this.mappingName},getCriteria:function(){return this.criteria},setCriteria:function(t){this.criteria=t},getLimit:function(){return this.limit},setLimit:function(t){this.limit=t},getOffset:function(){return this.offset},setOffset:function(t){this.offset=t},getConcept:function(){return this.concept},setConcept:function(t){this.concept=t},isLeftJoin:function(){return this._isLeftJoin},setLeftJoin:function(t){this._isLeftJoin=t},getNodes:function(){return this.nodes},setNodes:function(t){this.nodes=t}});module.exports=Query;
},{"../ext/Class":2}],195:[function(require,module,exports){
var Class=require("../ext/Class"),RefSpec=Class.create({initialize:function(e,t,r,i){this.sourceMapRef=e,this.targetMapRef=t,this.isArray=r,this.joinTableRef=i},getSourceMapRef:function(){return this.sourceMapRef},getTargetMapRef:function(){return this.targetMapRef},isArray:function(){return this.isArray},getJoinTableRef:function(){return this.joinTableRef},toString:function(){var e=this.sourceMapRef+" references "+this.targetMapRef+" via "+this.joinTableRef+" as array? "+this.isArray;return e}});module.exports=RefSpec;
},{"../ext/Class":2}],196:[function(require,module,exports){
var Class=require("../ext/Class"),ObjectUtils=require("../util/ObjectUtils"),Node=require("../rdf/node/Node"),NodeFactory=require("../rdf/NodeFactory"),Expr=require("../sparql/expr/Expr"),ExprVar=require("../sparql/expr/ExprVar"),NodeValue=require("../sparql/expr/NodeValue"),AggLiteral=require("./agg/AggLiteral"),AggObject=require("./agg/AggObject"),AggMap=require("./agg/AggMap"),AggCustomAgg=require("./agg/AggMap"),AggRef=require("./agg/AggRef"),TemplateParser=Class.create({initialize:function(){this.attrs={id:"id",ref:"ref"}},parseArray:function(e){if(1!==e.length)throw console.log("[ERROR] Arrays must have exactly one element that is either a string or an object",e),"Bailing out";var r,t=e[0];if(ObjectUtils.isString(t))r=this.parseArrayLiteral(t);else{if(!ObjectUtils.isObject(t))throw"Bailing out";r=this.parseArrayConfig(t)}return r},parseArrayConfig:function(e){var r=this.attrs.id,t=this.attrs.ref,a=null!=e[r],i=null!=e[t];if(a&&i)throw console.log("[ERROR] id and ref are mutually exclusive"),"Bailing out";var s;if(a){var n=this.parseObject(e),g=n.getPattern(r),l=g.getExpr();s=new AggMap(l,n,!0)}else{if(!i)throw console.log("[ERROR] Not implemented"),"Bailing out";s=this.parseArrayRef(e)}return s},parseArrayRef:function(e){var r=new AggRef(e);return r},parseArrayLiteral:function(){},parseLiteral:function(e){var r=this.parseExprString(e),t=new AggLiteral(r);return t},parseObject:function(e){var r={},t=this;e.forEach(function(e,a){var i=t.parsePattern(e);r[a]=i});var a=new AggObject(r);return a},parsePattern:function(e){var r;if(ObjectUtils.isString(e))r=this.parseLiteral(e);else if(ObjectUtils.isArray(e))r=this.parseArray(e);else{if(ObjectUtils.isFunction(e))throw new Error("Implement this case");if(e instanceof Node&&e.isVariable()){var t=new ExprVar(e);r=new AggLiteral(t)}else if(e instanceof Expr)r=new AggLiteral(e);else{if(!ObjectUtils.isObject(e))throw console.log("[ERROR] Unknown item type: ",e),"Unkown item type";var a=e.createAgg;r=a?new AggCustomAgg(e):this.parseObject(e)}}return r},parseExpr:function(e){var r;return ObjectUtils.isString(e)&&(r=this.parseExprString(e)),r},parseExprString:function(e){var r;if("?"===e.charAt(0)){var t=e.substr(1),a=NodeFactory.createVar(t);r=new ExprVar(a)}else r=NodeValue.makeString(e);return r}});module.exports=TemplateParser;
},{"../ext/Class":2,"../rdf/NodeFactory":31,"../rdf/node/Node":43,"../sparql/expr/Expr":168,"../sparql/expr/ExprVar":176,"../sparql/expr/NodeValue":177,"../util/ObjectUtils":225,"./agg/AggLiteral":209,"./agg/AggMap":210,"./agg/AggObject":211,"./agg/AggRef":212}],197:[function(require,module,exports){
var Class=require("../../ext/Class"),Acc=Class.create({classLabel:"jassa.sponate.acc",accumulate:function(){throw new Error("override me")},getValue:function(){throw new Error("override me")},getSubAccs:function(){throw new Error("override me")}});module.exports=Acc;
},{"../../ext/Class":2}],198:[function(require,module,exports){
var Class=require("../../ext/Class"),BindingMapperIndex=require("../binding_mapper/BindingMapperIndex"),Acc=require("./Acc"),AccFn=Class.create(Acc,{classLabel:"jassa.sponate.AccFn",initialize:function(c,i){this.i=0,this.subAgg=c,this.indexBindingMapper=i||new BindingMapperIndex,this.subAccs=[]},accumulate:function(c){var i=this.indexBindingMapper.map(c,this.i++);if(null!=i){var n=this.subAccs[i];n||(n=this.subAgg.createAcc(),this.subAccs[i]=n),n.accumulate(c)}},getValue:function(){var c=[];return this.subAccs.forEach(function(i,n){var e=i.getValue();c[n]=e}),c},getSubAccs:function(){var c=[];return this.subAccs.forEach(function(i){i&&c.push(i)}),c}});module.exports=AccFn;
},{"../../ext/Class":2,"../binding_mapper/BindingMapperIndex":216,"./Acc":197}],199:[function(require,module,exports){
var Class=require("../../ext/Class"),NodeUtils=require("../../rdf/NodeUtils"),Acc=require("./Acc"),zip=function(e,t){for(var r=[],a=Math.max(e.length,t.length),n=0;a>n;++n){{[e[n],t[n]]}r.push(n)}return r},compareArray=function(e,t,r){for(var a=!1,n=Math.max(e.length,t.length),i=0;n>i;++i){var c=e[i],s=t[i];if(r(c,s)){if(r(s,c))continue;a=!0;break}if(r(s,c)){a=!1;break}}return a},cmpLessThan=function(e,t){return t>e},indexOf=function(e,t){for(var r=-1,a=0;a<e.length;++a){var n=e[a];if(n.equals(t)){r=a;break}}return r},extractLabelFromUri=function(e){var t=e.lastIndexOf("#"),r=e.lastIndexOf("/"),a=Math.max(t,r),n=a===e.length?e:e.substring(a+1);return""===n&&(n=e),n},AccBestLabel=Class.create(Acc,{initialize:function(e){this.bestLiteralConfig=e,this.bestMatchNode=null,this.bestMatchScore=[1e3,1e3]},getSubAccs:function(){return[]},accumulate:function(e){var t=this.bestLiteralConfig,r=e.get(t.getSubjectVar()),a=e.get(t.getPredicateVar()),n=e.get(t.getObjectVar());null==this.bestMatchNode&&(this.bestMatchNode=r);var i=NodeUtils.getLang(n),c=indexOf(t.getPredicates(),a),s=t.getLangs().indexOf(i),u=[c,s],o=u.every(function(e){return e>=0});if(o){var h=compareArray(u,this.bestMatchScore,cmpLessThan);h===!0&&(this.bestMatchScore=u,this.bestMatchNode=n)}},getValue:function(){return this.bestMatchNode}});module.exports=AccBestLabel;
},{"../../ext/Class":2,"../../rdf/NodeUtils":32,"./Acc":197}],200:[function(require,module,exports){
var Class=require("../../ext/Class"),ObjectUtils=require("../../util/ObjectUtils"),Acc=require("./Acc"),AccLiteral=Class.create(Acc,{classLabel:"jassa.sponate.AccLiteral",initialize:function(e){this.bindingMapper=e,this.value=null},accumulate:function(e){var i=this.bindingMapper.map(e,0);null==this.value||ObjectUtils.isEqual(this.value,i)||console.log("[WARN] Reassigned value: Original",this.value," New: ",i),this.value=i},getValue:function(){return this.value},getSubAccs:function(){return[]}});module.exports=AccLiteral;
},{"../../ext/Class":2,"../../util/ObjectUtils":225,"./Acc":197}],201:[function(require,module,exports){
var Class=require("../../ext/Class"),HashMap=require("../../util/collection/HashMap"),Acc=require("./Acc"),AccMap=Class.create(Acc,{classLabel:"jassa.sponate.AccMap",initialize:function(t,a){this.keyBindingMapper=t,this.subAgg=a,this.state=new HashMap},accumulate:function(t){var a=this.keyBindingMapper.map(t,0),e=this.state.get(a);e||(e=this.subAgg.createAcc(),this.state.put(a,e)),e.accumulate(t)},getValue:function(){var t=new HashMap,a=this.state.entries();return a.forEach(function(a){var e=a.key,s=a.val,c=s.getValue();t.put(e,c)}),t},getSubAccs:function(){var t=[],a=this.state.entries();return a.forEach(function(a){t.push(a)}),t}});module.exports=AccMap;
},{"../../ext/Class":2,"../../util/collection/HashMap":233,"./Acc":197}],202:[function(require,module,exports){
var forEach=require("lodash.foreach"),Class=require("../../ext/Class"),Acc=require("./Acc"),AccObject=Class.create(Acc,{classLabel:"jassa.sponate.AccObject",initialize:function(c){this.attrToAcc=c},accumulate:function(c){forEach(this.attrToAcc,function(t){t.accumulate(c)})},getValue:function(){var c={};return forEach(this.attrToAcc,function(t,a){var e=t.getValue();c[a]=e}),c},getSubAccs:function(){var c=[];return forEach(this.attrToAcc,function(t){c.push(t)}),c}});module.exports=AccObject;
},{"../../ext/Class":2,"./Acc":197,"lodash.foreach":324}],203:[function(require,module,exports){
var Class=require("../../ext/Class"),Acc=require("./Acc"),AccRef=Class.create(Acc,{classLabel:"jassa.sponate.AccRef",initialize:function(c,e){this.subAcc=c,this.refSpec=e,this.value=null},accumulate:function(c){this.subAcc.accumulate(c)},getValue:function(){return this.json},setValue:function(c){this.value=c}});module.exports=AccRef;
},{"../../ext/Class":2,"./Acc":197}],204:[function(require,module,exports){
var Class=require("../../ext/Class"),Acc=require("./Acc"),AccTransform=Class.create(Acc,{classLabel:"jassa.sponate.AccTransform",initialize:function(c,s){this.subAcc=c,this.fn=s},accumulate:function(c){this.subAcc.accumulate(c)},getValue:function(){var c=this.subAcc.getValue(),s=this.fn(c);return s}});module.exports=AccTransform;
},{"../../ext/Class":2,"./Acc":197}],205:[function(require,module,exports){
var Class=require("../../ext/Class"),Agg=Class.create({classLabel:"jassa.sponate.Agg",createAcc:function(){throw new Error("override me")},getSubAggs:function(){throw new Error("override me")}});module.exports=Agg;
},{"../../ext/Class":2}],206:[function(require,module,exports){
var Class=require("../../ext/Class"),Agg=require("./Agg"),AccArray=require("../acc/AccArray"),AggArray=Class.create(Agg,{classLabel:"jassa.sponate.AggArray",initialize:function(r,g){this.subAgg=r,this.indexBindingMapper=g},createAcc:function(){var r=new AccArray(this.subAgg,this.indexBindingMapper);return r},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},toString:function(){return this.expr.toString()}});module.exports=AggArray;
},{"../../ext/Class":2,"../acc/AccArray":198,"./Agg":205}],207:[function(require,module,exports){
var union=require("lodash.union"),Class=require("../../ext/Class"),Agg=require("./Agg"),AccBestLiteral=require("../acc/AccBestLabel"),AggBestLabel=Class.create(Agg,{initialize:function(e){this.bestLiteralConfig=e},createAcc:function(){var e=new AccBestLiteral(this.bestLiteralConfig);return e},getSubAggs:function(){return[]},toString:function(){"bestLabel["+this.bestLiteralConfig+"]"}});module.exports=AggBestLabel;
},{"../../ext/Class":2,"../acc/AccBestLabel":199,"./Agg":205,"lodash.union":387}],208:[function(require,module,exports){
var Class=require("../../ext/Class"),Agg=require("./Agg"),AggCustomAgg=Class.create(Agg,{classLabel:"jassa.sponate.AggCustomAgg",initialize:function(g){this.fnAcc=g},getSubAggs:function(){return[]}});module.exports=AggCustomAgg;
},{"../../ext/Class":2,"./Agg":205}],209:[function(require,module,exports){
var Class=require("../../ext/Class"),Agg=require("./Agg"),AccLiteral=require("../acc/AccLiteral"),AggLiteral=Class.create(Agg,{classLabel:"jassa.sponate.AggLiteral",initialize:function(e){this.bindingMapper=e},getSubAggs:function(){return[]},createAcc:function(){var e=new AccLiteral(this.bindingMapper);return e}});module.exports=AggLiteral;
},{"../../ext/Class":2,"../acc/AccLiteral":200,"./Agg":205}],210:[function(require,module,exports){
var Class=require("../../ext/Class"),AggBase=require("./Agg"),AccMap=require("../acc/AccMap"),AggMap=Class.create(AggBase,{classLabel:"jassa.sponate.AggMap",initialize:function(g,e){this.keyBindingMapper=g,this.subAgg=e},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var g=new AccMap(this.keyBindingMapper,this.subAgg);return g},toString:function(){var g="["+this.keyExpr+" -> "+this.subAgg+"]";return g}});module.exports=AggMap;
},{"../../ext/Class":2,"../acc/AccMap":201,"./Agg":205}],211:[function(require,module,exports){
var forEach=require("lodash.foreach"),Class=require("../../ext/Class"),Agg=require("./Agg"),AccObject=require("../acc/AccObject"),AggObject=Class.create(Agg,{classLabel:"jassa.sponate.AggObject",initialize:function(t){this.attrToAggr=t},getMembers:function(){return this.attrToAggr},createAcc:function(){var t={};forEach(this.attrToAggr,function(r,e){var c=r.createAcc();t[e]=c});var r=new AccObject(t);return r},getSubAggs:function(){var t=[];return forEach(this.attrToAggr,function(r){t.push(r)}),t},toString:function(){var t=[];this.attrToPattern.forEach(function(r,e){t.push('"'+e+'": '+r)});var r="{"+t.join(",")+"}";return r}});module.exports=AggObject;
},{"../../ext/Class":2,"../acc/AccObject":202,"./Agg":205,"lodash.foreach":324}],212:[function(require,module,exports){
var Class=require("../../ext/Class"),NodeFactory=require("../../rdf/NodeFactory"),AccRef=require("../acc/AccRef"),Agg=require("./Agg"),AggRef=Class.create(Agg,{classLabel:"jassa.sponate.AggRef",initialize:function(e,r){this.subAgg=e,this.refSpec=r},getRefSpec:function(){return this.refSpec},getSubAggs:function(){return[]},createAcc:function(){var e=new AccRef(this.subAgg,this.refSpec);return e},toString:function(){return JSON.stringify(this)}});module.exports=AggRef;
},{"../../ext/Class":2,"../../rdf/NodeFactory":31,"../acc/AccRef":203,"./Agg":205}],213:[function(require,module,exports){
var Class=require("../../ext/Class"),NodeFactory=require("../../rdf/NodeFactory"),AccTransform=require("../acc/AccTransform"),Agg=require("./Agg"),AggTransform=Class.create(Agg,{classLabel:"jassa.sponate.AggTransform",initialize:function(r,s){this.subAgg=r,this.fn=s},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var r=this.subAgg.createAcc(),s=new AccTransform(r,this.fn);return s},toString:function(){return JSON.stringify(this)}});module.exports=AggTransform;
},{"../../ext/Class":2,"../../rdf/NodeFactory":31,"../acc/AccTransform":204,"./Agg":205}],214:[function(require,module,exports){
var Class=require("../../ext/Class"),BindingMapper=Class.create({map:function(){throw new Error("Not overridden")}});module.exports=BindingMapper;
},{"../../ext/Class":2}],215:[function(require,module,exports){
var Class=require("../../ext/Class"),BindingMapper=require("./BindingMapper"),BindingMapperExpr=Class.create(BindingMapper,{initialize:function(e){this.expr=e},map:function(e){var i=this.expr.eval(e),r=i.asNode();return r}});module.exports=BindingMapperExpr;
},{"../../ext/Class":2,"./BindingMapper":214}],216:[function(require,module,exports){
var Class=require("../../ext/Class"),BindingMapper=require("./BindingMapper"),BindingMapperIndex=Class.create(BindingMapper,{map:function(e,n){return n}});module.exports=BindingMapperIndex;
},{"../../ext/Class":2,"./BindingMapper":214}],217:[function(require,module,exports){
var Class=require("../../ext/Class"),BindingMapper=require("./BindingMapper"),BindingMapperTransform=Class.create(BindingMapper,{initialize:function(i,n){this.subBindingMapper=i,this.fn=n},map:function(i,n){var r=this.subBindingMapper.map(i,n),a=this.fn(r);return a}});module.exports=BindingMapperTransform;
},{"../../ext/Class":2,"./BindingMapper":214}],218:[function(require,module,exports){
"use strict";var ns={AccUtils:require("./AccUtils"),AttrPath:require("./AttrPath"),LookupServiceUtils:require("./LookupServiceUtils"),MappedConcept:require("./MappedConcept"),MappedConceptUtils:require("./MappedConceptUtils"),MappingRef:require("./MappingRef"),Query:require("./Query"),RefSpec:require("./RefSpec"),TemplateParser:require("./TemplateParser"),Acc:require("./acc/Acc"),AccArray:require("./acc/AccArray"),AccBestLabel:require("./acc/AccBestLabel"),AccLiteral:require("./acc/AccLiteral"),AccMap:require("./acc/AccMap"),AccObject:require("./acc/AccObject"),AccRef:require("./acc/AccRef"),AccTransform:require("./acc/AccTransform"),Agg:require("./agg/Agg"),AggArray:require("./agg/AggArray"),AggBestLabel:require("./agg/AggBestLabel"),AggCustomAcc:require("./agg/AggCustomAcc"),AggLiteral:require("./agg/AggLiteral"),AggMap:require("./agg/AggMap"),AggObject:require("./agg/AggObject"),AggRef:require("./agg/AggRef"),AggTransform:require("./agg/AggTransform"),BindingMapper:require("./binding_mapper/BindingMapper"),BindingMapperExpr:require("./binding_mapper/BindingMapperExpr"),BindingMapperIndex:require("./binding_mapper/BindingMapperIndex"),BindingMapperTransform:require("./binding_mapper/BindingMapperTransform")};Object.freeze(ns),module.exports=ns;
},{"./AccUtils":188,"./AttrPath":189,"./LookupServiceUtils":190,"./MappedConcept":191,"./MappedConceptUtils":192,"./MappingRef":193,"./Query":194,"./RefSpec":195,"./TemplateParser":196,"./acc/Acc":197,"./acc/AccArray":198,"./acc/AccBestLabel":199,"./acc/AccLiteral":200,"./acc/AccMap":201,"./acc/AccObject":202,"./acc/AccRef":203,"./acc/AccTransform":204,"./agg/Agg":205,"./agg/AggArray":206,"./agg/AggBestLabel":207,"./agg/AggCustomAcc":208,"./agg/AggLiteral":209,"./agg/AggMap":210,"./agg/AggObject":211,"./agg/AggRef":212,"./agg/AggTransform":213,"./binding_mapper/BindingMapper":214,"./binding_mapper/BindingMapperExpr":215,"./binding_mapper/BindingMapperIndex":216,"./binding_mapper/BindingMapperTransform":217}],219:[function(require,module,exports){
var ObjectUtils=require("./ObjectUtils"),ArrayUtils={addAll:function(r,e){return r.push.apply(r,e)},chunk:function(r,e){for(var t=[],n=0;n<r.length;n+=e){var i=r.slice(n,n+e);t.push(i)}return t},clear:function(r){for(;r.length>0;)r.pop()},replace:function(r,e){this.clear(r),e&&r.push.apply(r,e)},filter:function(r,e){var t=r.filter(e);return this.replace(r,t),r},indexesOf:function(r,e,t){t=t||ObjectUtils.isEqual;var n=[];return r.forEach(function(r,i){var u=t(e,r);u&&n.push(i)}),n},grep:function(r,e){var t=[];return r.forEach(function(r,n){var i=e(r,n);i&&t.push(n)}),t},copyWithoutIndexes:function(r,e){var t={};e.forEach(function(r){t[r]=!0});for(var n=[],i=0;i<r.length;++i){var u=t[i];u||n.push(r[i])}return n},removeIndexes:function(r,e){var t=this.copyWithoutIndexes(r,e);return this.replace(r,t),r},removeByGrep:function(r,e){var t=this.grep(r,e);this.removeIndexes(r,t)}};module.exports=ArrayUtils;
},{"./ObjectUtils":225}],220:[function(require,module,exports){
var CollectionUtils={toggleItem:function(o,t){var e;return o.contains(t)?(o.remove(t),e=!1):(o.add(t),e=!0),e}};module.exports=CollectionUtils;
},{}],221:[function(require,module,exports){
var JSONCanonical=require("../ext/JSONCanonical"),isObject=function(n){var i=typeof n;return"function"===i||"object"===i&&Boolean(n)},JsonUtils={stringifyCyclic:function(n,i){var t=[],r=JSONCanonical.stringify(n,function(n,r){if(isObject(r)){if(t.indexOf(r)>=0)return;t.push(r),i&&(r=i(n,r))}return r});return r}};module.exports=JsonUtils;
},{"../ext/JSONCanonical":3}],222:[function(require,module,exports){
var HashMap=require("./collection/HashMap"),ObjectUtils=require("./ObjectUtils"),MapUtils={indexBy:function(t,e,i){i=i||new HashMap;var r;return r=ObjectUtils.isString(e)?function(t){return t[e]}:e,t.forEach(function(t){var e=r(t);i.put(e,t)}),i}};module.exports=MapUtils;
},{"./ObjectUtils":225,"./collection/HashMap":233}],223:[function(require,module,exports){
var MultiMapUtils={get:function(t,n){return n in t?t[n]:[]},put:function(t,n,e){var i;n in t?i=t[n]:(i=[],t[n]=i),i.push(e)},clear:function(t){var n=Object.keys(t);n.forEach(function(n){delete t[n]})}};module.exports=MultiMapUtils;
},{}],224:[function(require,module,exports){
var Class=require("../ext/Class"),flatten=require("lodash.flatten"),NestedList=Class.create({classLabel:"jassa.util.NestedList",initialize:function(){this.subLists=[]},getArray:function(){var t=this.subLists.forEach(function(t){return t.getArray()}),s=flatten(t,!0);return s},contains:function(t){var s=this.subLists.find(function(s){var e=s.contains(t);return e}),e=Boolean(s);return e}});module.exports=NestedList;
},{"../ext/Class":2,"lodash.flatten":255}],225:[function(require,module,exports){
var isEqual=require("lodash.isequal"),JsonUtils=require("./JsonUtils"),ObjectUtils={isObject:function(t){var n=typeof t;return"function"===n||"object"===n&&Boolean(t)},isFunction:function(t){return"function"==typeof t},isString:function(t){return"[object String]"===Object.toString.call(t)},extend:function(t,n){var e;for(e in n)hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},isEqual:function(t,n){var e;return e=t&&t.equals?t.equals(n):n&&n.equals?n.equals(t):isEqual(t,n)},defaultHashCode:function(t){var n;return n=t&&t.hashCode?t.hashCode():t.toString()},identity:function(t){return t},hashCode:function(t,n){var e=JsonUtils.stringifyCyclic(t,function(t,e){var i=null;if(!n&&ObjectUtils.isObject(e)){var r=null;ObjectUtils.defaultHashFnNames.some(function(t){return ObjectUtils.isFunction(e[t])?(r=t,!0):void 0});var s=e[r];i=s?s.apply(e):e}else i=e;return n&&(n=!1),i});return e}};ObjectUtils.defaultHashFnNames=["hashCode"],module.exports=ObjectUtils;
},{"./JsonUtils":221,"lodash.isequal":354}],226:[function(require,module,exports){
var Class=require("../ext/Class"),HashMap=require("./collection/HashMap"),ObjectUtils=require("./ObjectUtils"),SerializationContext=Class.create({initialize:function(){this._nextId=1,this.objToId=new HashMap(function(t,e){return t===e},function(t){return ObjectUtils.hashCode(t)}),this.idToState={}},nextId:function(){var t=(this._nextId++).toString();return t},getIdToState:function(){return this.idToState},getObjToId:function(){return this.objToId}});module.exports=SerializationContext;
},{"../ext/Class":2,"./ObjectUtils":225,"./collection/HashMap":233}],227:[function(require,module,exports){
var Class=require("../ext/Class"),ObjectUtils=require("./ObjectUtils"),SerializationContext=require("./SerializationContext"),Serializer=Class.create({initialize:function(){this.classNameToClass={},this.classNameToFnSerialize={},this.classNameToFnDeserialize={},this.classNameToPrototype={}},registerOverride:function(e,t,a){this.classNameToFnSerialize[e]=t,this.classNameToFnDeserialize[e]=a},indexClasses:function(e){var t=this.findClasses(e);return ObjectUtils.extend(this.classNameToClass,t),t},findClasses:function(e){var t={};return e.forEach(function(e){var a=e.classLabel||(e.prototype?e.prototype.classLabel:null);a&&(t[a]=e)}),t},getLabelForClass:function(e){var t,a=Object.getPrototypeOf(e);return this.classNameToClass.find(function(e,i){return a===e.prototype?(t=i,!0):void 0}),t},getClassForLabel:function(e){var t;return this.classNameToClass.find(function(a,i){return i===e?(t=a,!0):void 0}),t},serialize:function(e,t){t=t||new SerializationContext;var a=this.serializeRec(e,t),i={root:a,idToState:t.getIdToState()};return i},serializeRec:function(e,t){var a,i=t.getObjToId(),s=i.get(e);s||(s=t.nextId(),i.put(e,s));var r=t.getIdToState(),l=r[s];if(l)a={ref:s};else if(ObjectUtils.isFunction(e))a=void 0;else if(ObjectUtils.isObject(e)){a={};var n=this.getLabelForClass(e),o=function(e){var t=Boolean(e)||"[object Number]"===Object.toString.call(e)||"[object Date]"===Object.toString.call(e)||"[object String]"===Object.toString.call(e)||"[object RegExp]"===Object.toString.call(e);return t},c=function(e){var t=e.prototype,a=ObjectUtils.isObject(e)&&!o(e),i=a&&null==t;return i},u=o(e)||c(e)||Array.isArray(e);if(null==n&&!u)throw console.log("Failed to serialize instance without class label",e),"Failed to serialize instance without class label";var f;if(n&&(f=this.classNameToPrototype[n],!f)){var b=this.getClassForLabel(n);if(b)try{f=new b,this.classNameToPrototype[n]=f}catch(h){console.log("[WARN] Failed to create a prototype instance of class "+n,h)}}f||(f={});var v=this.serializeAttrs(e,t,f),d={};n&&(d.classLabel=n),Object.keys(v).length>0&&(d.attrs=v.attrs,null!=v.parent&&(d.parent=v.parent)),Array.isArray(e)&&(d.length=e.length),r[s]=d,a={ref:s}}else a={value:e};return a},serializeAttrs:function(e,t,a){var i={},s=i,r=s.attrs={},l=this,n=Object.keys(e);return n.forEach(function(i){var s=e[i],n=l.serializeRec(s,t),o=a[i],c=ObjectUtils.isEqual(n,o)||null==n&&null==o;c||n&&(r[i]=n)}),i},deserialize:function(e){var t=e.root,a=e.idToState,i={},s=this.deserializeRef(t,a,i);return s},deserializeRef:function(e,t,a){var i,s=e.ref,r=e.value;if(null!=s){var l=s in a;i=l?a[s]:this.deserializeState(s,t,a)}else i=r;return i},deserializeState:function(e,t,a){var i,s=t[e];if(null==s||!ObjectUtils.isObject(s))throw console.log("State must be an object, was: ",s),"Deserialization error";var r=s.attrs,l=s.classLabel,n=s.length;if(l){var o=this.getClassForLabel(l);if(!o)throw"Unknown class label encountered in deserialization: "+l;i=new o}else i=null!=n?[]:{};a[e]=i;var c=this;if(null!=r){var u=Object.keys(r);u.forEach(function(e){var s=r[e],l=c.deserializeRef(s,t,a);i[e]=l})}return null!=n&&(i.length=n),i}});module.exports=new Serializer;
},{"../ext/Class":2,"./ObjectUtils":225,"./SerializationContext":226}],228:[function(require,module,exports){
var uniq=require("lodash.uniq"),StringUtils={extractAllRegexMatches:function(e,r,t){for(var i,n=[];null!=(i=e.exec(r));)n.push(i[t]);return n=uniq(n)}};module.exports=StringUtils;
},{"lodash.uniq":410}],229:[function(require,module,exports){
var TreeUtils={visitDepthFirst:function(t,e,r){var i=r(t);if(i){var n=e(t);n.forEach(function(t){TreeUtils.visitDepthFirst(t,e,r)})}},flattenTree:function(t,e,r){null==r&&(r=[]),t&&r.push(t);var i=t[e],n=this;return i&&i.forEach(function(t){n.flattenTree(t,e,r)}),r}};module.exports=TreeUtils;
},{}],230:[function(require,module,exports){
var Class=require("../../ext/Class"),ObjectUtils=require("../ObjectUtils"),ArrayList=Class.create({initialize:function(t){this.items=[],this.fnEquals=t||ObjectUtils.equals},setItems:function(t){this.items=t},getArray:function(){return this.items},get:function(t){var e=this.items[t];return e},add:function(t){this.items.push(t)},indexesOf:function(t){var e=this.items,i=this.fnEquals,n=[];return e.forEach(function(e,s){var r=i(t,e);r&&n.push(s)}),n},contains:function(t){var e=this.indexesOf(t),i=e.length>0;return i},firstIndexOf:function(t){var e=this.indexesOf(t),i=e.length>0?e[0]:-1;return i},lastIndexOf:function(t){var e=this.indexesOf(t),i=e.length>0?e[e.length-1]:-1;return i},remove:function(t){var e=this.firstIndexOf(t);e>=0&&this.removeByIndex(e)},removeByIndex:function(t){this.items.splice(t,1)},size:function(){return this.items.length}});module.exports=ArrayList;
},{"../../ext/Class":2,"../ObjectUtils":225}],231:[function(require,module,exports){
var Class=require("../../ext/Class"),Entry=Class.create({initialize:function(t,e){this.key=t,this.value=e},getKey:function(){return this.key},getValue:function(){return this.value},toString:function(){return this.key+"->"+this.value}});module.exports=Entry;
},{"../../ext/Class":2}],232:[function(require,module,exports){
var Class=require("../../ext/Class"),HashMap=require("./HashMap"),HashBidiMap=Class.create({initialize:function(r,e,i){this.forward=new HashMap(r,e),this.inverse=i?i:new HashBidiMap(r,e,this)},getInverse:function(){return this.inverse},put:function(r,e){this.remove(r),this.forward.put(r,e),this.inverse.forward.put(e,r)},remove:function(r){var e=this.get(r);this.inverse.forward.remove(e),this.forward.remove(r)},getMap:function(){return this.forward},get:function(r){var e=this.forward.get(r);return e},keyList:function(){var r=this.forward.keyList();return r}});module.exports=HashBidiMap;
},{"../../ext/Class":2,"./HashMap":233}],233:[function(require,module,exports){
var forEach=require("lodash.foreach"),Class=require("../../ext/Class"),ObjectUtils=require("./../ObjectUtils"),HashMap=Class.create({initialize:function(t,n){this.fnEquals=t?t:ObjectUtils.isEqual,this.fnHash=n?n:ObjectUtils.hashCode,this.hashToBucket={}},putAll:function(t){var n=this;return t.entries().forEach(function(t){n.put(t.key,t.val)}),this},put:function(t,n){var e=this.fnHash(t),i=this.hashToBucket[e];null==i&&(i=[],this.hashToBucket[e]=i);var s=this._indexOfKey(i,t);if(s>=0)return void(i[s].val=n);var r={key:t,val:n};i.push(r)},_indexOfKey:function(t,n){if(null!=t)for(var e=0;e<t.length;++e){var i=t[e],s=i.key;if(this.fnEquals(s,n))return e}return-1},get:function(t){var n=this.fnHash(t),e=this.hashToBucket[n],i=this._indexOfKey(e,t),s=i>=0?e[i].val:null;return s},remove:function(t){var n=this.fnHash(t),e=this.hashToBucket[n],i=this._indexOfKey(e,t),s=i>=0;return s&&e.splice(i,1),s},containsKey:function(t){var n=this.fnHash(t),e=this.hashToBucket[n],i=this._indexOfKey(e,t)>=0;return i},keyList:function(){var t=[];return forEach(this.hashToBucket,function(n){var e=[];n.forEach(function(t){t.key&&e.push(t.key)}),t.push.apply(t,e)}),t},values:function(){var t=this.entries(),n=t.map(function(t){return t.val});return n},entries:function(){var t=[];return forEach(this.hashToBucket,function(n){t.push.apply(t,n)}),t},toString:function(){var t=this.entries(),n=t.map(function(t){return t.key+": "+t.val}),e="{"+n.join(", ")+"}";return e}});module.exports=HashMap;
},{"../../ext/Class":2,"./../ObjectUtils":225,"lodash.foreach":324}],234:[function(require,module,exports){
var Class=require("../../ext/Class"),HashMap=require("./HashMap"),HashSet=Class.create({initialize:function(t,e){this.map=new HashMap(t,e)},add:function(t){this.map.put(t,!0)},contains:function(t){var e=this.map.containsKey(t);return e},remove:function(t){this.map.remove(t)},entries:function(){var t=this.map.entries().map(function(t){return t.key});return t},toString:function(){var t=this.entries(),e="{"+t.join(", ")+"}";return e}});module.exports=HashSet;
},{"../../ext/Class":2,"./HashMap":233}],235:[function(require,module,exports){
var Class=require("../../ext/Class"),Iterator=Class.create({next:function(){throw"Not overridden"},hasNext:function(){throw"Not overridden"}});module.exports=Iterator;
},{"../../ext/Class":2}],236:[function(require,module,exports){
var Class=require("../../ext/Class"),Iterator=require("./Iterator"),IteratorAbstract=Class.create(Iterator,{initialize:function(){this.current=null,this.advance=!0,this.finished=!1},finish:function(){return this.finished=!0,this.close(),null},$prefetch:function(){this.current=this.prefetch()},hasNext:function(){return this.advance&&(this.$prefetch(),this.advance=!1),this.finished===!1},next:function(){if(this.finished)throw"No more elments";return this.advance&&this.$prefetch(),this.advance=!0,this.current},prefetch:function(){throw"Not overridden"}});module.exports=IteratorAbstract;
},{"../../ext/Class":2,"./Iterator":235}],237:[function(require,module,exports){
var Class=require("../../ext/Class"),Iterator=require("./Iterator"),IteratorArray=Class.create(Iterator,{initialize:function(r,t){this.array=r,this.offset=t?t:0},getArray:function(){return this.array},hasNext:function(){var r=this.offset<this.array.length;return r},next:function(){var r,t=this.hasNext();return t?(r=this.array[this.offset],++this.offset):r=null,r}});module.exports=IteratorArray;
},{"../../ext/Class":2,"./Iterator":235}],238:[function(require,module,exports){
var Class=require("../../ext/Class"),HashMap=require("./HashMap"),ListMap=Class.create({initialize:function(e,t){this.map=new HashMap(e,t),this.keys=[]},put:function(e,t){var s=this.map.get(e);if(s)throw"Key "+s+" already inserted";this.keys.push(e),this.map.put(e,t)},get:function(e){var t=this.map.get(e);return t},getByIndex:function(e){var t=this.keys[e],s=this.map.get(t);return s},entries:function(){var e=this,t=this.keys.map(function(t){var s=e.map.get(t),i={key:t,val:s};return i});return t},remove:function(e){throw console.log(e),"Implement me"},removeByIndex:function(e){var t=this.keys[e];this.remove(t)},keyList:function(){return this.keys},size:function(){return this.keys.length}});module.exports=ListMap;
},{"../../ext/Class":2,"./HashMap":233}],239:[function(require,module,exports){
var Class=require("../../ext/Class"),MultiMapObjectArray=Class.create({initialize:function(){this.entries={}},clone:function(){var e=new MultiMapObjectArray;return e.addMultiMap(this),e},clear:function(){var e=Object.keys(this.entries);e.forEach(function(e){delete this.entries[e]})},addMultiMap:function(e){for(var t in e.entries)for(var i=e.entries[t],r=0;r<i.length;++r){var n=i[r];this.put(t,n)}},get:function(e){return e in this.entries?this.entries[e]:[]},put:function(e,t){var i;e in this.entries?i=this.entries[e]:(i=[],this.entries[e]=i),i.push(t)},removeKey:function(e){delete this.entries[e]}});module.exports=MultiMapObjectArray;
},{"../../ext/Class":2}],240:[function(require,module,exports){
var Class=require("../../ext/Class"),ObjectMap=Class.create({initialize:function(t){this.data=t?t:{}},get:function(t){return this.data[t]},put:function(t,e){this.data[t]=e},remove:function(t){delete this.data[t]},entries:function(){throw"Not implemented"},toString:function(){return JSON.stringify(this.data)}});module.exports=ObjectMap;
},{"../../ext/Class":2}],241:[function(require,module,exports){
"use strict";var ns={ArrayUtils:require("./ArrayUtils"),CollectionUtils:require("./CollectionUtils"),JsonUtils:require("./JsonUtils"),MapUtils:require("./MapUtils"),MultiMapUtils:require("./MultiMapUtils"),NestedList:require("./NestedList"),ObjectUtils:require("./ObjectUtils"),SerializationContext:require("./SerializationContext"),Serializer:require("./Serializer"),StringUtils:require("./StringUtils"),TreeUtils:require("./TreeUtils"),shared:require("./shared"),ArrayList:require("./collection/ArrayList"),Entry:require("./collection/Entry"),HashBidiMap:require("./collection/HashBidiMap"),HashMap:require("./collection/HashMap"),HashSet:require("./collection/HashSet"),Iterator:require("./collection/Iterator"),IteratorAbstract:require("./collection/IteratorAbstract"),IteratorArray:require("./collection/IteratorArray"),ListMap:require("./collection/ListMap"),MultiMapObjectArray:require("./collection/MultiMapObjectArray"),ObjectMap:require("./collection/ObjectMap")};Object.freeze(ns),module.exports=ns;
},{"./ArrayUtils":219,"./CollectionUtils":220,"./JsonUtils":221,"./MapUtils":222,"./MultiMapUtils":223,"./NestedList":224,"./ObjectUtils":225,"./SerializationContext":226,"./Serializer":227,"./StringUtils":228,"./TreeUtils":229,"./collection/ArrayList":230,"./collection/Entry":231,"./collection/HashBidiMap":232,"./collection/HashMap":233,"./collection/HashSet":234,"./collection/Iterator":235,"./collection/IteratorAbstract":236,"./collection/IteratorArray":237,"./collection/ListMap":238,"./collection/MultiMapObjectArray":239,"./collection/ObjectMap":240,"./shared":242}],242:[function(require,module,exports){
var shared={Promise:null,ajax:function(){throw new Error("not set!")}};module.exports=shared;
},{}],243:[function(require,module,exports){
var vocab={xsd:require("./xsd"),rdf:require("./rdf"),rdfs:require("./rdfs"),owl:require("./owl"),wgs84:require("./wgs84")};module.exports=vocab;
},{"./owl":244,"./rdf":245,"./rdfs":246,"./wgs84":247,"./xsd":248}],244:[function(require,module,exports){
var NodeFactory=require("../rdf/NodeFactory"),p="http://www.w3.org/2002/07/owl#",ns={Class:NodeFactory.createUri(p+"Class"),DatatypeProperty:NodeFactory.createUri(p+"DatatypeProperty"),ObjectProperty:NodeFactory.createUri(p+"ObjectProperty"),AnnotationProperty:NodeFactory.createUri(p+"AnnotationProperty")};module.exports=ns;
},{"../rdf/NodeFactory":31}],245:[function(require,module,exports){
var NodeFactory=require("../rdf/NodeFactory"),p="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ns={type:NodeFactory.createUri(p+"type"),Property:NodeFactory.createUri(p+"Property")};module.exports=ns;
},{"../rdf/NodeFactory":31}],246:[function(require,module,exports){
var NodeFactory=require("../rdf/NodeFactory"),p="http://www.w3.org/2000/01/rdf-schema#",ns={label:NodeFactory.createUri(p+"label"),subClassOf:NodeFactory.createUri(p+"subClassOf")};module.exports=ns;
},{"../rdf/NodeFactory":31}],247:[function(require,module,exports){
var NodeFactory=require("../rdf/NodeFactory"),p="http://www.w3.org/2003/01/geo/wgs84_pos#",ns={lon:NodeFactory.createUri(p+"long"),lat:NodeFactory.createUri(p+"lat")};module.exports=ns;
},{"../rdf/NodeFactory":31}],248:[function(require,module,exports){
var p="http://www.w3.org/2001/XMLSchema#",Node_Uri=require("../rdf/node/Node_Uri"),ns={xboolean:new Node_Uri(p+"boolean"),xint:new Node_Uri(p+"int"),xinteger:new Node_Uri(p+"integer"),xlong:new Node_Uri(p+"long"),decimal:new Node_Uri(p+"decimal"),xfloat:new Node_Uri(p+"float"),xdouble:new Node_Uri(p+"double"),xstring:new Node_Uri(p+"string"),date:new Node_Uri(p+"date"),dateTime:new Node_Uri(p+"dateTime")};module.exports=ns;
},{"../rdf/node/Node_Uri":48}],249:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var keys = require('lodash.keys'),
    objectTypes = require('lodash._objecttypes');

/**
 * Assigns own enumerable properties of source object(s) to the destination
 * object for all destination properties that resolve to `undefined`. Once a
 * property is set, additional defaults of the same property will be ignored.
 *
 * @static
 * @memberOf _
 * @type Function
 * @category Objects
 * @param {Object} object The destination object.
 * @param {...Object} [source] The source objects.
 * @param- {Object} [guard] Allows working with `_.reduce` without using its
 *  `key` and `object` arguments as sources.
 * @returns {Object} Returns the destination object.
 * @example
 *
 * var object = { 'name': 'barney' };
 * _.defaults(object, { 'name': 'fred', 'employer': 'slate' });
 * // => { 'name': 'barney', 'employer': 'slate' }
 */
var defaults = function(object, source, guard) {
  var index, iterable = object, result = iterable;
  if (!iterable) return result;
  var args = arguments,
      argsIndex = 0,
      argsLength = typeof guard == 'number' ? 2 : args.length;
  while (++argsIndex < argsLength) {
    iterable = args[argsIndex];
    if (iterable && objectTypes[typeof iterable]) {
    var ownIndex = -1,
        ownProps = objectTypes[typeof iterable] && keys(iterable),
        length = ownProps ? ownProps.length : 0;

    while (++ownIndex < length) {
      index = ownProps[ownIndex];
      if (typeof result[index] == 'undefined') result[index] = iterable[index];
    }
    }
  }
  return result
};

module.exports = defaults;

},{"lodash._objecttypes":250,"lodash.keys":251}],250:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/** Used to determine if values are of the language type Object */
var objectTypes = {
  'boolean': false,
  'function': true,
  'object': true,
  'number': false,
  'string': false,
  'undefined': false
};

module.exports = objectTypes;

},{}],251:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var isNative = require('lodash._isnative'),
    isObject = require('lodash.isobject'),
    shimKeys = require('lodash._shimkeys');

/* Native method shortcuts for methods with the same name as other `lodash` methods */
var nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys;

/**
 * Creates an array composed of the own enumerable property names of an object.
 *
 * @static
 * @memberOf _
 * @category Objects
 * @param {Object} object The object to inspect.
 * @returns {Array} Returns an array of property names.
 * @example
 *
 * _.keys({ 'one': 1, 'two': 2, 'three': 3 });
 * // => ['one', 'two', 'three'] (property order is not guaranteed across environments)
 */
var keys = !nativeKeys ? shimKeys : function(object) {
  if (!isObject(object)) {
    return [];
  }
  return nativeKeys(object);
};

module.exports = keys;

},{"lodash._isnative":252,"lodash._shimkeys":253,"lodash.isobject":254}],252:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/** Used for native method references */
var objectProto = Object.prototype;

/** Used to resolve the internal [[Class]] of values */
var toString = objectProto.toString;

/** Used to detect if a method is native */
var reNative = RegExp('^' +
  String(toString)
    .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    .replace(/toString| for [^\]]+/g, '.*?') + '$'
);

/**
 * Checks if `value` is a native function.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if the `value` is a native function, else `false`.
 */
function isNative(value) {
  return typeof value == 'function' && reNative.test(value);
}

module.exports = isNative;

},{}],253:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var objectTypes = require('lodash._objecttypes');

/** Used for native method references */
var objectProto = Object.prototype;

/** Native method shortcuts */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A fallback implementation of `Object.keys` which produces an array of the
 * given object's own enumerable property names.
 *
 * @private
 * @type Function
 * @param {Object} object The object to inspect.
 * @returns {Array} Returns an array of property names.
 */
var shimKeys = function(object) {
  var index, iterable = object, result = [];
  if (!iterable) return result;
  if (!(objectTypes[typeof object])) return result;
    for (index in iterable) {
      if (hasOwnProperty.call(iterable, index)) {
        result.push(index);
      }
    }
  return result
};

module.exports = shimKeys;

},{"lodash._objecttypes":250}],254:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var objectTypes = require('lodash._objecttypes');

/**
 * Checks if `value` is the language type of Object.
 * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @category Objects
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if the `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(1);
 * // => false
 */
function isObject(value) {
  // check if the value is the ECMAScript language type of Object
  // http://es5.github.io/#x8
  // and avoid a V8 bug
  // http://code.google.com/p/v8/issues/detail?id=2291
  return !!(value && objectTypes[typeof value]);
}

module.exports = isObject;

},{"lodash._objecttypes":250}],255:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseFlatten = require('lodash._baseflatten'),
    map = require('lodash.map');

/**
 * Flattens a nested array (the nesting can be to any depth). If `isShallow`
 * is truey, the array will only be flattened a single level. If a callback
 * is provided each element of the array is passed through the callback before
 * flattening. The callback is bound to `thisArg` and invoked with three
 * arguments; (value, index, array).
 *
 * If a property name is provided for `callback` the created "_.pluck" style
 * callback will return the property value of the given element.
 *
 * If an object is provided for `callback` the created "_.where" style callback
 * will return `true` for elements that have the properties of the given object,
 * else `false`.
 *
 * @static
 * @memberOf _
 * @category Arrays
 * @param {Array} array The array to flatten.
 * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.
 * @param {Function|Object|string} [callback=identity] The function called
 *  per iteration. If a property name or object is provided it will be used
 *  to create a "_.pluck" or "_.where" style callback, respectively.
 * @param {*} [thisArg] The `this` binding of `callback`.
 * @returns {Array} Returns a new flattened array.
 * @example
 *
 * _.flatten([1, [2], [3, [[4]]]]);
 * // => [1, 2, 3, 4];
 *
 * _.flatten([1, [2], [3, [[4]]]], true);
 * // => [1, 2, 3, [[4]]];
 *
 * var characters = [
 *   { 'name': 'barney', 'age': 30, 'pets': ['hoppy'] },
 *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }
 * ];
 *
 * // using "_.pluck" callback shorthand
 * _.flatten(characters, 'pets');
 * // => ['hoppy', 'baby puss', 'dino']
 */
function flatten(array, isShallow, callback, thisArg) {
  // juggle arguments
  if (typeof isShallow != 'boolean' && isShallow != null) {
    thisArg = callback;
    callback = (typeof isShallow != 'function' && thisArg && thisArg[isShallow] === array) ? null : isShallow;
    isShallow = false;
  }
  if (callback != null) {
    array = map(array, callback, thisArg);
  }
  return baseFlatten(array, isShallow);
}

module.exports = flatten;

},{"lodash._baseflatten":256,"lodash.map":260}],256:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var isArguments = require('lodash.isarguments'),
    isArray = require('lodash.isarray');

/**
 * The base implementation of `_.flatten` without support for callback
 * shorthands or `thisArg` binding.
 *
 * @private
 * @param {Array} array The array to flatten.
 * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.
 * @param {boolean} [isStrict=false] A flag to restrict flattening to arrays and `arguments` objects.
 * @param {number} [fromIndex=0] The index to start from.
 * @returns {Array} Returns a new flattened array.
 */
function baseFlatten(array, isShallow, isStrict, fromIndex) {
  var index = (fromIndex || 0) - 1,
      length = array ? array.length : 0,
      result = [];

  while (++index < length) {
    var value = array[index];

    if (value && typeof value == 'object' && typeof value.length == 'number'
        && (isArray(value) || isArguments(value))) {
      // recursively flatten arrays (susceptible to call stack limits)
      if (!isShallow) {
        value = baseFlatten(value, isShallow, isStrict);
      }
      var valIndex = -1,
          valLength = value.length,
          resIndex = result.length;

      result.length += valLength;
      while (++valIndex < valLength) {
        result[resIndex++] = value[valIndex];
      }
    } else if (!isStrict) {
      result.push(value);
    }
  }
  return result;
}

module.exports = baseFlatten;

},{"lodash.isarguments":257,"lodash.isarray":258}],257:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/** `Object#toString` result shortcuts */
var argsClass = '[object Arguments]';

/** Used for native method references */
var objectProto = Object.prototype;

/** Used to resolve the internal [[Class]] of values */
var toString = objectProto.toString;

/**
 * Checks if `value` is an `arguments` object.
 *
 * @static
 * @memberOf _
 * @category Objects
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if the `value` is an `arguments` object, else `false`.
 * @example
 *
 * (function() { return _.isArguments(arguments); })(1, 2, 3);
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
function isArguments(value) {
  return value && typeof value == 'object' && typeof value.length == 'number' &&
    toString.call(value) == argsClass || false;
}

module.exports = isArguments;

},{}],258:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var isNative = require('lodash._isnative');

/** `Object#toString` result shortcuts */
var arrayClass = '[object Array]';

/** Used for native method references */
var objectProto = Object.prototype;

/** Used to resolve the internal [[Class]] of values */
var toString = objectProto.toString;

/* Native method shortcuts for methods with the same name as other `lodash` methods */
var nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray;

/**
 * Checks if `value` is an array.
 *
 * @static
 * @memberOf _
 * @type Function
 * @category Objects
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if the `value` is an array, else `false`.
 * @example
 *
 * (function() { return _.isArray(arguments); })();
 * // => false
 *
 * _.isArray([1, 2, 3]);
 * // => true
 */
var isArray = nativeIsArray || function(value) {
  return value && typeof value == 'object' && typeof value.length == 'number' &&
    toString.call(value) == arrayClass || false;
};

module.exports = isArray;

},{"lodash._isnative":259}],259:[function(require,module,exports){
module.exports=require(252)
},{}],260:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var createCallback = require('lodash.createcallback'),
    forOwn = require('lodash.forown');

/**
 * Creates an array of values by running each element in the collection
 * through the callback. The callback is bound to `thisArg` and invoked with
 * three arguments; (value, index|key, collection).
 *
 * If a property name is provided for `callback` the created "_.pluck" style
 * callback will return the property value of the given element.
 *
 * If an object is provided for `callback` the created "_.where" style callback
 * will return `true` for elements that have the properties of the given object,
 * else `false`.
 *
 * @static
 * @memberOf _
 * @alias collect
 * @category Collections
 * @param {Array|Object|string} collection The collection to iterate over.
 * @param {Function|Object|string} [callback=identity] The function called
 *  per iteration. If a property name or object is provided it will be used
 *  to create a "_.pluck" or "_.where" style callback, respectively.
 * @param {*} [thisArg] The `this` binding of `callback`.
 * @returns {Array} Returns a new array of the results of each `callback` execution.
 * @example
 *
 * _.map([1, 2, 3], function(num) { return num * 3; });
 * // => [3, 6, 9]
 *
 * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });
 * // => [3, 6, 9] (property order is not guaranteed across environments)
 *
 * var characters = [
 *   { 'name': 'barney', 'age': 36 },
 *   { 'name': 'fred',   'age': 40 }
 * ];
 *
 * // using "_.pluck" callback shorthand
 * _.map(characters, 'name');
 * // => ['barney', 'fred']
 */
function map(collection, callback, thisArg) {
  var index = -1,
      length = collection ? collection.length : 0;

  callback = createCallback(callback, thisArg, 3);
  if (typeof length == 'number') {
    var result = Array(length);
    while (++index < length) {
      result[index] = callback(collection[index], index, collection);
    }
  } else {
    result = [];
    forOwn(collection, function(value, key, collection) {
      result[++index] = callback(value, key, collection);
    });
  }
  return result;
}

module.exports = map;

},{"lodash.createcallback":261,"lodash.forown":297}],261:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseCreateCallback = require('lodash._basecreatecallback'),
    baseIsEqual = require('lodash._baseisequal'),
    isObject = require('lodash.isobject'),
    keys = require('lodash.keys'),
    property = require('lodash.property');

/**
 * Produces a callback bound to an optional `thisArg`. If `func` is a property
 * name the created callback will return the property value for a given element.
 * If `func` is an object the created callback will return `true` for elements
 * that contain the equivalent object properties, otherwise it will return `false`.
 *
 * @static
 * @memberOf _
 * @category Utilities
 * @param {*} [func=identity] The value to convert to a callback.
 * @param {*} [thisArg] The `this` binding of the created callback.
 * @param {number} [argCount] The number of arguments the callback accepts.
 * @returns {Function} Returns a callback function.
 * @example
 *
 * var characters = [
 *   { 'name': 'barney', 'age': 36 },
 *   { 'name': 'fred',   'age': 40 }
 * ];
 *
 * // wrap to create custom callback shorthands
 * _.createCallback = _.wrap(_.createCallback, function(func, callback, thisArg) {
 *   var match = /^(.+?)__([gl]t)(.+)$/.exec(callback);
 *   return !match ? func(callback, thisArg) : function(object) {
 *     return match[2] == 'gt' ? object[match[1]] > match[3] : object[match[1]] < match[3];
 *   };
 * });
 *
 * _.filter(characters, 'age__gt38');
 * // => [{ 'name': 'fred', 'age': 40 }]
 */
function createCallback(func, thisArg, argCount) {
  var type = typeof func;
  if (func == null || type == 'function') {
    return baseCreateCallback(func, thisArg, argCount);
  }
  // handle "_.pluck" style callback shorthands
  if (type != 'object') {
    return property(func);
  }
  var props = keys(func),
      key = props[0],
      a = func[key];

  // handle "_.where" style callback shorthands
  if (props.length == 1 && a === a && !isObject(a)) {
    // fast path the common case of providing an object with a single
    // property containing a primitive value
    return function(object) {
      var b = object[key];
      return a === b && (a !== 0 || (1 / a == 1 / b));
    };
  }
  return function(object) {
    var length = props.length,
        result = false;

    while (length--) {
      if (!(result = baseIsEqual(object[props[length]], func[props[length]], null, true))) {
        break;
      }
    }
    return result;
  };
}

module.exports = createCallback;

},{"lodash._basecreatecallback":262,"lodash._baseisequal":281,"lodash.isobject":290,"lodash.keys":292,"lodash.property":296}],262:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var bind = require('lodash.bind'),
    identity = require('lodash.identity'),
    setBindData = require('lodash._setbinddata'),
    support = require('lodash.support');

/** Used to detected named functions */
var reFuncName = /^\s*function[ \n\r\t]+\w/;

/** Used to detect functions containing a `this` reference */
var reThis = /\bthis\b/;

/** Native method shortcuts */
var fnToString = Function.prototype.toString;

/**
 * The base implementation of `_.createCallback` without support for creating
 * "_.pluck" or "_.where" style callbacks.
 *
 * @private
 * @param {*} [func=identity] The value to convert to a callback.
 * @param {*} [thisArg] The `this` binding of the created callback.
 * @param {number} [argCount] The number of arguments the callback accepts.
 * @returns {Function} Returns a callback function.
 */
function baseCreateCallback(func, thisArg, argCount) {
  if (typeof func != 'function') {
    return identity;
  }
  // exit early for no `thisArg` or already bound by `Function#bind`
  if (typeof thisArg == 'undefined' || !('prototype' in func)) {
    return func;
  }
  var bindData = func.__bindData__;
  if (typeof bindData == 'undefined') {
    if (support.funcNames) {
      bindData = !func.name;
    }
    bindData = bindData || !support.funcDecomp;
    if (!bindData) {
      var source = fnToString.call(func);
      if (!support.funcNames) {
        bindData = !reFuncName.test(source);
      }
      if (!bindData) {
        // checks if `func` references the `this` keyword and stores the result
        bindData = reThis.test(source);
        setBindData(func, bindData);
      }
    }
  }
  // exit early if there are no `this` references or `func` is bound
  if (bindData === false || (bindData !== true && bindData[1] & 1)) {
    return func;
  }
  switch (argCount) {
    case 1: return function(value) {
      return func.call(thisArg, value);
    };
    case 2: return function(a, b) {
      return func.call(thisArg, a, b);
    };
    case 3: return function(value, index, collection) {
      return func.call(thisArg, value, index, collection);
    };
    case 4: return function(accumulator, value, index, collection) {
      return func.call(thisArg, accumulator, value, index, collection);
    };
  }
  return bind(func, thisArg);
}

module.exports = baseCreateCallback;

},{"lodash._setbinddata":263,"lodash.bind":266,"lodash.identity":278,"lodash.support":279}],263:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var isNative = require('lodash._isnative'),
    noop = require('lodash.noop');

/** Used as the property descriptor for `__bindData__` */
var descriptor = {
  'configurable': false,
  'enumerable': false,
  'value': null,
  'writable': false
};

/** Used to set meta data on functions */
var defineProperty = (function() {
  // IE 8 only accepts DOM elements
  try {
    var o = {},
        func = isNative(func = Object.defineProperty) && func,
        result = func(o, o, o) && func;
  } catch(e) { }
  return result;
}());

/**
 * Sets `this` binding data on a given function.
 *
 * @private
 * @param {Function} func The function to set data on.
 * @param {Array} value The data array to set.
 */
var setBindData = !defineProperty ? noop : function(func, value) {
  descriptor.value = value;
  defineProperty(func, '__bindData__', descriptor);
};

module.exports = setBindData;

},{"lodash._isnative":264,"lodash.noop":265}],264:[function(require,module,exports){
module.exports=require(252)
},{}],265:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/**
 * A no-operation function.
 *
 * @static
 * @memberOf _
 * @category Utilities
 * @example
 *
 * var object = { 'name': 'fred' };
 * _.noop(object) === undefined;
 * // => true
 */
function noop() {
  // no operation performed
}

module.exports = noop;

},{}],266:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var createWrapper = require('lodash._createwrapper'),
    slice = require('lodash._slice');

/**
 * Creates a function that, when called, invokes `func` with the `this`
 * binding of `thisArg` and prepends any additional `bind` arguments to those
 * provided to the bound function.
 *
 * @static
 * @memberOf _
 * @category Functions
 * @param {Function} func The function to bind.
 * @param {*} [thisArg] The `this` binding of `func`.
 * @param {...*} [arg] Arguments to be partially applied.
 * @returns {Function} Returns the new bound function.
 * @example
 *
 * var func = function(greeting) {
 *   return greeting + ' ' + this.name;
 * };
 *
 * func = _.bind(func, { 'name': 'fred' }, 'hi');
 * func();
 * // => 'hi fred'
 */
function bind(func, thisArg) {
  return arguments.length > 2
    ? createWrapper(func, 17, slice(arguments, 2), null, thisArg)
    : createWrapper(func, 1, null, null, thisArg);
}

module.exports = bind;

},{"lodash._createwrapper":267,"lodash._slice":277}],267:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseBind = require('lodash._basebind'),
    baseCreateWrapper = require('lodash._basecreatewrapper'),
    isFunction = require('lodash.isfunction'),
    slice = require('lodash._slice');

/**
 * Used for `Array` method references.
 *
 * Normally `Array.prototype` would suffice, however, using an array literal
 * avoids issues in Narwhal.
 */
var arrayRef = [];

/** Native method shortcuts */
var push = arrayRef.push,
    unshift = arrayRef.unshift;

/**
 * Creates a function that, when called, either curries or invokes `func`
 * with an optional `this` binding and partially applied arguments.
 *
 * @private
 * @param {Function|string} func The function or method name to reference.
 * @param {number} bitmask The bitmask of method flags to compose.
 *  The bitmask may be composed of the following flags:
 *  1 - `_.bind`
 *  2 - `_.bindKey`
 *  4 - `_.curry`
 *  8 - `_.curry` (bound)
 *  16 - `_.partial`
 *  32 - `_.partialRight`
 * @param {Array} [partialArgs] An array of arguments to prepend to those
 *  provided to the new function.
 * @param {Array} [partialRightArgs] An array of arguments to append to those
 *  provided to the new function.
 * @param {*} [thisArg] The `this` binding of `func`.
 * @param {number} [arity] The arity of `func`.
 * @returns {Function} Returns the new function.
 */
function createWrapper(func, bitmask, partialArgs, partialRightArgs, thisArg, arity) {
  var isBind = bitmask & 1,
      isBindKey = bitmask & 2,
      isCurry = bitmask & 4,
      isCurryBound = bitmask & 8,
      isPartial = bitmask & 16,
      isPartialRight = bitmask & 32;

  if (!isBindKey && !isFunction(func)) {
    throw new TypeError;
  }
  if (isPartial && !partialArgs.length) {
    bitmask &= ~16;
    isPartial = partialArgs = false;
  }
  if (isPartialRight && !partialRightArgs.length) {
    bitmask &= ~32;
    isPartialRight = partialRightArgs = false;
  }
  var bindData = func && func.__bindData__;
  if (bindData && bindData !== true) {
    // clone `bindData`
    bindData = slice(bindData);
    if (bindData[2]) {
      bindData[2] = slice(bindData[2]);
    }
    if (bindData[3]) {
      bindData[3] = slice(bindData[3]);
    }
    // set `thisBinding` is not previously bound
    if (isBind && !(bindData[1] & 1)) {
      bindData[4] = thisArg;
    }
    // set if previously bound but not currently (subsequent curried functions)
    if (!isBind && bindData[1] & 1) {
      bitmask |= 8;
    }
    // set curried arity if not yet set
    if (isCurry && !(bindData[1] & 4)) {
      bindData[5] = arity;
    }
    // append partial left arguments
    if (isPartial) {
      push.apply(bindData[2] || (bindData[2] = []), partialArgs);
    }
    // append partial right arguments
    if (isPartialRight) {
      unshift.apply(bindData[3] || (bindData[3] = []), partialRightArgs);
    }
    // merge flags
    bindData[1] |= bitmask;
    return createWrapper.apply(null, bindData);
  }
  // fast path for `_.bind`
  var creater = (bitmask == 1 || bitmask === 17) ? baseBind : baseCreateWrapper;
  return creater([func, bitmask, partialArgs, partialRightArgs, thisArg, arity]);
}

module.exports = createWrapper;

},{"lodash._basebind":268,"lodash._basecreatewrapper":272,"lodash._slice":277,"lodash.isfunction":276}],268:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseCreate = require('lodash._basecreate'),
    isObject = require('lodash.isobject'),
    setBindData = require('lodash._setbinddata'),
    slice = require('lodash._slice');

/**
 * Used for `Array` method references.
 *
 * Normally `Array.prototype` would suffice, however, using an array literal
 * avoids issues in Narwhal.
 */
var arrayRef = [];

/** Native method shortcuts */
var push = arrayRef.push;

/**
 * The base implementation of `_.bind` that creates the bound function and
 * sets its meta data.
 *
 * @private
 * @param {Array} bindData The bind data array.
 * @returns {Function} Returns the new bound function.
 */
function baseBind(bindData) {
  var func = bindData[0],
      partialArgs = bindData[2],
      thisArg = bindData[4];

  function bound() {
    // `Function#bind` spec
    // http://es5.github.io/#x15.3.4.5
    if (partialArgs) {
      // avoid `arguments` object deoptimizations by using `slice` instead
      // of `Array.prototype.slice.call` and not assigning `arguments` to a
      // variable as a ternary expression
      var args = slice(partialArgs);
      push.apply(args, arguments);
    }
    // mimic the constructor's `return` behavior
    // http://es5.github.io/#x13.2.2
    if (this instanceof bound) {
      // ensure `new bound` is an instance of `func`
      var thisBinding = baseCreate(func.prototype),
          result = func.apply(thisBinding, args || arguments);
      return isObject(result) ? result : thisBinding;
    }
    return func.apply(thisArg, args || arguments);
  }
  setBindData(bound, bindData);
  return bound;
}

module.exports = baseBind;

},{"lodash._basecreate":269,"lodash._setbinddata":263,"lodash._slice":277,"lodash.isobject":290}],269:[function(require,module,exports){
(function (global){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var isNative = require('lodash._isnative'),
    isObject = require('lodash.isobject'),
    noop = require('lodash.noop');

/* Native method shortcuts for methods with the same name as other `lodash` methods */
var nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate;

/**
 * The base implementation of `_.create` without support for assigning
 * properties to the created object.
 *
 * @private
 * @param {Object} prototype The object to inherit from.
 * @returns {Object} Returns the new object.
 */
function baseCreate(prototype, properties) {
  return isObject(prototype) ? nativeCreate(prototype) : {};
}
// fallback for browsers without `Object.create`
if (!nativeCreate) {
  baseCreate = (function() {
    function Object() {}
    return function(prototype) {
      if (isObject(prototype)) {
        Object.prototype = prototype;
        var result = new Object;
        Object.prototype = null;
      }
      return result || global.Object();
    };
  }());
}

module.exports = baseCreate;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"lodash._isnative":270,"lodash.isobject":290,"lodash.noop":271}],270:[function(require,module,exports){
module.exports=require(252)
},{}],271:[function(require,module,exports){
module.exports=require(265)
},{}],272:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseCreate = require('lodash._basecreate'),
    isObject = require('lodash.isobject'),
    setBindData = require('lodash._setbinddata'),
    slice = require('lodash._slice');

/**
 * Used for `Array` method references.
 *
 * Normally `Array.prototype` would suffice, however, using an array literal
 * avoids issues in Narwhal.
 */
var arrayRef = [];

/** Native method shortcuts */
var push = arrayRef.push;

/**
 * The base implementation of `createWrapper` that creates the wrapper and
 * sets its meta data.
 *
 * @private
 * @param {Array} bindData The bind data array.
 * @returns {Function} Returns the new function.
 */
function baseCreateWrapper(bindData) {
  var func = bindData[0],
      bitmask = bindData[1],
      partialArgs = bindData[2],
      partialRightArgs = bindData[3],
      thisArg = bindData[4],
      arity = bindData[5];

  var isBind = bitmask & 1,
      isBindKey = bitmask & 2,
      isCurry = bitmask & 4,
      isCurryBound = bitmask & 8,
      key = func;

  function bound() {
    var thisBinding = isBind ? thisArg : this;
    if (partialArgs) {
      var args = slice(partialArgs);
      push.apply(args, arguments);
    }
    if (partialRightArgs || isCurry) {
      args || (args = slice(arguments));
      if (partialRightArgs) {
        push.apply(args, partialRightArgs);
      }
      if (isCurry && args.length < arity) {
        bitmask |= 16 & ~32;
        return baseCreateWrapper([func, (isCurryBound ? bitmask : bitmask & ~3), args, null, thisArg, arity]);
      }
    }
    args || (args = arguments);
    if (isBindKey) {
      func = thisBinding[key];
    }
    if (this instanceof bound) {
      thisBinding = baseCreate(func.prototype);
      var result = func.apply(thisBinding, args);
      return isObject(result) ? result : thisBinding;
    }
    return func.apply(thisBinding, args);
  }
  setBindData(bound, bindData);
  return bound;
}

module.exports = baseCreateWrapper;

},{"lodash._basecreate":273,"lodash._setbinddata":263,"lodash._slice":277,"lodash.isobject":290}],273:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":274,"lodash.isobject":290,"lodash.noop":275}],274:[function(require,module,exports){
module.exports=require(252)
},{}],275:[function(require,module,exports){
module.exports=require(265)
},{}],276:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/**
 * Checks if `value` is a function.
 *
 * @static
 * @memberOf _
 * @category Objects
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if the `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 */
function isFunction(value) {
  return typeof value == 'function';
}

module.exports = isFunction;

},{}],277:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/**
 * Slices the `collection` from the `start` index up to, but not including,
 * the `end` index.
 *
 * Note: This function is used instead of `Array#slice` to support node lists
 * in IE < 9 and to ensure dense arrays are returned.
 *
 * @private
 * @param {Array|Object|string} collection The collection to slice.
 * @param {number} start The start index.
 * @param {number} end The end index.
 * @returns {Array} Returns the new array.
 */
function slice(array, start, end) {
  start || (start = 0);
  if (typeof end == 'undefined') {
    end = array ? array.length : 0;
  }
  var index = -1,
      length = end - start || 0,
      result = Array(length < 0 ? 0 : length);

  while (++index < length) {
    result[index] = array[start + index];
  }
  return result;
}

module.exports = slice;

},{}],278:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/**
 * This method returns the first argument provided to it.
 *
 * @static
 * @memberOf _
 * @category Utilities
 * @param {*} value Any value.
 * @returns {*} Returns `value`.
 * @example
 *
 * var object = { 'name': 'fred' };
 * _.identity(object) === object;
 * // => true
 */
function identity(value) {
  return value;
}

module.exports = identity;

},{}],279:[function(require,module,exports){
(function (global){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var isNative = require('lodash._isnative');

/** Used to detect functions containing a `this` reference */
var reThis = /\bthis\b/;

/**
 * An object used to flag environments features.
 *
 * @static
 * @memberOf _
 * @type Object
 */
var support = {};

/**
 * Detect if functions can be decompiled by `Function#toString`
 * (all but PS3 and older Opera mobile browsers & avoided in Windows 8 apps).
 *
 * @memberOf _.support
 * @type boolean
 */
support.funcDecomp = !isNative(global.WinRTError) && reThis.test(function() { return this; });

/**
 * Detect if `Function#name` is supported (all but IE).
 *
 * @memberOf _.support
 * @type boolean
 */
support.funcNames = typeof Function.name == 'string';

module.exports = support;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"lodash._isnative":280}],280:[function(require,module,exports){
module.exports=require(252)
},{}],281:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var forIn = require('lodash.forin'),
    getArray = require('lodash._getarray'),
    isFunction = require('lodash.isfunction'),
    objectTypes = require('lodash._objecttypes'),
    releaseArray = require('lodash._releasearray');

/** `Object#toString` result shortcuts */
var argsClass = '[object Arguments]',
    arrayClass = '[object Array]',
    boolClass = '[object Boolean]',
    dateClass = '[object Date]',
    numberClass = '[object Number]',
    objectClass = '[object Object]',
    regexpClass = '[object RegExp]',
    stringClass = '[object String]';

/** Used for native method references */
var objectProto = Object.prototype;

/** Used to resolve the internal [[Class]] of values */
var toString = objectProto.toString;

/** Native method shortcuts */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * The base implementation of `_.isEqual`, without support for `thisArg` binding,
 * that allows partial "_.where" style comparisons.
 *
 * @private
 * @param {*} a The value to compare.
 * @param {*} b The other value to compare.
 * @param {Function} [callback] The function to customize comparing values.
 * @param {Function} [isWhere=false] A flag to indicate performing partial comparisons.
 * @param {Array} [stackA=[]] Tracks traversed `a` objects.
 * @param {Array} [stackB=[]] Tracks traversed `b` objects.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 */
function baseIsEqual(a, b, callback, isWhere, stackA, stackB) {
  // used to indicate that when comparing objects, `a` has at least the properties of `b`
  if (callback) {
    var result = callback(a, b);
    if (typeof result != 'undefined') {
      return !!result;
    }
  }
  // exit early for identical values
  if (a === b) {
    // treat `+0` vs. `-0` as not equal
    return a !== 0 || (1 / a == 1 / b);
  }
  var type = typeof a,
      otherType = typeof b;

  // exit early for unlike primitive values
  if (a === a &&
      !(a && objectTypes[type]) &&
      !(b && objectTypes[otherType])) {
    return false;
  }
  // exit early for `null` and `undefined` avoiding ES3's Function#call behavior
  // http://es5.github.io/#x15.3.4.4
  if (a == null || b == null) {
    return a === b;
  }
  // compare [[Class]] names
  var className = toString.call(a),
      otherClass = toString.call(b);

  if (className == argsClass) {
    className = objectClass;
  }
  if (otherClass == argsClass) {
    otherClass = objectClass;
  }
  if (className != otherClass) {
    return false;
  }
  switch (className) {
    case boolClass:
    case dateClass:
      // coerce dates and booleans to numbers, dates to milliseconds and booleans
      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal
      return +a == +b;

    case numberClass:
      // treat `NaN` vs. `NaN` as equal
      return (a != +a)
        ? b != +b
        // but treat `+0` vs. `-0` as not equal
        : (a == 0 ? (1 / a == 1 / b) : a == +b);

    case regexpClass:
    case stringClass:
      // coerce regexes to strings (http://es5.github.io/#x15.10.6.4)
      // treat string primitives and their corresponding object instances as equal
      return a == String(b);
  }
  var isArr = className == arrayClass;
  if (!isArr) {
    // unwrap any `lodash` wrapped values
    var aWrapped = hasOwnProperty.call(a, '__wrapped__'),
        bWrapped = hasOwnProperty.call(b, '__wrapped__');

    if (aWrapped || bWrapped) {
      return baseIsEqual(aWrapped ? a.__wrapped__ : a, bWrapped ? b.__wrapped__ : b, callback, isWhere, stackA, stackB);
    }
    // exit for functions and DOM nodes
    if (className != objectClass) {
      return false;
    }
    // in older versions of Opera, `arguments` objects have `Array` constructors
    var ctorA = a.constructor,
        ctorB = b.constructor;

    // non `Object` object instances with different constructors are not equal
    if (ctorA != ctorB &&
          !(isFunction(ctorA) && ctorA instanceof ctorA && isFunction(ctorB) && ctorB instanceof ctorB) &&
          ('constructor' in a && 'constructor' in b)
        ) {
      return false;
    }
  }
  // assume cyclic structures are equal
  // the algorithm for detecting cyclic structures is adapted from ES 5.1
  // section 15.12.3, abstract operation `JO` (http://es5.github.io/#x15.12.3)
  var initedStack = !stackA;
  stackA || (stackA = getArray());
  stackB || (stackB = getArray());

  var length = stackA.length;
  while (length--) {
    if (stackA[length] == a) {
      return stackB[length] == b;
    }
  }
  var size = 0;
  result = true;

  // add `a` and `b` to the stack of traversed objects
  stackA.push(a);
  stackB.push(b);

  // recursively compare objects and arrays (susceptible to call stack limits)
  if (isArr) {
    // compare lengths to determine if a deep comparison is necessary
    length = a.length;
    size = b.length;
    result = size == length;

    if (result || isWhere) {
      // deep compare the contents, ignoring non-numeric properties
      while (size--) {
        var index = length,
            value = b[size];

        if (isWhere) {
          while (index--) {
            if ((result = baseIsEqual(a[index], value, callback, isWhere, stackA, stackB))) {
              break;
            }
          }
        } else if (!(result = baseIsEqual(a[size], value, callback, isWhere, stackA, stackB))) {
          break;
        }
      }
    }
  }
  else {
    // deep compare objects using `forIn`, instead of `forOwn`, to avoid `Object.keys`
    // which, in this case, is more costly
    forIn(b, function(value, key, b) {
      if (hasOwnProperty.call(b, key)) {
        // count the number of properties.
        size++;
        // deep compare each property value.
        return (result = hasOwnProperty.call(a, key) && baseIsEqual(a[key], value, callback, isWhere, stackA, stackB));
      }
    });

    if (result && !isWhere) {
      // ensure both objects have the same number of properties
      forIn(a, function(value, key, a) {
        if (hasOwnProperty.call(a, key)) {
          // `size` will be `-1` if `a` has more properties than `b`
          return (result = --size > -1);
        }
      });
    }
  }
  stackA.pop();
  stackB.pop();

  if (initedStack) {
    releaseArray(stackA);
    releaseArray(stackB);
  }
  return result;
}

module.exports = baseIsEqual;

},{"lodash._getarray":282,"lodash._objecttypes":284,"lodash._releasearray":285,"lodash.forin":288,"lodash.isfunction":289}],282:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var arrayPool = require('lodash._arraypool');

/**
 * Gets an array from the array pool or creates a new one if the pool is empty.
 *
 * @private
 * @returns {Array} The array from the pool.
 */
function getArray() {
  return arrayPool.pop() || [];
}

module.exports = getArray;

},{"lodash._arraypool":283}],283:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/** Used to pool arrays and objects used internally */
var arrayPool = [];

module.exports = arrayPool;

},{}],284:[function(require,module,exports){
module.exports=require(250)
},{}],285:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var arrayPool = require('lodash._arraypool'),
    maxPoolSize = require('lodash._maxpoolsize');

/**
 * Releases the given array back to the array pool.
 *
 * @private
 * @param {Array} [array] The array to release.
 */
function releaseArray(array) {
  array.length = 0;
  if (arrayPool.length < maxPoolSize) {
    arrayPool.push(array);
  }
}

module.exports = releaseArray;

},{"lodash._arraypool":286,"lodash._maxpoolsize":287}],286:[function(require,module,exports){
module.exports=require(283)
},{}],287:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/** Used as the max size of the `arrayPool` and `objectPool` */
var maxPoolSize = 40;

module.exports = maxPoolSize;

},{}],288:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseCreateCallback = require('lodash._basecreatecallback'),
    objectTypes = require('lodash._objecttypes');

/**
 * Iterates over own and inherited enumerable properties of an object,
 * executing the callback for each property. The callback is bound to `thisArg`
 * and invoked with three arguments; (value, key, object). Callbacks may exit
 * iteration early by explicitly returning `false`.
 *
 * @static
 * @memberOf _
 * @type Function
 * @category Objects
 * @param {Object} object The object to iterate over.
 * @param {Function} [callback=identity] The function called per iteration.
 * @param {*} [thisArg] The `this` binding of `callback`.
 * @returns {Object} Returns `object`.
 * @example
 *
 * function Shape() {
 *   this.x = 0;
 *   this.y = 0;
 * }
 *
 * Shape.prototype.move = function(x, y) {
 *   this.x += x;
 *   this.y += y;
 * };
 *
 * _.forIn(new Shape, function(value, key) {
 *   console.log(key);
 * });
 * // => logs 'x', 'y', and 'move' (property order is not guaranteed across environments)
 */
var forIn = function(collection, callback, thisArg) {
  var index, iterable = collection, result = iterable;
  if (!iterable) return result;
  if (!objectTypes[typeof iterable]) return result;
  callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
    for (index in iterable) {
      if (callback(iterable[index], index, collection) === false) return result;
    }
  return result
};

module.exports = forIn;

},{"lodash._basecreatecallback":262,"lodash._objecttypes":284}],289:[function(require,module,exports){
module.exports=require(276)
},{}],290:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":291}],291:[function(require,module,exports){
module.exports=require(250)
},{}],292:[function(require,module,exports){
module.exports=require(251)
},{"lodash._isnative":293,"lodash._shimkeys":294,"lodash.isobject":290}],293:[function(require,module,exports){
module.exports=require(252)
},{}],294:[function(require,module,exports){
module.exports=require(253)
},{"lodash._objecttypes":295}],295:[function(require,module,exports){
module.exports=require(250)
},{}],296:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/**
 * Creates a "_.pluck" style function, which returns the `key` value of a
 * given object.
 *
 * @static
 * @memberOf _
 * @category Utilities
 * @param {string} key The name of the property to retrieve.
 * @returns {Function} Returns the new function.
 * @example
 *
 * var characters = [
 *   { 'name': 'fred',   'age': 40 },
 *   { 'name': 'barney', 'age': 36 }
 * ];
 *
 * var getName = _.property('name');
 *
 * _.map(characters, getName);
 * // => ['barney', 'fred']
 *
 * _.sortBy(characters, getName);
 * // => [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred',   'age': 40 }]
 */
function property(key) {
  return function(object) {
    return object[key];
  };
}

module.exports = property;

},{}],297:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseCreateCallback = require('lodash._basecreatecallback'),
    keys = require('lodash.keys'),
    objectTypes = require('lodash._objecttypes');

/**
 * Iterates over own enumerable properties of an object, executing the callback
 * for each property. The callback is bound to `thisArg` and invoked with three
 * arguments; (value, key, object). Callbacks may exit iteration early by
 * explicitly returning `false`.
 *
 * @static
 * @memberOf _
 * @type Function
 * @category Objects
 * @param {Object} object The object to iterate over.
 * @param {Function} [callback=identity] The function called per iteration.
 * @param {*} [thisArg] The `this` binding of `callback`.
 * @returns {Object} Returns `object`.
 * @example
 *
 * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {
 *   console.log(key);
 * });
 * // => logs '0', '1', and 'length' (property order is not guaranteed across environments)
 */
var forOwn = function(collection, callback, thisArg) {
  var index, iterable = collection, result = iterable;
  if (!iterable) return result;
  if (!objectTypes[typeof iterable]) return result;
  callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
    var ownIndex = -1,
        ownProps = objectTypes[typeof iterable] && keys(iterable),
        length = ownProps ? ownProps.length : 0;

    while (++ownIndex < length) {
      index = ownProps[ownIndex];
      if (callback(iterable[index], index, collection) === false) return result;
    }
  return result
};

module.exports = forOwn;

},{"lodash._basecreatecallback":298,"lodash._objecttypes":319,"lodash.keys":320}],298:[function(require,module,exports){
module.exports=require(262)
},{"lodash._setbinddata":299,"lodash.bind":302,"lodash.identity":316,"lodash.support":317}],299:[function(require,module,exports){
module.exports=require(263)
},{"lodash._isnative":300,"lodash.noop":301}],300:[function(require,module,exports){
module.exports=require(252)
},{}],301:[function(require,module,exports){
module.exports=require(265)
},{}],302:[function(require,module,exports){
module.exports=require(266)
},{"lodash._createwrapper":303,"lodash._slice":315}],303:[function(require,module,exports){
module.exports=require(267)
},{"lodash._basebind":304,"lodash._basecreatewrapper":309,"lodash._slice":315,"lodash.isfunction":314}],304:[function(require,module,exports){
module.exports=require(268)
},{"lodash._basecreate":305,"lodash._setbinddata":299,"lodash._slice":315,"lodash.isobject":308}],305:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":306,"lodash.isobject":308,"lodash.noop":307}],306:[function(require,module,exports){
module.exports=require(252)
},{}],307:[function(require,module,exports){
module.exports=require(265)
},{}],308:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":319}],309:[function(require,module,exports){
module.exports=require(272)
},{"lodash._basecreate":310,"lodash._setbinddata":299,"lodash._slice":315,"lodash.isobject":313}],310:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":311,"lodash.isobject":313,"lodash.noop":312}],311:[function(require,module,exports){
module.exports=require(252)
},{}],312:[function(require,module,exports){
module.exports=require(265)
},{}],313:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":319}],314:[function(require,module,exports){
module.exports=require(276)
},{}],315:[function(require,module,exports){
module.exports=require(277)
},{}],316:[function(require,module,exports){
module.exports=require(278)
},{}],317:[function(require,module,exports){
module.exports=require(279)
},{"lodash._isnative":318}],318:[function(require,module,exports){
module.exports=require(252)
},{}],319:[function(require,module,exports){
module.exports=require(250)
},{}],320:[function(require,module,exports){
module.exports=require(251)
},{"lodash._isnative":321,"lodash._shimkeys":322,"lodash.isobject":323}],321:[function(require,module,exports){
module.exports=require(252)
},{}],322:[function(require,module,exports){
module.exports=require(253)
},{"lodash._objecttypes":319}],323:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":319}],324:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseCreateCallback = require('lodash._basecreatecallback'),
    forOwn = require('lodash.forown');

/**
 * Iterates over elements of a collection, executing the callback for each
 * element. The callback is bound to `thisArg` and invoked with three arguments;
 * (value, index|key, collection). Callbacks may exit iteration early by
 * explicitly returning `false`.
 *
 * Note: As with other "Collections" methods, objects with a `length` property
 * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
 * may be used for object iteration.
 *
 * @static
 * @memberOf _
 * @alias each
 * @category Collections
 * @param {Array|Object|string} collection The collection to iterate over.
 * @param {Function} [callback=identity] The function called per iteration.
 * @param {*} [thisArg] The `this` binding of `callback`.
 * @returns {Array|Object|string} Returns `collection`.
 * @example
 *
 * _([1, 2, 3]).forEach(function(num) { console.log(num); }).join(',');
 * // => logs each number and returns '1,2,3'
 *
 * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { console.log(num); });
 * // => logs each number and returns the object (property order is not guaranteed across environments)
 */
function forEach(collection, callback, thisArg) {
  var index = -1,
      length = collection ? collection.length : 0;

  callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
  if (typeof length == 'number') {
    while (++index < length) {
      if (callback(collection[index], index, collection) === false) {
        break;
      }
    }
  } else {
    forOwn(collection, callback);
  }
  return collection;
}

module.exports = forEach;

},{"lodash._basecreatecallback":325,"lodash.forown":348}],325:[function(require,module,exports){
module.exports=require(262)
},{"lodash._setbinddata":326,"lodash.bind":329,"lodash.identity":345,"lodash.support":346}],326:[function(require,module,exports){
module.exports=require(263)
},{"lodash._isnative":327,"lodash.noop":328}],327:[function(require,module,exports){
module.exports=require(252)
},{}],328:[function(require,module,exports){
module.exports=require(265)
},{}],329:[function(require,module,exports){
module.exports=require(266)
},{"lodash._createwrapper":330,"lodash._slice":344}],330:[function(require,module,exports){
module.exports=require(267)
},{"lodash._basebind":331,"lodash._basecreatewrapper":337,"lodash._slice":344,"lodash.isfunction":343}],331:[function(require,module,exports){
module.exports=require(268)
},{"lodash._basecreate":332,"lodash._setbinddata":326,"lodash._slice":344,"lodash.isobject":335}],332:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":333,"lodash.isobject":335,"lodash.noop":334}],333:[function(require,module,exports){
module.exports=require(252)
},{}],334:[function(require,module,exports){
module.exports=require(265)
},{}],335:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":336}],336:[function(require,module,exports){
module.exports=require(250)
},{}],337:[function(require,module,exports){
module.exports=require(272)
},{"lodash._basecreate":338,"lodash._setbinddata":326,"lodash._slice":344,"lodash.isobject":341}],338:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":339,"lodash.isobject":341,"lodash.noop":340}],339:[function(require,module,exports){
module.exports=require(252)
},{}],340:[function(require,module,exports){
module.exports=require(265)
},{}],341:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":342}],342:[function(require,module,exports){
module.exports=require(250)
},{}],343:[function(require,module,exports){
module.exports=require(276)
},{}],344:[function(require,module,exports){
module.exports=require(277)
},{}],345:[function(require,module,exports){
module.exports=require(278)
},{}],346:[function(require,module,exports){
module.exports=require(279)
},{"lodash._isnative":347}],347:[function(require,module,exports){
module.exports=require(252)
},{}],348:[function(require,module,exports){
module.exports=require(297)
},{"lodash._basecreatecallback":325,"lodash._objecttypes":349,"lodash.keys":350}],349:[function(require,module,exports){
module.exports=require(250)
},{}],350:[function(require,module,exports){
module.exports=require(251)
},{"lodash._isnative":351,"lodash._shimkeys":352,"lodash.isobject":353}],351:[function(require,module,exports){
module.exports=require(252)
},{}],352:[function(require,module,exports){
module.exports=require(253)
},{"lodash._objecttypes":349}],353:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":349}],354:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseCreateCallback = require('lodash._basecreatecallback'),
    baseIsEqual = require('lodash._baseisequal');

/**
 * Performs a deep comparison between two values to determine if they are
 * equivalent to each other. If a callback is provided it will be executed
 * to compare values. If the callback returns `undefined` comparisons will
 * be handled by the method instead. The callback is bound to `thisArg` and
 * invoked with two arguments; (a, b).
 *
 * @static
 * @memberOf _
 * @category Objects
 * @param {*} a The value to compare.
 * @param {*} b The other value to compare.
 * @param {Function} [callback] The function to customize comparing values.
 * @param {*} [thisArg] The `this` binding of `callback`.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'name': 'fred' };
 * var copy = { 'name': 'fred' };
 *
 * object == copy;
 * // => false
 *
 * _.isEqual(object, copy);
 * // => true
 *
 * var words = ['hello', 'goodbye'];
 * var otherWords = ['hi', 'goodbye'];
 *
 * _.isEqual(words, otherWords, function(a, b) {
 *   var reGreet = /^(?:hello|hi)$/i,
 *       aGreet = _.isString(a) && reGreet.test(a),
 *       bGreet = _.isString(b) && reGreet.test(b);
 *
 *   return (aGreet || bGreet) ? (aGreet == bGreet) : undefined;
 * });
 * // => true
 */
function isEqual(a, b, callback, thisArg) {
  return baseIsEqual(a, b, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 2));
}

module.exports = isEqual;

},{"lodash._basecreatecallback":355,"lodash._baseisequal":378}],355:[function(require,module,exports){
module.exports=require(262)
},{"lodash._setbinddata":356,"lodash.bind":359,"lodash.identity":375,"lodash.support":376}],356:[function(require,module,exports){
module.exports=require(263)
},{"lodash._isnative":357,"lodash.noop":358}],357:[function(require,module,exports){
module.exports=require(252)
},{}],358:[function(require,module,exports){
module.exports=require(265)
},{}],359:[function(require,module,exports){
module.exports=require(266)
},{"lodash._createwrapper":360,"lodash._slice":374}],360:[function(require,module,exports){
module.exports=require(267)
},{"lodash._basebind":361,"lodash._basecreatewrapper":367,"lodash._slice":374,"lodash.isfunction":373}],361:[function(require,module,exports){
module.exports=require(268)
},{"lodash._basecreate":362,"lodash._setbinddata":356,"lodash._slice":374,"lodash.isobject":365}],362:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":363,"lodash.isobject":365,"lodash.noop":364}],363:[function(require,module,exports){
module.exports=require(252)
},{}],364:[function(require,module,exports){
module.exports=require(265)
},{}],365:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":366}],366:[function(require,module,exports){
module.exports=require(250)
},{}],367:[function(require,module,exports){
module.exports=require(272)
},{"lodash._basecreate":368,"lodash._setbinddata":356,"lodash._slice":374,"lodash.isobject":371}],368:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":369,"lodash.isobject":371,"lodash.noop":370}],369:[function(require,module,exports){
module.exports=require(252)
},{}],370:[function(require,module,exports){
module.exports=require(265)
},{}],371:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":372}],372:[function(require,module,exports){
module.exports=require(250)
},{}],373:[function(require,module,exports){
module.exports=require(276)
},{}],374:[function(require,module,exports){
module.exports=require(277)
},{}],375:[function(require,module,exports){
module.exports=require(278)
},{}],376:[function(require,module,exports){
module.exports=require(279)
},{"lodash._isnative":377}],377:[function(require,module,exports){
module.exports=require(252)
},{}],378:[function(require,module,exports){
module.exports=require(281)
},{"lodash._getarray":379,"lodash._objecttypes":381,"lodash._releasearray":382,"lodash.forin":385,"lodash.isfunction":386}],379:[function(require,module,exports){
module.exports=require(282)
},{"lodash._arraypool":380}],380:[function(require,module,exports){
module.exports=require(283)
},{}],381:[function(require,module,exports){
module.exports=require(250)
},{}],382:[function(require,module,exports){
module.exports=require(285)
},{"lodash._arraypool":383,"lodash._maxpoolsize":384}],383:[function(require,module,exports){
module.exports=require(283)
},{}],384:[function(require,module,exports){
module.exports=require(287)
},{}],385:[function(require,module,exports){
module.exports=require(288)
},{"lodash._basecreatecallback":355,"lodash._objecttypes":381}],386:[function(require,module,exports){
module.exports=require(276)
},{}],387:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseFlatten = require('lodash._baseflatten'),
    baseUniq = require('lodash._baseuniq');

/**
 * Creates an array of unique values, in order, of the provided arrays using
 * strict equality for comparisons, i.e. `===`.
 *
 * @static
 * @memberOf _
 * @category Arrays
 * @param {...Array} [array] The arrays to inspect.
 * @returns {Array} Returns an array of combined values.
 * @example
 *
 * _.union([1, 2, 3], [5, 2, 1, 4], [2, 1]);
 * // => [1, 2, 3, 5, 4]
 */
function union() {
  return baseUniq(baseFlatten(arguments, true, true));
}

module.exports = union;

},{"lodash._baseflatten":388,"lodash._baseuniq":392}],388:[function(require,module,exports){
module.exports=require(256)
},{"lodash.isarguments":389,"lodash.isarray":390}],389:[function(require,module,exports){
module.exports=require(257)
},{}],390:[function(require,module,exports){
module.exports=require(258)
},{"lodash._isnative":391}],391:[function(require,module,exports){
module.exports=require(252)
},{}],392:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseIndexOf = require('lodash._baseindexof'),
    cacheIndexOf = require('lodash._cacheindexof'),
    createCache = require('lodash._createcache'),
    getArray = require('lodash._getarray'),
    largeArraySize = require('lodash._largearraysize'),
    releaseArray = require('lodash._releasearray'),
    releaseObject = require('lodash._releaseobject');

/**
 * The base implementation of `_.uniq` without support for callback shorthands
 * or `thisArg` binding.
 *
 * @private
 * @param {Array} array The array to process.
 * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.
 * @param {Function} [callback] The function called per iteration.
 * @returns {Array} Returns a duplicate-value-free array.
 */
function baseUniq(array, isSorted, callback) {
  var index = -1,
      indexOf = baseIndexOf,
      length = array ? array.length : 0,
      result = [];

  var isLarge = !isSorted && length >= largeArraySize,
      seen = (callback || isLarge) ? getArray() : result;

  if (isLarge) {
    var cache = createCache(seen);
    indexOf = cacheIndexOf;
    seen = cache;
  }
  while (++index < length) {
    var value = array[index],
        computed = callback ? callback(value, index, array) : value;

    if (isSorted
          ? !index || seen[seen.length - 1] !== computed
          : indexOf(seen, computed) < 0
        ) {
      if (callback || isLarge) {
        seen.push(computed);
      }
      result.push(value);
    }
  }
  if (isLarge) {
    releaseArray(seen.array);
    releaseObject(seen);
  } else if (callback) {
    releaseArray(seen);
  }
  return result;
}

module.exports = baseUniq;

},{"lodash._baseindexof":393,"lodash._cacheindexof":394,"lodash._createcache":396,"lodash._getarray":401,"lodash._largearraysize":403,"lodash._releasearray":404,"lodash._releaseobject":407}],393:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/**
 * The base implementation of `_.indexOf` without support for binary searches
 * or `fromIndex` constraints.
 *
 * @private
 * @param {Array} array The array to search.
 * @param {*} value The value to search for.
 * @param {number} [fromIndex=0] The index to search from.
 * @returns {number} Returns the index of the matched value or `-1`.
 */
function baseIndexOf(array, value, fromIndex) {
  var index = (fromIndex || 0) - 1,
      length = array ? array.length : 0;

  while (++index < length) {
    if (array[index] === value) {
      return index;
    }
  }
  return -1;
}

module.exports = baseIndexOf;

},{}],394:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseIndexOf = require('lodash._baseindexof'),
    keyPrefix = require('lodash._keyprefix');

/**
 * An implementation of `_.contains` for cache objects that mimics the return
 * signature of `_.indexOf` by returning `0` if the value is found, else `-1`.
 *
 * @private
 * @param {Object} cache The cache object to inspect.
 * @param {*} value The value to search for.
 * @returns {number} Returns `0` if `value` is found, else `-1`.
 */
function cacheIndexOf(cache, value) {
  var type = typeof value;
  cache = cache.cache;

  if (type == 'boolean' || value == null) {
    return cache[value] ? 0 : -1;
  }
  if (type != 'number' && type != 'string') {
    type = 'object';
  }
  var key = type == 'number' ? value : keyPrefix + value;
  cache = (cache = cache[type]) && cache[key];

  return type == 'object'
    ? (cache && baseIndexOf(cache, value) > -1 ? 0 : -1)
    : (cache ? 0 : -1);
}

module.exports = cacheIndexOf;

},{"lodash._baseindexof":393,"lodash._keyprefix":395}],395:[function(require,module,exports){
/**
 * Lo-Dash 2.4.2 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2014 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/** Used to prefix keys to avoid issues with `__proto__` and properties on `Object.prototype` */
var keyPrefix = '__1335248838000__';

module.exports = keyPrefix;

},{}],396:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var cachePush = require('lodash._cachepush'),
    getObject = require('lodash._getobject'),
    releaseObject = require('lodash._releaseobject');

/**
 * Creates a cache object to optimize linear searches of large arrays.
 *
 * @private
 * @param {Array} [array=[]] The array to search.
 * @returns {null|Object} Returns the cache object or `null` if caching should not be used.
 */
function createCache(array) {
  var index = -1,
      length = array.length,
      first = array[0],
      mid = array[(length / 2) | 0],
      last = array[length - 1];

  if (first && typeof first == 'object' &&
      mid && typeof mid == 'object' && last && typeof last == 'object') {
    return false;
  }
  var cache = getObject();
  cache['false'] = cache['null'] = cache['true'] = cache['undefined'] = false;

  var result = getObject();
  result.array = array;
  result.cache = cache;
  result.push = cachePush;

  while (++index < length) {
    result.push(array[index]);
  }
  return result;
}

module.exports = createCache;

},{"lodash._cachepush":397,"lodash._getobject":399,"lodash._releaseobject":407}],397:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var keyPrefix = require('lodash._keyprefix');

/**
 * Adds a given value to the corresponding cache object.
 *
 * @private
 * @param {*} value The value to add to the cache.
 */
function cachePush(value) {
  var cache = this.cache,
      type = typeof value;

  if (type == 'boolean' || value == null) {
    cache[value] = true;
  } else {
    if (type != 'number' && type != 'string') {
      type = 'object';
    }
    var key = type == 'number' ? value : keyPrefix + value,
        typeCache = cache[type] || (cache[type] = {});

    if (type == 'object') {
      (typeCache[key] || (typeCache[key] = [])).push(value);
    } else {
      typeCache[key] = true;
    }
  }
}

module.exports = cachePush;

},{"lodash._keyprefix":398}],398:[function(require,module,exports){
module.exports=require(395)
},{}],399:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var objectPool = require('lodash._objectpool');

/**
 * Gets an object from the object pool or creates a new one if the pool is empty.
 *
 * @private
 * @returns {Object} The object from the pool.
 */
function getObject() {
  return objectPool.pop() || {
    'array': null,
    'cache': null,
    'criteria': null,
    'false': false,
    'index': 0,
    'null': false,
    'number': null,
    'object': null,
    'push': null,
    'string': null,
    'true': false,
    'undefined': false,
    'value': null
  };
}

module.exports = getObject;

},{"lodash._objectpool":400}],400:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/** Used to pool arrays and objects used internally */
var objectPool = [];

module.exports = objectPool;

},{}],401:[function(require,module,exports){
module.exports=require(282)
},{"lodash._arraypool":402}],402:[function(require,module,exports){
module.exports=require(283)
},{}],403:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/** Used as the size when optimizations are enabled for large arrays */
var largeArraySize = 75;

module.exports = largeArraySize;

},{}],404:[function(require,module,exports){
module.exports=require(285)
},{"lodash._arraypool":405,"lodash._maxpoolsize":406}],405:[function(require,module,exports){
module.exports=require(283)
},{}],406:[function(require,module,exports){
module.exports=require(287)
},{}],407:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var maxPoolSize = require('lodash._maxpoolsize'),
    objectPool = require('lodash._objectpool');

/**
 * Releases the given object back to the object pool.
 *
 * @private
 * @param {Object} [object] The object to release.
 */
function releaseObject(object) {
  var cache = object.cache;
  if (cache) {
    releaseObject(cache);
  }
  object.array = object.cache = object.criteria = object.object = object.number = object.string = object.value = null;
  if (objectPool.length < maxPoolSize) {
    objectPool.push(object);
  }
}

module.exports = releaseObject;

},{"lodash._maxpoolsize":408,"lodash._objectpool":409}],408:[function(require,module,exports){
module.exports=require(287)
},{}],409:[function(require,module,exports){
module.exports=require(400)
},{}],410:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var baseUniq = require('lodash._baseuniq'),
    createCallback = require('lodash.createcallback');

/**
 * Creates a duplicate-value-free version of an array using strict equality
 * for comparisons, i.e. `===`. If the array is sorted, providing
 * `true` for `isSorted` will use a faster algorithm. If a callback is provided
 * each element of `array` is passed through the callback before uniqueness
 * is computed. The callback is bound to `thisArg` and invoked with three
 * arguments; (value, index, array).
 *
 * If a property name is provided for `callback` the created "_.pluck" style
 * callback will return the property value of the given element.
 *
 * If an object is provided for `callback` the created "_.where" style callback
 * will return `true` for elements that have the properties of the given object,
 * else `false`.
 *
 * @static
 * @memberOf _
 * @alias unique
 * @category Arrays
 * @param {Array} array The array to process.
 * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.
 * @param {Function|Object|string} [callback=identity] The function called
 *  per iteration. If a property name or object is provided it will be used
 *  to create a "_.pluck" or "_.where" style callback, respectively.
 * @param {*} [thisArg] The `this` binding of `callback`.
 * @returns {Array} Returns a duplicate-value-free array.
 * @example
 *
 * _.uniq([1, 2, 1, 3, 1]);
 * // => [1, 2, 3]
 *
 * _.uniq([1, 1, 2, 2, 3], true);
 * // => [1, 2, 3]
 *
 * _.uniq(['A', 'b', 'C', 'a', 'B', 'c'], function(letter) { return letter.toLowerCase(); });
 * // => ['A', 'b', 'C']
 *
 * _.uniq([1, 2.5, 3, 1.5, 2, 3.5], function(num) { return this.floor(num); }, Math);
 * // => [1, 2.5, 3]
 *
 * // using "_.pluck" callback shorthand
 * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
 * // => [{ 'x': 1 }, { 'x': 2 }]
 */
function uniq(array, isSorted, callback, thisArg) {
  // juggle arguments
  if (typeof isSorted != 'boolean' && isSorted != null) {
    thisArg = callback;
    callback = (typeof isSorted != 'function' && thisArg && thisArg[isSorted] === array) ? null : isSorted;
    isSorted = false;
  }
  if (callback != null) {
    callback = createCallback(callback, thisArg, 3);
  }
  return baseUniq(array, isSorted, callback);
}

module.exports = uniq;

},{"lodash._baseuniq":411,"lodash.createcallback":429}],411:[function(require,module,exports){
module.exports=require(392)
},{"lodash._baseindexof":412,"lodash._cacheindexof":413,"lodash._createcache":415,"lodash._getarray":420,"lodash._largearraysize":422,"lodash._releasearray":423,"lodash._releaseobject":426}],412:[function(require,module,exports){
module.exports=require(393)
},{}],413:[function(require,module,exports){
module.exports=require(394)
},{"lodash._baseindexof":412,"lodash._keyprefix":414}],414:[function(require,module,exports){
module.exports=require(395)
},{}],415:[function(require,module,exports){
module.exports=require(396)
},{"lodash._cachepush":416,"lodash._getobject":418,"lodash._releaseobject":426}],416:[function(require,module,exports){
module.exports=require(397)
},{"lodash._keyprefix":417}],417:[function(require,module,exports){
module.exports=require(395)
},{}],418:[function(require,module,exports){
module.exports=require(399)
},{"lodash._objectpool":419}],419:[function(require,module,exports){
module.exports=require(400)
},{}],420:[function(require,module,exports){
module.exports=require(282)
},{"lodash._arraypool":421}],421:[function(require,module,exports){
module.exports=require(283)
},{}],422:[function(require,module,exports){
module.exports=require(403)
},{}],423:[function(require,module,exports){
module.exports=require(285)
},{"lodash._arraypool":424,"lodash._maxpoolsize":425}],424:[function(require,module,exports){
module.exports=require(283)
},{}],425:[function(require,module,exports){
module.exports=require(287)
},{}],426:[function(require,module,exports){
module.exports=require(407)
},{"lodash._maxpoolsize":427,"lodash._objectpool":428}],427:[function(require,module,exports){
module.exports=require(287)
},{}],428:[function(require,module,exports){
module.exports=require(400)
},{}],429:[function(require,module,exports){
module.exports=require(261)
},{"lodash._basecreatecallback":430,"lodash._baseisequal":449,"lodash.isobject":458,"lodash.keys":460,"lodash.property":464}],430:[function(require,module,exports){
module.exports=require(262)
},{"lodash._setbinddata":431,"lodash.bind":434,"lodash.identity":446,"lodash.support":447}],431:[function(require,module,exports){
module.exports=require(263)
},{"lodash._isnative":432,"lodash.noop":433}],432:[function(require,module,exports){
module.exports=require(252)
},{}],433:[function(require,module,exports){
module.exports=require(265)
},{}],434:[function(require,module,exports){
module.exports=require(266)
},{"lodash._createwrapper":435,"lodash._slice":445}],435:[function(require,module,exports){
module.exports=require(267)
},{"lodash._basebind":436,"lodash._basecreatewrapper":440,"lodash._slice":445,"lodash.isfunction":444}],436:[function(require,module,exports){
module.exports=require(268)
},{"lodash._basecreate":437,"lodash._setbinddata":431,"lodash._slice":445,"lodash.isobject":458}],437:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":438,"lodash.isobject":458,"lodash.noop":439}],438:[function(require,module,exports){
module.exports=require(252)
},{}],439:[function(require,module,exports){
module.exports=require(265)
},{}],440:[function(require,module,exports){
module.exports=require(272)
},{"lodash._basecreate":441,"lodash._setbinddata":431,"lodash._slice":445,"lodash.isobject":458}],441:[function(require,module,exports){
module.exports=require(269)
},{"lodash._isnative":442,"lodash.isobject":458,"lodash.noop":443}],442:[function(require,module,exports){
module.exports=require(252)
},{}],443:[function(require,module,exports){
module.exports=require(265)
},{}],444:[function(require,module,exports){
module.exports=require(276)
},{}],445:[function(require,module,exports){
module.exports=require(277)
},{}],446:[function(require,module,exports){
module.exports=require(278)
},{}],447:[function(require,module,exports){
module.exports=require(279)
},{"lodash._isnative":448}],448:[function(require,module,exports){
module.exports=require(252)
},{}],449:[function(require,module,exports){
module.exports=require(281)
},{"lodash._getarray":450,"lodash._objecttypes":452,"lodash._releasearray":453,"lodash.forin":456,"lodash.isfunction":457}],450:[function(require,module,exports){
module.exports=require(282)
},{"lodash._arraypool":451}],451:[function(require,module,exports){
module.exports=require(283)
},{}],452:[function(require,module,exports){
module.exports=require(250)
},{}],453:[function(require,module,exports){
module.exports=require(285)
},{"lodash._arraypool":454,"lodash._maxpoolsize":455}],454:[function(require,module,exports){
module.exports=require(283)
},{}],455:[function(require,module,exports){
module.exports=require(287)
},{}],456:[function(require,module,exports){
module.exports=require(288)
},{"lodash._basecreatecallback":430,"lodash._objecttypes":452}],457:[function(require,module,exports){
module.exports=require(276)
},{}],458:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":459}],459:[function(require,module,exports){
module.exports=require(250)
},{}],460:[function(require,module,exports){
module.exports=require(251)
},{"lodash._isnative":461,"lodash._shimkeys":462,"lodash.isobject":458}],461:[function(require,module,exports){
module.exports=require(252)
},{}],462:[function(require,module,exports){
module.exports=require(253)
},{"lodash._objecttypes":463}],463:[function(require,module,exports){
module.exports=require(250)
},{}],464:[function(require,module,exports){
module.exports=require(296)
},{}],465:[function(require,module,exports){
/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var keys = require('lodash.keys');

/**
 * Creates an array composed of the own enumerable property values of `object`.
 *
 * @static
 * @memberOf _
 * @category Objects
 * @param {Object} object The object to inspect.
 * @returns {Array} Returns an array of property values.
 * @example
 *
 * _.values({ 'one': 1, 'two': 2, 'three': 3 });
 * // => [1, 2, 3] (property order is not guaranteed across environments)
 */
function values(object) {
  var index = -1,
      props = keys(object),
      length = props.length,
      result = Array(length);

  while (++index < length) {
    result[index] = object[props[index]];
  }
  return result;
}

module.exports = values;

},{"lodash.keys":466}],466:[function(require,module,exports){
module.exports=require(251)
},{"lodash._isnative":467,"lodash._shimkeys":468,"lodash.isobject":470}],467:[function(require,module,exports){
module.exports=require(252)
},{}],468:[function(require,module,exports){
module.exports=require(253)
},{"lodash._objecttypes":469}],469:[function(require,module,exports){
module.exports=require(250)
},{}],470:[function(require,module,exports){
module.exports=require(254)
},{"lodash._objecttypes":471}],471:[function(require,module,exports){
module.exports=require(250)
},{}]},{},[1]);
